var zL=Object.defineProperty;var SC=s=>{throw TypeError(s)};var HL=(s,t,e)=>t in s?zL(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var K=(s,t,e)=>HL(s,typeof t!="symbol"?t+"":t,e),nb=(s,t,e)=>t.has(s)||SC("Cannot "+e);var c=(s,t,e)=>(nb(s,t,"read from private field"),e?e.call(s):t.get(s)),E=(s,t,e)=>t.has(s)?SC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),b=(s,t,e,n)=>(nb(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),_=(s,t,e)=>(nb(s,t,"access private method"),e);var qe=(s,t,e,n)=>({set _(i){b(s,t,i,e)},get _(){return c(s,t,n)}});function WL(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in s)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(s,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function j_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ib={exports:{}},nf={},sb={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function $L(){if(AC)return Ft;AC=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,S={};function C(B,$,ut){this.props=B,this.context=$,this.refs=S,this.updater=ut||w}C.prototype.isReactComponent={},C.prototype.setState=function(B,$){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,$,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function T(){}T.prototype=C.prototype;function M(B,$,ut){this.props=B,this.context=$,this.refs=S,this.updater=ut||w}var k=M.prototype=new T;k.constructor=M,A(k,C.prototype),k.isPureReactComponent=!0;var D=Array.isArray,R=Object.prototype.hasOwnProperty,I={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function H(B,$,ut){var Ct,yt={},Tt=null,_t=null;if($!=null)for(Ct in $.ref!==void 0&&(_t=$.ref),$.key!==void 0&&(Tt=""+$.key),$)R.call($,Ct)&&!j.hasOwnProperty(Ct)&&(yt[Ct]=$[Ct]);var Ut=arguments.length-2;if(Ut===1)yt.children=ut;else if(1<Ut){for(var Jt=Array(Ut),Ge=0;Ge<Ut;Ge++)Jt[Ge]=arguments[Ge+2];yt.children=Jt}if(B&&B.defaultProps)for(Ct in Ut=B.defaultProps,Ut)yt[Ct]===void 0&&(yt[Ct]=Ut[Ct]);return{$$typeof:s,type:B,key:Tt,ref:_t,props:yt,_owner:I.current}}function X(B,$){return{$$typeof:s,type:B.type,key:$,ref:B.ref,props:B.props,_owner:B._owner}}function Q(B){return typeof B=="object"&&B!==null&&B.$$typeof===s}function Z(B){var $={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ut){return $[ut]})}var vt=/\/+/g;function wt(B,$){return typeof B=="object"&&B!==null&&B.key!=null?Z(""+B.key):$.toString(36)}function gt(B,$,ut,Ct,yt){var Tt=typeof B;(Tt==="undefined"||Tt==="boolean")&&(B=null);var _t=!1;if(B===null)_t=!0;else switch(Tt){case"string":case"number":_t=!0;break;case"object":switch(B.$$typeof){case s:case t:_t=!0}}if(_t)return _t=B,yt=yt(_t),B=Ct===""?"."+wt(_t,0):Ct,D(yt)?(ut="",B!=null&&(ut=B.replace(vt,"$&/")+"/"),gt(yt,$,ut,"",function(Ge){return Ge})):yt!=null&&(Q(yt)&&(yt=X(yt,ut+(!yt.key||_t&&_t.key===yt.key?"":(""+yt.key).replace(vt,"$&/")+"/")+B)),$.push(yt)),1;if(_t=0,Ct=Ct===""?".":Ct+":",D(B))for(var Ut=0;Ut<B.length;Ut++){Tt=B[Ut];var Jt=Ct+wt(Tt,Ut);_t+=gt(Tt,$,ut,Jt,yt)}else if(Jt=y(B),typeof Jt=="function")for(B=Jt.call(B),Ut=0;!(Tt=B.next()).done;)Tt=Tt.value,Jt=Ct+wt(Tt,Ut++),_t+=gt(Tt,$,ut,Jt,yt);else if(Tt==="object")throw $=String(B),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return _t}function St(B,$,ut){if(B==null)return B;var Ct=[],yt=0;return gt(B,Ct,"","",function(Tt){return $.call(ut,Tt,yt++)}),Ct}function rt(B){if(B._status===-1){var $=B._result;$=$(),$.then(function(ut){(B._status===0||B._status===-1)&&(B._status=1,B._result=ut)},function(ut){(B._status===0||B._status===-1)&&(B._status=2,B._result=ut)}),B._status===-1&&(B._status=0,B._result=$)}if(B._status===1)return B._result.default;throw B._result}var tt={current:null},G={transition:null},at={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:G,ReactCurrentOwner:I};function nt(){throw Error("act(...) is not supported in production builds of React.")}return Ft.Children={map:St,forEach:function(B,$,ut){St(B,function(){$.apply(this,arguments)},ut)},count:function(B){var $=0;return St(B,function(){$++}),$},toArray:function(B){return St(B,function($){return $})||[]},only:function(B){if(!Q(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ft.Component=C,Ft.Fragment=e,Ft.Profiler=i,Ft.PureComponent=M,Ft.StrictMode=n,Ft.Suspense=h,Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=at,Ft.act=nt,Ft.cloneElement=function(B,$,ut){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ct=A({},B.props),yt=B.key,Tt=B.ref,_t=B._owner;if($!=null){if($.ref!==void 0&&(Tt=$.ref,_t=I.current),$.key!==void 0&&(yt=""+$.key),B.type&&B.type.defaultProps)var Ut=B.type.defaultProps;for(Jt in $)R.call($,Jt)&&!j.hasOwnProperty(Jt)&&(Ct[Jt]=$[Jt]===void 0&&Ut!==void 0?Ut[Jt]:$[Jt])}var Jt=arguments.length-2;if(Jt===1)Ct.children=ut;else if(1<Jt){Ut=Array(Jt);for(var Ge=0;Ge<Jt;Ge++)Ut[Ge]=arguments[Ge+2];Ct.children=Ut}return{$$typeof:s,type:B.type,key:yt,ref:Tt,props:Ct,_owner:_t}},Ft.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},Ft.createElement=H,Ft.createFactory=function(B){var $=H.bind(null,B);return $.type=B,$},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(B){return{$$typeof:u,render:B}},Ft.isValidElement=Q,Ft.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:rt}},Ft.memo=function(B,$){return{$$typeof:f,type:B,compare:$===void 0?null:$}},Ft.startTransition=function(B){var $=G.transition;G.transition={};try{B()}finally{G.transition=$}},Ft.unstable_act=nt,Ft.useCallback=function(B,$){return tt.current.useCallback(B,$)},Ft.useContext=function(B){return tt.current.useContext(B)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(B){return tt.current.useDeferredValue(B)},Ft.useEffect=function(B,$){return tt.current.useEffect(B,$)},Ft.useId=function(){return tt.current.useId()},Ft.useImperativeHandle=function(B,$,ut){return tt.current.useImperativeHandle(B,$,ut)},Ft.useInsertionEffect=function(B,$){return tt.current.useInsertionEffect(B,$)},Ft.useLayoutEffect=function(B,$){return tt.current.useLayoutEffect(B,$)},Ft.useMemo=function(B,$){return tt.current.useMemo(B,$)},Ft.useReducer=function(B,$,ut){return tt.current.useReducer(B,$,ut)},Ft.useRef=function(B){return tt.current.useRef(B)},Ft.useState=function(B){return tt.current.useState(B)},Ft.useSyncExternalStore=function(B,$,ut){return tt.current.useSyncExternalStore(B,$,ut)},Ft.useTransition=function(){return tt.current.useTransition()},Ft.version="18.3.1",Ft}var EC;function PS(){return EC||(EC=1,sb.exports=$L()),sb.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC;function GL(){if(CC)return nf;CC=1;var s=PS(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,f){var p,g={},y=null,w=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)n.call(h,p)&&!o.hasOwnProperty(p)&&(g[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)g[p]===void 0&&(g[p]=h[p]);return{$$typeof:t,type:u,key:y,ref:w,props:g,_owner:i.current}}return nf.Fragment=e,nf.jsx=l,nf.jsxs=l,nf}var TC;function XL(){return TC||(TC=1,ib.exports=GL()),ib.exports}var F=XL(),U=PS();const Su=j_(U),YL=WL({__proto__:null,default:Su},[U]);var ly={},rb={exports:{}},ti={},ob={exports:{}},ab={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C;function qL(){return _C||(_C=1,(function(s){function t(G,at){var nt=G.length;G.push(at);t:for(;0<nt;){var B=nt-1>>>1,$=G[B];if(0<i($,at))G[B]=at,G[nt]=$,nt=B;else break t}}function e(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var at=G[0],nt=G.pop();if(nt!==at){G[0]=nt;t:for(var B=0,$=G.length,ut=$>>>1;B<ut;){var Ct=2*(B+1)-1,yt=G[Ct],Tt=Ct+1,_t=G[Tt];if(0>i(yt,nt))Tt<$&&0>i(_t,yt)?(G[B]=_t,G[Tt]=nt,B=Tt):(G[B]=yt,G[Ct]=nt,B=Ct);else if(Tt<$&&0>i(_t,nt))G[B]=_t,G[Tt]=nt,B=Tt;else break t}}return at}function i(G,at){var nt=G.sortIndex-at.sortIndex;return nt!==0?nt:G.id-at.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();s.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,g=null,y=3,w=!1,A=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var at=e(f);at!==null;){if(at.callback===null)n(f);else if(at.startTime<=G)n(f),at.sortIndex=at.expirationTime,t(h,at);else break;at=e(f)}}function D(G){if(S=!1,k(G),!A)if(e(h)!==null)A=!0,rt(R);else{var at=e(f);at!==null&&tt(D,at.startTime-G)}}function R(G,at){A=!1,S&&(S=!1,T(H),H=-1),w=!0;var nt=y;try{for(k(at),g=e(h);g!==null&&(!(g.expirationTime>at)||G&&!Z());){var B=g.callback;if(typeof B=="function"){g.callback=null,y=g.priorityLevel;var $=B(g.expirationTime<=at);at=s.unstable_now(),typeof $=="function"?g.callback=$:g===e(h)&&n(h),k(at)}else n(h);g=e(h)}if(g!==null)var ut=!0;else{var Ct=e(f);Ct!==null&&tt(D,Ct.startTime-at),ut=!1}return ut}finally{g=null,y=nt,w=!1}}var I=!1,j=null,H=-1,X=5,Q=-1;function Z(){return!(s.unstable_now()-Q<X)}function vt(){if(j!==null){var G=s.unstable_now();Q=G;var at=!0;try{at=j(!0,G)}finally{at?wt():(I=!1,j=null)}}else I=!1}var wt;if(typeof M=="function")wt=function(){M(vt)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,St=gt.port2;gt.port1.onmessage=vt,wt=function(){St.postMessage(null)}}else wt=function(){C(vt,0)};function rt(G){j=G,I||(I=!0,wt())}function tt(G,at){H=C(function(){G(s.unstable_now())},at)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_continueExecution=function(){A||w||(A=!0,rt(R))},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return e(h)},s.unstable_next=function(G){switch(y){case 1:case 2:case 3:var at=3;break;default:at=y}var nt=y;y=at;try{return G()}finally{y=nt}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(G,at){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var nt=y;y=G;try{return at()}finally{y=nt}},s.unstable_scheduleCallback=function(G,at,nt){var B=s.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?B+nt:B):nt=B,G){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=nt+$,G={id:p++,callback:at,priorityLevel:G,startTime:nt,expirationTime:$,sortIndex:-1},nt>B?(G.sortIndex=nt,t(f,G),e(h)===null&&G===e(f)&&(S?(T(H),H=-1):S=!0,tt(D,nt-B))):(G.sortIndex=$,t(h,G),A||w||(A=!0,rt(R))),G},s.unstable_shouldYield=Z,s.unstable_wrapCallback=function(G){var at=y;return function(){var nt=y;y=at;try{return G.apply(this,arguments)}finally{y=nt}}}})(ab)),ab}var PC;function KL(){return PC||(PC=1,ob.exports=qL()),ob.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC;function QL(){if(kC)return ti;kC=1;var s=PS(),t=KL();function e(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(r,a){l(r,a),l(r+"Capture",a)}function l(r,a){for(i[r]=a,r=0;r<a.length;r++)n.add(a[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(r){return h.call(g,r)?!0:h.call(p,r)?!1:f.test(r)?g[r]=!0:(p[r]=!0,!1)}function w(r,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function A(r,a,d,m){if(a===null||typeof a>"u"||w(r,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(r,a,d,m,v,x,P){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=d,this.propertyName=r,this.type=a,this.sanitizeURL=x,this.removeEmptyString=P}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){C[r]=new S(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];C[a]=new S(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){C[r]=new S(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){C[r]=new S(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){C[r]=new S(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){C[r]=new S(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){C[r]=new S(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){C[r]=new S(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){C[r]=new S(r,5,!1,r.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function M(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(T,M);C[a]=new S(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(T,M);C[a]=new S(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(T,M);C[a]=new S(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){C[r]=new S(r,1,!1,r.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){C[r]=new S(r,1,!1,r.toLowerCase(),null,!0,!0)});function k(r,a,d,m){var v=C.hasOwnProperty(a)?C[a]:null;(v!==null?v.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,d,v,m)&&(d=null),m||v===null?y(a)&&(d===null?r.removeAttribute(a):r.setAttribute(a,""+d)):v.mustUseProperty?r[v.propertyName]=d===null?v.type===3?!1:"":d:(a=v.attributeName,m=v.attributeNamespace,d===null?r.removeAttribute(a):(v=v.type,d=v===3||v===4&&d===!0?"":""+d,m?r.setAttributeNS(m,a,d):r.setAttribute(a,d))))}var D=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),Z=Symbol.for("react.context"),vt=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),gt=Symbol.for("react.suspense_list"),St=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),tt=Symbol.for("react.offscreen"),G=Symbol.iterator;function at(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var nt=Object.assign,B;function $(r){if(B===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+r}var ut=!1;function Ct(r,a){if(!r||ut)return"";ut=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var m=W}Reflect.construct(r,[],a)}else{try{a.call()}catch(W){m=W}r.call(a.prototype)}else{try{throw Error()}catch(W){m=W}r()}}catch(W){if(W&&m&&typeof W.stack=="string"){for(var v=W.stack.split(`
`),x=m.stack.split(`
`),P=v.length-1,L=x.length-1;1<=P&&0<=L&&v[P]!==x[L];)L--;for(;1<=P&&0<=L;P--,L--)if(v[P]!==x[L]){if(P!==1||L!==1)do if(P--,L--,0>L||v[P]!==x[L]){var N=`
`+v[P].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=P&&0<=L);break}}}finally{ut=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?$(r):""}function yt(r){switch(r.tag){case 5:return $(r.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return r=Ct(r.type,!1),r;case 11:return r=Ct(r.type.render,!1),r;case 1:return r=Ct(r.type,!0),r;default:return""}}function Tt(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case j:return"Fragment";case I:return"Portal";case X:return"Profiler";case H:return"StrictMode";case wt:return"Suspense";case gt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Z:return(r.displayName||"Context")+".Consumer";case Q:return(r._context.displayName||"Context")+".Provider";case vt:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case St:return a=r.displayName||null,a!==null?a:Tt(r.type)||"Memo";case rt:a=r._payload,r=r._init;try{return Tt(r(a))}catch{}}return null}function _t(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tt(a);case 8:return a===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ut(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Jt(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ge(r){var a=Jt(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),m=""+r[a];if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,x=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return v.call(this)},set:function(P){m=""+P,x.call(this,P)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Vi(r){r._valueTracker||(r._valueTracker=Ge(r))}function Vc(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return r&&(m=Jt(r)?r.checked?"true":"false":r.value),r=m,r!==d?(a.setValue(r),!0):!1}function Ga(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function gd(r,a){var d=a.checked;return nt({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function kA(r,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=Ut(a.value!=null?a.value:d),r._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function MA(r,a){a=a.checked,a!=null&&k(r,"checked",a,!1)}function u0(r,a){MA(r,a);var d=Ut(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?h0(r,a.type,d):a.hasOwnProperty("defaultValue")&&h0(r,a.type,Ut(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function DA(r,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,d||a===r.value||(r.value=a),r.defaultValue=a}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function h0(r,a,d){(a!=="number"||Ga(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var yd=Array.isArray;function Uc(r,a,d,m){if(r=r.options,a){a={};for(var v=0;v<d.length;v++)a["$"+d[v]]=!0;for(d=0;d<r.length;d++)v=a.hasOwnProperty("$"+r[d].value),r[d].selected!==v&&(r[d].selected=v),v&&m&&(r[d].defaultSelected=!0)}else{for(d=""+Ut(d),a=null,v=0;v<r.length;v++){if(r[v].value===d){r[v].selected=!0,m&&(r[v].defaultSelected=!0);return}a!==null||r[v].disabled||(a=r[v])}a!==null&&(a.selected=!0)}}function d0(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(e(91));return nt({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function RA(r,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(e(92));if(yd(d)){if(1<d.length)throw Error(e(93));d=d[0]}a=d}a==null&&(a=""),d=a}r._wrapperState={initialValue:Ut(d)}}function LA(r,a){var d=Ut(a.value),m=Ut(a.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),a.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),m!=null&&(r.defaultValue=""+m)}function IA(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function NA(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function f0(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?NA(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var tg,FA=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,v){MSApp.execUnsafeLocalFunction(function(){return r(a,d,m,v)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=tg.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function vd(r,a){if(a){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=a;return}}r.textContent=a}var wd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GD=["Webkit","ms","Moz","O"];Object.keys(wd).forEach(function(r){GD.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),wd[a]=wd[r]})});function OA(r,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||wd.hasOwnProperty(r)&&wd[r]?(""+a).trim():a+"px"}function BA(r,a){r=r.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,v=OA(d,a[d],m);d==="float"&&(d="cssFloat"),m?r.setProperty(d,v):r[d]=v}}var XD=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function p0(r,a){if(a){if(XD[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(e(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(e(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(e(61))}if(a.style!=null&&typeof a.style!="object")throw Error(e(62))}}function m0(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g0=null;function y0(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var v0=null,zc=null,Hc=null;function jA(r){if(r=Ud(r)){if(typeof v0!="function")throw Error(e(280));var a=r.stateNode;a&&(a=Ag(a),v0(r.stateNode,r.type,a))}}function VA(r){zc?Hc?Hc.push(r):Hc=[r]:zc=r}function UA(){if(zc){var r=zc,a=Hc;if(Hc=zc=null,jA(r),a)for(r=0;r<a.length;r++)jA(a[r])}}function zA(r,a){return r(a)}function HA(){}var w0=!1;function WA(r,a,d){if(w0)return r(a,d);w0=!0;try{return zA(r,a,d)}finally{w0=!1,(zc!==null||Hc!==null)&&(HA(),UA())}}function bd(r,a){var d=r.stateNode;if(d===null)return null;var m=Ag(d);if(m===null)return null;d=m[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break t;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(e(231,a,typeof d));return d}var b0=!1;if(u)try{var xd={};Object.defineProperty(xd,"passive",{get:function(){b0=!0}}),window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{b0=!1}function YD(r,a,d,m,v,x,P,L,N){var W=Array.prototype.slice.call(arguments,3);try{a.apply(d,W)}catch(q){this.onError(q)}}var Sd=!1,eg=null,ng=!1,x0=null,qD={onError:function(r){Sd=!0,eg=r}};function KD(r,a,d,m,v,x,P,L,N){Sd=!1,eg=null,YD.apply(qD,arguments)}function QD(r,a,d,m,v,x,P,L,N){if(KD.apply(this,arguments),Sd){if(Sd){var W=eg;Sd=!1,eg=null}else throw Error(e(198));ng||(ng=!0,x0=W)}}function Xa(r){var a=r,d=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(d=a.return),r=a.return;while(r)}return a.tag===3?d:null}function $A(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function GA(r){if(Xa(r)!==r)throw Error(e(188))}function JD(r){var a=r.alternate;if(!a){if(a=Xa(r),a===null)throw Error(e(188));return a!==r?null:r}for(var d=r,m=a;;){var v=d.return;if(v===null)break;var x=v.alternate;if(x===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===d)return GA(v),r;if(x===m)return GA(v),a;x=x.sibling}throw Error(e(188))}if(d.return!==m.return)d=v,m=x;else{for(var P=!1,L=v.child;L;){if(L===d){P=!0,d=v,m=x;break}if(L===m){P=!0,m=v,d=x;break}L=L.sibling}if(!P){for(L=x.child;L;){if(L===d){P=!0,d=x,m=v;break}if(L===m){P=!0,m=x,d=v;break}L=L.sibling}if(!P)throw Error(e(189))}}if(d.alternate!==m)throw Error(e(190))}if(d.tag!==3)throw Error(e(188));return d.stateNode.current===d?r:a}function XA(r){return r=JD(r),r!==null?YA(r):null}function YA(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=YA(r);if(a!==null)return a;r=r.sibling}return null}var qA=t.unstable_scheduleCallback,KA=t.unstable_cancelCallback,ZD=t.unstable_shouldYield,tR=t.unstable_requestPaint,Fe=t.unstable_now,eR=t.unstable_getCurrentPriorityLevel,S0=t.unstable_ImmediatePriority,QA=t.unstable_UserBlockingPriority,ig=t.unstable_NormalPriority,nR=t.unstable_LowPriority,JA=t.unstable_IdlePriority,sg=null,Os=null;function iR(r){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(sg,r,void 0,(r.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:oR,sR=Math.log,rR=Math.LN2;function oR(r){return r>>>=0,r===0?32:31-(sR(r)/rR|0)|0}var rg=64,og=4194304;function Ad(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ag(r,a){var d=r.pendingLanes;if(d===0)return 0;var m=0,v=r.suspendedLanes,x=r.pingedLanes,P=d&268435455;if(P!==0){var L=P&~v;L!==0?m=Ad(L):(x&=P,x!==0&&(m=Ad(x)))}else P=d&~v,P!==0?m=Ad(P):x!==0&&(m=Ad(x));if(m===0)return 0;if(a!==0&&a!==m&&(a&v)===0&&(v=m&-m,x=a&-a,v>=x||v===16&&(x&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=m;0<a;)d=31-fs(a),v=1<<d,m|=r[d],a&=~v;return m}function aR(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lR(r,a){for(var d=r.suspendedLanes,m=r.pingedLanes,v=r.expirationTimes,x=r.pendingLanes;0<x;){var P=31-fs(x),L=1<<P,N=v[P];N===-1?((L&d)===0||(L&m)!==0)&&(v[P]=aR(L,a)):N<=a&&(r.expiredLanes|=L),x&=~L}}function A0(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ZA(){var r=rg;return rg<<=1,(rg&4194240)===0&&(rg=64),r}function E0(r){for(var a=[],d=0;31>d;d++)a.push(r);return a}function Ed(r,a,d){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-fs(a),r[a]=d}function cR(r,a){var d=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<d;){var v=31-fs(d),x=1<<v;a[v]=0,m[v]=-1,r[v]=-1,d&=~x}}function C0(r,a){var d=r.entangledLanes|=a;for(r=r.entanglements;d;){var m=31-fs(d),v=1<<m;v&a|r[m]&a&&(r[m]|=a),d&=~v}}var Yt=0;function t1(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var e1,T0,n1,i1,s1,_0=!1,lg=[],Eo=null,Co=null,To=null,Cd=new Map,Td=new Map,_o=[],uR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r1(r,a){switch(r){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Cd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(a.pointerId)}}function _d(r,a,d,m,v,x){return r===null||r.nativeEvent!==x?(r={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:x,targetContainers:[v]},a!==null&&(a=Ud(a),a!==null&&T0(a)),r):(r.eventSystemFlags|=m,a=r.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),r)}function hR(r,a,d,m,v){switch(a){case"focusin":return Eo=_d(Eo,r,a,d,m,v),!0;case"dragenter":return Co=_d(Co,r,a,d,m,v),!0;case"mouseover":return To=_d(To,r,a,d,m,v),!0;case"pointerover":var x=v.pointerId;return Cd.set(x,_d(Cd.get(x)||null,r,a,d,m,v)),!0;case"gotpointercapture":return x=v.pointerId,Td.set(x,_d(Td.get(x)||null,r,a,d,m,v)),!0}return!1}function o1(r){var a=Ya(r.target);if(a!==null){var d=Xa(a);if(d!==null){if(a=d.tag,a===13){if(a=$A(d),a!==null){r.blockedOn=a,s1(r.priority,function(){n1(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function cg(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var d=k0(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var m=new d.constructor(d.type,d);g0=m,d.target.dispatchEvent(m),g0=null}else return a=Ud(d),a!==null&&T0(a),r.blockedOn=d,!1;a.shift()}return!0}function a1(r,a,d){cg(r)&&d.delete(a)}function dR(){_0=!1,Eo!==null&&cg(Eo)&&(Eo=null),Co!==null&&cg(Co)&&(Co=null),To!==null&&cg(To)&&(To=null),Cd.forEach(a1),Td.forEach(a1)}function Pd(r,a){r.blockedOn===a&&(r.blockedOn=null,_0||(_0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dR)))}function kd(r){function a(v){return Pd(v,r)}if(0<lg.length){Pd(lg[0],r);for(var d=1;d<lg.length;d++){var m=lg[d];m.blockedOn===r&&(m.blockedOn=null)}}for(Eo!==null&&Pd(Eo,r),Co!==null&&Pd(Co,r),To!==null&&Pd(To,r),Cd.forEach(a),Td.forEach(a),d=0;d<_o.length;d++)m=_o[d],m.blockedOn===r&&(m.blockedOn=null);for(;0<_o.length&&(d=_o[0],d.blockedOn===null);)o1(d),d.blockedOn===null&&_o.shift()}var Wc=D.ReactCurrentBatchConfig,ug=!0;function fR(r,a,d,m){var v=Yt,x=Wc.transition;Wc.transition=null;try{Yt=1,P0(r,a,d,m)}finally{Yt=v,Wc.transition=x}}function pR(r,a,d,m){var v=Yt,x=Wc.transition;Wc.transition=null;try{Yt=4,P0(r,a,d,m)}finally{Yt=v,Wc.transition=x}}function P0(r,a,d,m){if(ug){var v=k0(r,a,d,m);if(v===null)G0(r,a,m,hg,d),r1(r,m);else if(hR(v,r,a,d,m))m.stopPropagation();else if(r1(r,m),a&4&&-1<uR.indexOf(r)){for(;v!==null;){var x=Ud(v);if(x!==null&&e1(x),x=k0(r,a,d,m),x===null&&G0(r,a,m,hg,d),x===v)break;v=x}v!==null&&m.stopPropagation()}else G0(r,a,m,null,d)}}var hg=null;function k0(r,a,d,m){if(hg=null,r=y0(m),r=Ya(r),r!==null)if(a=Xa(r),a===null)r=null;else if(d=a.tag,d===13){if(r=$A(a),r!==null)return r;r=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return hg=r,null}function l1(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eR()){case S0:return 1;case QA:return 4;case ig:case nR:return 16;case JA:return 536870912;default:return 16}default:return 16}}var Po=null,M0=null,dg=null;function c1(){if(dg)return dg;var r,a=M0,d=a.length,m,v="value"in Po?Po.value:Po.textContent,x=v.length;for(r=0;r<d&&a[r]===v[r];r++);var P=d-r;for(m=1;m<=P&&a[d-m]===v[x-m];m++);return dg=v.slice(r,1<m?1-m:void 0)}function fg(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function pg(){return!0}function u1(){return!1}function ui(r){function a(d,m,v,x,P){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=x,this.target=P,this.currentTarget=null;for(var L in r)r.hasOwnProperty(L)&&(d=r[L],this[L]=d?d(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?pg:u1,this.isPropagationStopped=u1,this}return nt(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=pg)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=pg)},persist:function(){},isPersistent:pg}),a}var $c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D0=ui($c),Md=nt({},$c,{view:0,detail:0}),mR=ui(Md),R0,L0,Dd,mg=nt({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N0,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dd&&(Dd&&r.type==="mousemove"?(R0=r.screenX-Dd.screenX,L0=r.screenY-Dd.screenY):L0=R0=0,Dd=r),R0)},movementY:function(r){return"movementY"in r?r.movementY:L0}}),h1=ui(mg),gR=nt({},mg,{dataTransfer:0}),yR=ui(gR),vR=nt({},Md,{relatedTarget:0}),I0=ui(vR),wR=nt({},$c,{animationName:0,elapsedTime:0,pseudoElement:0}),bR=ui(wR),xR=nt({},$c,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),SR=ui(xR),AR=nt({},$c,{data:0}),d1=ui(AR),ER={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _R(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=TR[r])?!!a[r]:!1}function N0(){return _R}var PR=nt({},Md,{key:function(r){if(r.key){var a=ER[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=fg(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?CR[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N0,charCode:function(r){return r.type==="keypress"?fg(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?fg(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),kR=ui(PR),MR=nt({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f1=ui(MR),DR=nt({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N0}),RR=ui(DR),LR=nt({},$c,{propertyName:0,elapsedTime:0,pseudoElement:0}),IR=ui(LR),NR=nt({},mg,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),FR=ui(NR),OR=[9,13,27,32],F0=u&&"CompositionEvent"in window,Rd=null;u&&"documentMode"in document&&(Rd=document.documentMode);var BR=u&&"TextEvent"in window&&!Rd,p1=u&&(!F0||Rd&&8<Rd&&11>=Rd),m1=" ",g1=!1;function y1(r,a){switch(r){case"keyup":return OR.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v1(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Gc=!1;function jR(r,a){switch(r){case"compositionend":return v1(a);case"keypress":return a.which!==32?null:(g1=!0,m1);case"textInput":return r=a.data,r===m1&&g1?null:r;default:return null}}function VR(r,a){if(Gc)return r==="compositionend"||!F0&&y1(r,a)?(r=c1(),dg=M0=Po=null,Gc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return p1&&a.locale!=="ko"?null:a.data;default:return null}}var UR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!UR[r.type]:a==="textarea"}function b1(r,a,d,m){VA(m),a=bg(a,"onChange"),0<a.length&&(d=new D0("onChange","change",null,d,m),r.push({event:d,listeners:a}))}var Ld=null,Id=null;function zR(r){B1(r,0)}function gg(r){var a=Qc(r);if(Vc(a))return r}function HR(r,a){if(r==="change")return a}var x1=!1;if(u){var O0;if(u){var B0="oninput"in document;if(!B0){var S1=document.createElement("div");S1.setAttribute("oninput","return;"),B0=typeof S1.oninput=="function"}O0=B0}else O0=!1;x1=O0&&(!document.documentMode||9<document.documentMode)}function A1(){Ld&&(Ld.detachEvent("onpropertychange",E1),Id=Ld=null)}function E1(r){if(r.propertyName==="value"&&gg(Id)){var a=[];b1(a,Id,r,y0(r)),WA(zR,a)}}function WR(r,a,d){r==="focusin"?(A1(),Ld=a,Id=d,Ld.attachEvent("onpropertychange",E1)):r==="focusout"&&A1()}function $R(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return gg(Id)}function GR(r,a){if(r==="click")return gg(a)}function XR(r,a){if(r==="input"||r==="change")return gg(a)}function YR(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var ps=typeof Object.is=="function"?Object.is:YR;function Nd(r,a){if(ps(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var d=Object.keys(r),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!h.call(a,v)||!ps(r[v],a[v]))return!1}return!0}function C1(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function T1(r,a){var d=C1(r);r=0;for(var m;d;){if(d.nodeType===3){if(m=r+d.textContent.length,r<=a&&m>=a)return{node:d,offset:a-r};r=m}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=C1(d)}}function _1(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?_1(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function P1(){for(var r=window,a=Ga();a instanceof r.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)r=a.contentWindow;else break;a=Ga(r.document)}return a}function j0(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function qR(r){var a=P1(),d=r.focusedElem,m=r.selectionRange;if(a!==d&&d&&d.ownerDocument&&_1(d.ownerDocument.documentElement,d)){if(m!==null&&j0(d)){if(a=m.start,r=m.end,r===void 0&&(r=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(r,d.value.length);else if(r=(a=d.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var v=d.textContent.length,x=Math.min(m.start,v);m=m.end===void 0?x:Math.min(m.end,v),!r.extend&&x>m&&(v=m,m=x,x=v),v=T1(d,x);var P=T1(d,m);v&&P&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==P.node||r.focusOffset!==P.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),r.removeAllRanges(),x>m?(r.addRange(a),r.extend(P.node,P.offset)):(a.setEnd(P.node,P.offset),r.addRange(a)))}}for(a=[],r=d;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)r=a[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var KR=u&&"documentMode"in document&&11>=document.documentMode,Xc=null,V0=null,Fd=null,U0=!1;function k1(r,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;U0||Xc==null||Xc!==Ga(m)||(m=Xc,"selectionStart"in m&&j0(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Fd&&Nd(Fd,m)||(Fd=m,m=bg(V0,"onSelect"),0<m.length&&(a=new D0("onSelect","select",null,a,d),r.push({event:a,listeners:m}),a.target=Xc)))}function yg(r,a){var d={};return d[r.toLowerCase()]=a.toLowerCase(),d["Webkit"+r]="webkit"+a,d["Moz"+r]="moz"+a,d}var Yc={animationend:yg("Animation","AnimationEnd"),animationiteration:yg("Animation","AnimationIteration"),animationstart:yg("Animation","AnimationStart"),transitionend:yg("Transition","TransitionEnd")},z0={},M1={};u&&(M1=document.createElement("div").style,"AnimationEvent"in window||(delete Yc.animationend.animation,delete Yc.animationiteration.animation,delete Yc.animationstart.animation),"TransitionEvent"in window||delete Yc.transitionend.transition);function vg(r){if(z0[r])return z0[r];if(!Yc[r])return r;var a=Yc[r],d;for(d in a)if(a.hasOwnProperty(d)&&d in M1)return z0[r]=a[d];return r}var D1=vg("animationend"),R1=vg("animationiteration"),L1=vg("animationstart"),I1=vg("transitionend"),N1=new Map,F1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ko(r,a){N1.set(r,a),o(a,[r])}for(var H0=0;H0<F1.length;H0++){var W0=F1[H0],QR=W0.toLowerCase(),JR=W0[0].toUpperCase()+W0.slice(1);ko(QR,"on"+JR)}ko(D1,"onAnimationEnd"),ko(R1,"onAnimationIteration"),ko(L1,"onAnimationStart"),ko("dblclick","onDoubleClick"),ko("focusin","onFocus"),ko("focusout","onBlur"),ko(I1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Od));function O1(r,a,d){var m=r.type||"unknown-event";r.currentTarget=d,QD(m,a,void 0,r),r.currentTarget=null}function B1(r,a){a=(a&4)!==0;for(var d=0;d<r.length;d++){var m=r[d],v=m.event;m=m.listeners;t:{var x=void 0;if(a)for(var P=m.length-1;0<=P;P--){var L=m[P],N=L.instance,W=L.currentTarget;if(L=L.listener,N!==x&&v.isPropagationStopped())break t;O1(v,L,W),x=N}else for(P=0;P<m.length;P++){if(L=m[P],N=L.instance,W=L.currentTarget,L=L.listener,N!==x&&v.isPropagationStopped())break t;O1(v,L,W),x=N}}}if(ng)throw r=x0,ng=!1,x0=null,r}function fe(r,a){var d=a[J0];d===void 0&&(d=a[J0]=new Set);var m=r+"__bubble";d.has(m)||(j1(a,r,2,!1),d.add(m))}function $0(r,a,d){var m=0;a&&(m|=4),j1(d,r,m,a)}var wg="_reactListening"+Math.random().toString(36).slice(2);function Bd(r){if(!r[wg]){r[wg]=!0,n.forEach(function(d){d!=="selectionchange"&&(ZR.has(d)||$0(d,!1,r),$0(d,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[wg]||(a[wg]=!0,$0("selectionchange",!1,a))}}function j1(r,a,d,m){switch(l1(a)){case 1:var v=fR;break;case 4:v=pR;break;default:v=P0}d=v.bind(null,a,d,r),v=void 0,!b0||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?r.addEventListener(a,d,{capture:!0,passive:v}):r.addEventListener(a,d,!0):v!==void 0?r.addEventListener(a,d,{passive:v}):r.addEventListener(a,d,!1)}function G0(r,a,d,m,v){var x=m;if((a&1)===0&&(a&2)===0&&m!==null)t:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var L=m.stateNode.containerInfo;if(L===v||L.nodeType===8&&L.parentNode===v)break;if(P===4)for(P=m.return;P!==null;){var N=P.tag;if((N===3||N===4)&&(N=P.stateNode.containerInfo,N===v||N.nodeType===8&&N.parentNode===v))return;P=P.return}for(;L!==null;){if(P=Ya(L),P===null)return;if(N=P.tag,N===5||N===6){m=x=P;continue t}L=L.parentNode}}m=m.return}WA(function(){var W=x,q=y0(d),J=[];t:{var Y=N1.get(r);if(Y!==void 0){var ot=D0,dt=r;switch(r){case"keypress":if(fg(d)===0)break t;case"keydown":case"keyup":ot=kR;break;case"focusin":dt="focus",ot=I0;break;case"focusout":dt="blur",ot=I0;break;case"beforeblur":case"afterblur":ot=I0;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=h1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=yR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=RR;break;case D1:case R1:case L1:ot=bR;break;case I1:ot=IR;break;case"scroll":ot=mR;break;case"wheel":ot=FR;break;case"copy":case"cut":case"paste":ot=SR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=f1}var ft=(a&4)!==0,Oe=!ft&&r==="scroll",V=ft?Y!==null?Y+"Capture":null:Y;ft=[];for(var O=W,z;O!==null;){z=O;var et=z.stateNode;if(z.tag===5&&et!==null&&(z=et,V!==null&&(et=bd(O,V),et!=null&&ft.push(jd(O,et,z)))),Oe)break;O=O.return}0<ft.length&&(Y=new ot(Y,dt,null,d,q),J.push({event:Y,listeners:ft}))}}if((a&7)===0){t:{if(Y=r==="mouseover"||r==="pointerover",ot=r==="mouseout"||r==="pointerout",Y&&d!==g0&&(dt=d.relatedTarget||d.fromElement)&&(Ya(dt)||dt[wr]))break t;if((ot||Y)&&(Y=q.window===q?q:(Y=q.ownerDocument)?Y.defaultView||Y.parentWindow:window,ot?(dt=d.relatedTarget||d.toElement,ot=W,dt=dt?Ya(dt):null,dt!==null&&(Oe=Xa(dt),dt!==Oe||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(ot=null,dt=W),ot!==dt)){if(ft=h1,et="onMouseLeave",V="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(ft=f1,et="onPointerLeave",V="onPointerEnter",O="pointer"),Oe=ot==null?Y:Qc(ot),z=dt==null?Y:Qc(dt),Y=new ft(et,O+"leave",ot,d,q),Y.target=Oe,Y.relatedTarget=z,et=null,Ya(q)===W&&(ft=new ft(V,O+"enter",dt,d,q),ft.target=z,ft.relatedTarget=Oe,et=ft),Oe=et,ot&&dt)e:{for(ft=ot,V=dt,O=0,z=ft;z;z=qc(z))O++;for(z=0,et=V;et;et=qc(et))z++;for(;0<O-z;)ft=qc(ft),O--;for(;0<z-O;)V=qc(V),z--;for(;O--;){if(ft===V||V!==null&&ft===V.alternate)break e;ft=qc(ft),V=qc(V)}ft=null}else ft=null;ot!==null&&V1(J,Y,ot,ft,!1),dt!==null&&Oe!==null&&V1(J,Oe,dt,ft,!0)}}t:{if(Y=W?Qc(W):window,ot=Y.nodeName&&Y.nodeName.toLowerCase(),ot==="select"||ot==="input"&&Y.type==="file")var mt=HR;else if(w1(Y))if(x1)mt=XR;else{mt=$R;var bt=WR}else(ot=Y.nodeName)&&ot.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(mt=GR);if(mt&&(mt=mt(r,W))){b1(J,mt,d,q);break t}bt&&bt(r,Y,W),r==="focusout"&&(bt=Y._wrapperState)&&bt.controlled&&Y.type==="number"&&h0(Y,"number",Y.value)}switch(bt=W?Qc(W):window,r){case"focusin":(w1(bt)||bt.contentEditable==="true")&&(Xc=bt,V0=W,Fd=null);break;case"focusout":Fd=V0=Xc=null;break;case"mousedown":U0=!0;break;case"contextmenu":case"mouseup":case"dragend":U0=!1,k1(J,d,q);break;case"selectionchange":if(KR)break;case"keydown":case"keyup":k1(J,d,q)}var xt;if(F0)t:{switch(r){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Gc?y1(r,d)&&(Pt="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Pt="onCompositionStart");Pt&&(p1&&d.locale!=="ko"&&(Gc||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Gc&&(xt=c1()):(Po=q,M0="value"in Po?Po.value:Po.textContent,Gc=!0)),bt=bg(W,Pt),0<bt.length&&(Pt=new d1(Pt,r,null,d,q),J.push({event:Pt,listeners:bt}),xt?Pt.data=xt:(xt=v1(d),xt!==null&&(Pt.data=xt)))),(xt=BR?jR(r,d):VR(r,d))&&(W=bg(W,"onBeforeInput"),0<W.length&&(q=new d1("onBeforeInput","beforeinput",null,d,q),J.push({event:q,listeners:W}),q.data=xt))}B1(J,a)})}function jd(r,a,d){return{instance:r,listener:a,currentTarget:d}}function bg(r,a){for(var d=a+"Capture",m=[];r!==null;){var v=r,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=bd(r,d),x!=null&&m.unshift(jd(r,x,v)),x=bd(r,a),x!=null&&m.push(jd(r,x,v))),r=r.return}return m}function qc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function V1(r,a,d,m,v){for(var x=a._reactName,P=[];d!==null&&d!==m;){var L=d,N=L.alternate,W=L.stateNode;if(N!==null&&N===m)break;L.tag===5&&W!==null&&(L=W,v?(N=bd(d,x),N!=null&&P.unshift(jd(d,N,L))):v||(N=bd(d,x),N!=null&&P.push(jd(d,N,L)))),d=d.return}P.length!==0&&r.push({event:a,listeners:P})}var tL=/\r\n?/g,eL=/\u0000|\uFFFD/g;function U1(r){return(typeof r=="string"?r:""+r).replace(tL,`
`).replace(eL,"")}function xg(r,a,d){if(a=U1(a),U1(r)!==a&&d)throw Error(e(425))}function Sg(){}var X0=null,Y0=null;function q0(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var K0=typeof setTimeout=="function"?setTimeout:void 0,nL=typeof clearTimeout=="function"?clearTimeout:void 0,z1=typeof Promise=="function"?Promise:void 0,iL=typeof queueMicrotask=="function"?queueMicrotask:typeof z1<"u"?function(r){return z1.resolve(null).then(r).catch(sL)}:K0;function sL(r){setTimeout(function(){throw r})}function Q0(r,a){var d=a,m=0;do{var v=d.nextSibling;if(r.removeChild(d),v&&v.nodeType===8)if(d=v.data,d==="/$"){if(m===0){r.removeChild(v),kd(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=v}while(d);kd(a)}function Mo(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function H1(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return r;a--}else d==="/$"&&a++}r=r.previousSibling}return null}var Kc=Math.random().toString(36).slice(2),Bs="__reactFiber$"+Kc,Vd="__reactProps$"+Kc,wr="__reactContainer$"+Kc,J0="__reactEvents$"+Kc,rL="__reactListeners$"+Kc,oL="__reactHandles$"+Kc;function Ya(r){var a=r[Bs];if(a)return a;for(var d=r.parentNode;d;){if(a=d[wr]||d[Bs]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(r=H1(r);r!==null;){if(d=r[Bs])return d;r=H1(r)}return a}r=d,d=r.parentNode}return null}function Ud(r){return r=r[Bs]||r[wr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Qc(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(e(33))}function Ag(r){return r[Vd]||null}var Z0=[],Jc=-1;function Do(r){return{current:r}}function pe(r){0>Jc||(r.current=Z0[Jc],Z0[Jc]=null,Jc--)}function ce(r,a){Jc++,Z0[Jc]=r.current,r.current=a}var Ro={},Cn=Do(Ro),qn=Do(!1),qa=Ro;function Zc(r,a){var d=r.type.contextTypes;if(!d)return Ro;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in d)v[x]=a[x];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=v),v}function Kn(r){return r=r.childContextTypes,r!=null}function Eg(){pe(qn),pe(Cn)}function W1(r,a,d){if(Cn.current!==Ro)throw Error(e(168));ce(Cn,a),ce(qn,d)}function $1(r,a,d){var m=r.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var v in m)if(!(v in a))throw Error(e(108,_t(r)||"Unknown",v));return nt({},d,m)}function Cg(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ro,qa=Cn.current,ce(Cn,r),ce(qn,qn.current),!0}function G1(r,a,d){var m=r.stateNode;if(!m)throw Error(e(169));d?(r=$1(r,a,qa),m.__reactInternalMemoizedMergedChildContext=r,pe(qn),pe(Cn),ce(Cn,r)):pe(qn),ce(qn,d)}var br=null,Tg=!1,tw=!1;function X1(r){br===null?br=[r]:br.push(r)}function aL(r){Tg=!0,X1(r)}function Lo(){if(!tw&&br!==null){tw=!0;var r=0,a=Yt;try{var d=br;for(Yt=1;r<d.length;r++){var m=d[r];do m=m(!0);while(m!==null)}br=null,Tg=!1}catch(v){throw br!==null&&(br=br.slice(r+1)),qA(S0,Lo),v}finally{Yt=a,tw=!1}}return null}var tu=[],eu=0,_g=null,Pg=0,Ui=[],zi=0,Ka=null,xr=1,Sr="";function Qa(r,a){tu[eu++]=Pg,tu[eu++]=_g,_g=r,Pg=a}function Y1(r,a,d){Ui[zi++]=xr,Ui[zi++]=Sr,Ui[zi++]=Ka,Ka=r;var m=xr;r=Sr;var v=32-fs(m)-1;m&=~(1<<v),d+=1;var x=32-fs(a)+v;if(30<x){var P=v-v%5;x=(m&(1<<P)-1).toString(32),m>>=P,v-=P,xr=1<<32-fs(a)+v|d<<v|m,Sr=x+r}else xr=1<<x|d<<v|m,Sr=r}function ew(r){r.return!==null&&(Qa(r,1),Y1(r,1,0))}function nw(r){for(;r===_g;)_g=tu[--eu],tu[eu]=null,Pg=tu[--eu],tu[eu]=null;for(;r===Ka;)Ka=Ui[--zi],Ui[zi]=null,Sr=Ui[--zi],Ui[zi]=null,xr=Ui[--zi],Ui[zi]=null}var hi=null,di=null,ye=!1,ms=null;function q1(r,a){var d=Gi(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=r,a=r.deletions,a===null?(r.deletions=[d],r.flags|=16):a.push(d)}function K1(r,a){switch(r.tag){case 5:var d=r.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,hi=r,di=Mo(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,hi=r,di=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Ka!==null?{id:xr,overflow:Sr}:null,r.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Gi(18,null,null,0),d.stateNode=a,d.return=r,r.child=d,hi=r,di=null,!0):!1;default:return!1}}function iw(r){return(r.mode&1)!==0&&(r.flags&128)===0}function sw(r){if(ye){var a=di;if(a){var d=a;if(!K1(r,a)){if(iw(r))throw Error(e(418));a=Mo(d.nextSibling);var m=hi;a&&K1(r,a)?q1(m,d):(r.flags=r.flags&-4097|2,ye=!1,hi=r)}}else{if(iw(r))throw Error(e(418));r.flags=r.flags&-4097|2,ye=!1,hi=r}}}function Q1(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;hi=r}function kg(r){if(r!==hi)return!1;if(!ye)return Q1(r),ye=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!q0(r.type,r.memoizedProps)),a&&(a=di)){if(iw(r))throw J1(),Error(e(418));for(;a;)q1(r,a),a=Mo(a.nextSibling)}if(Q1(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(e(317));t:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(a===0){di=Mo(r.nextSibling);break t}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}r=r.nextSibling}di=null}}else di=hi?Mo(r.stateNode.nextSibling):null;return!0}function J1(){for(var r=di;r;)r=Mo(r.nextSibling)}function nu(){di=hi=null,ye=!1}function rw(r){ms===null?ms=[r]:ms.push(r)}var lL=D.ReactCurrentBatchConfig;function zd(r,a,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(e(309));var m=d.stateNode}if(!m)throw Error(e(147,r));var v=m,x=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(P){var L=v.refs;P===null?delete L[x]:L[x]=P},a._stringRef=x,a)}if(typeof r!="string")throw Error(e(284));if(!d._owner)throw Error(e(290,r))}return r}function Mg(r,a){throw r=Object.prototype.toString.call(a),Error(e(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function Z1(r){var a=r._init;return a(r._payload)}function tE(r){function a(V,O){if(r){var z=V.deletions;z===null?(V.deletions=[O],V.flags|=16):z.push(O)}}function d(V,O){if(!r)return null;for(;O!==null;)a(V,O),O=O.sibling;return null}function m(V,O){for(V=new Map;O!==null;)O.key!==null?V.set(O.key,O):V.set(O.index,O),O=O.sibling;return V}function v(V,O){return V=Uo(V,O),V.index=0,V.sibling=null,V}function x(V,O,z){return V.index=z,r?(z=V.alternate,z!==null?(z=z.index,z<O?(V.flags|=2,O):z):(V.flags|=2,O)):(V.flags|=1048576,O)}function P(V){return r&&V.alternate===null&&(V.flags|=2),V}function L(V,O,z,et){return O===null||O.tag!==6?(O=Kw(z,V.mode,et),O.return=V,O):(O=v(O,z),O.return=V,O)}function N(V,O,z,et){var mt=z.type;return mt===j?q(V,O,z.props.children,et,z.key):O!==null&&(O.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===rt&&Z1(mt)===O.type)?(et=v(O,z.props),et.ref=zd(V,O,z),et.return=V,et):(et=ty(z.type,z.key,z.props,null,V.mode,et),et.ref=zd(V,O,z),et.return=V,et)}function W(V,O,z,et){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=Qw(z,V.mode,et),O.return=V,O):(O=v(O,z.children||[]),O.return=V,O)}function q(V,O,z,et,mt){return O===null||O.tag!==7?(O=rl(z,V.mode,et,mt),O.return=V,O):(O=v(O,z),O.return=V,O)}function J(V,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Kw(""+O,V.mode,z),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case R:return z=ty(O.type,O.key,O.props,null,V.mode,z),z.ref=zd(V,null,O),z.return=V,z;case I:return O=Qw(O,V.mode,z),O.return=V,O;case rt:var et=O._init;return J(V,et(O._payload),z)}if(yd(O)||at(O))return O=rl(O,V.mode,z,null),O.return=V,O;Mg(V,O)}return null}function Y(V,O,z,et){var mt=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return mt!==null?null:L(V,O,""+z,et);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return z.key===mt?N(V,O,z,et):null;case I:return z.key===mt?W(V,O,z,et):null;case rt:return mt=z._init,Y(V,O,mt(z._payload),et)}if(yd(z)||at(z))return mt!==null?null:q(V,O,z,et,null);Mg(V,z)}return null}function ot(V,O,z,et,mt){if(typeof et=="string"&&et!==""||typeof et=="number")return V=V.get(z)||null,L(O,V,""+et,mt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case R:return V=V.get(et.key===null?z:et.key)||null,N(O,V,et,mt);case I:return V=V.get(et.key===null?z:et.key)||null,W(O,V,et,mt);case rt:var bt=et._init;return ot(V,O,z,bt(et._payload),mt)}if(yd(et)||at(et))return V=V.get(z)||null,q(O,V,et,mt,null);Mg(O,et)}return null}function dt(V,O,z,et){for(var mt=null,bt=null,xt=O,Pt=O=0,rn=null;xt!==null&&Pt<z.length;Pt++){xt.index>Pt?(rn=xt,xt=null):rn=xt.sibling;var $t=Y(V,xt,z[Pt],et);if($t===null){xt===null&&(xt=rn);break}r&&xt&&$t.alternate===null&&a(V,xt),O=x($t,O,Pt),bt===null?mt=$t:bt.sibling=$t,bt=$t,xt=rn}if(Pt===z.length)return d(V,xt),ye&&Qa(V,Pt),mt;if(xt===null){for(;Pt<z.length;Pt++)xt=J(V,z[Pt],et),xt!==null&&(O=x(xt,O,Pt),bt===null?mt=xt:bt.sibling=xt,bt=xt);return ye&&Qa(V,Pt),mt}for(xt=m(V,xt);Pt<z.length;Pt++)rn=ot(xt,V,Pt,z[Pt],et),rn!==null&&(r&&rn.alternate!==null&&xt.delete(rn.key===null?Pt:rn.key),O=x(rn,O,Pt),bt===null?mt=rn:bt.sibling=rn,bt=rn);return r&&xt.forEach(function(zo){return a(V,zo)}),ye&&Qa(V,Pt),mt}function ft(V,O,z,et){var mt=at(z);if(typeof mt!="function")throw Error(e(150));if(z=mt.call(z),z==null)throw Error(e(151));for(var bt=mt=null,xt=O,Pt=O=0,rn=null,$t=z.next();xt!==null&&!$t.done;Pt++,$t=z.next()){xt.index>Pt?(rn=xt,xt=null):rn=xt.sibling;var zo=Y(V,xt,$t.value,et);if(zo===null){xt===null&&(xt=rn);break}r&&xt&&zo.alternate===null&&a(V,xt),O=x(zo,O,Pt),bt===null?mt=zo:bt.sibling=zo,bt=zo,xt=rn}if($t.done)return d(V,xt),ye&&Qa(V,Pt),mt;if(xt===null){for(;!$t.done;Pt++,$t=z.next())$t=J(V,$t.value,et),$t!==null&&(O=x($t,O,Pt),bt===null?mt=$t:bt.sibling=$t,bt=$t);return ye&&Qa(V,Pt),mt}for(xt=m(V,xt);!$t.done;Pt++,$t=z.next())$t=ot(xt,V,Pt,$t.value,et),$t!==null&&(r&&$t.alternate!==null&&xt.delete($t.key===null?Pt:$t.key),O=x($t,O,Pt),bt===null?mt=$t:bt.sibling=$t,bt=$t);return r&&xt.forEach(function(UL){return a(V,UL)}),ye&&Qa(V,Pt),mt}function Oe(V,O,z,et){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case R:t:{for(var mt=z.key,bt=O;bt!==null;){if(bt.key===mt){if(mt=z.type,mt===j){if(bt.tag===7){d(V,bt.sibling),O=v(bt,z.props.children),O.return=V,V=O;break t}}else if(bt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===rt&&Z1(mt)===bt.type){d(V,bt.sibling),O=v(bt,z.props),O.ref=zd(V,bt,z),O.return=V,V=O;break t}d(V,bt);break}else a(V,bt);bt=bt.sibling}z.type===j?(O=rl(z.props.children,V.mode,et,z.key),O.return=V,V=O):(et=ty(z.type,z.key,z.props,null,V.mode,et),et.ref=zd(V,O,z),et.return=V,V=et)}return P(V);case I:t:{for(bt=z.key;O!==null;){if(O.key===bt)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){d(V,O.sibling),O=v(O,z.children||[]),O.return=V,V=O;break t}else{d(V,O);break}else a(V,O);O=O.sibling}O=Qw(z,V.mode,et),O.return=V,V=O}return P(V);case rt:return bt=z._init,Oe(V,O,bt(z._payload),et)}if(yd(z))return dt(V,O,z,et);if(at(z))return ft(V,O,z,et);Mg(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(d(V,O.sibling),O=v(O,z),O.return=V,V=O):(d(V,O),O=Kw(z,V.mode,et),O.return=V,V=O),P(V)):d(V,O)}return Oe}var iu=tE(!0),eE=tE(!1),Dg=Do(null),Rg=null,su=null,ow=null;function aw(){ow=su=Rg=null}function lw(r){var a=Dg.current;pe(Dg),r._currentValue=a}function cw(r,a,d){for(;r!==null;){var m=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),r===d)break;r=r.return}}function ru(r,a){Rg=r,ow=su=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(Qn=!0),r.firstContext=null)}function Hi(r){var a=r._currentValue;if(ow!==r)if(r={context:r,memoizedValue:a,next:null},su===null){if(Rg===null)throw Error(e(308));su=r,Rg.dependencies={lanes:0,firstContext:r}}else su=su.next=r;return a}var Ja=null;function uw(r){Ja===null?Ja=[r]:Ja.push(r)}function nE(r,a,d,m){var v=a.interleaved;return v===null?(d.next=d,uw(a)):(d.next=v.next,v.next=d),a.interleaved=d,Ar(r,m)}function Ar(r,a){r.lanes|=a;var d=r.alternate;for(d!==null&&(d.lanes|=a),d=r,r=r.return;r!==null;)r.childLanes|=a,d=r.alternate,d!==null&&(d.childLanes|=a),d=r,r=r.return;return d.tag===3?d.stateNode:null}var Io=!1;function hw(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iE(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Er(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function No(r,a,d){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(zt&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,Ar(r,d)}return v=m.interleaved,v===null?(a.next=a,uw(m)):(a.next=v.next,v.next=a),m.interleaved=a,Ar(r,d)}function Lg(r,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=r.pendingLanes,d|=m,a.lanes=d,C0(r,d)}}function sE(r,a){var d=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var P={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};x===null?v=x=P:x=x.next=P,d=d.next}while(d!==null);x===null?v=x=a:x=x.next=a}else v=x=a;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:m.shared,effects:m.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=a:r.next=a,d.lastBaseUpdate=a}function Ig(r,a,d,m){var v=r.updateQueue;Io=!1;var x=v.firstBaseUpdate,P=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var N=L,W=N.next;N.next=null,P===null?x=W:P.next=W,P=N;var q=r.alternate;q!==null&&(q=q.updateQueue,L=q.lastBaseUpdate,L!==P&&(L===null?q.firstBaseUpdate=W:L.next=W,q.lastBaseUpdate=N))}if(x!==null){var J=v.baseState;P=0,q=W=N=null,L=x;do{var Y=L.lane,ot=L.eventTime;if((m&Y)===Y){q!==null&&(q=q.next={eventTime:ot,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});t:{var dt=r,ft=L;switch(Y=a,ot=d,ft.tag){case 1:if(dt=ft.payload,typeof dt=="function"){J=dt.call(ot,J,Y);break t}J=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ft.payload,Y=typeof dt=="function"?dt.call(ot,J,Y):dt,Y==null)break t;J=nt({},J,Y);break t;case 2:Io=!0}}L.callback!==null&&L.lane!==0&&(r.flags|=64,Y=v.effects,Y===null?v.effects=[L]:Y.push(L))}else ot={eventTime:ot,lane:Y,tag:L.tag,payload:L.payload,callback:L.callback,next:null},q===null?(W=q=ot,N=J):q=q.next=ot,P|=Y;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;Y=L,L=Y.next,Y.next=null,v.lastBaseUpdate=Y,v.shared.pending=null}}while(!0);if(q===null&&(N=J),v.baseState=N,v.firstBaseUpdate=W,v.lastBaseUpdate=q,a=v.shared.interleaved,a!==null){v=a;do P|=v.lane,v=v.next;while(v!==a)}else x===null&&(v.shared.lanes=0);el|=P,r.lanes=P,r.memoizedState=J}}function rE(r,a,d){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var m=r[a],v=m.callback;if(v!==null){if(m.callback=null,m=d,typeof v!="function")throw Error(e(191,v));v.call(m)}}}var Hd={},js=Do(Hd),Wd=Do(Hd),$d=Do(Hd);function Za(r){if(r===Hd)throw Error(e(174));return r}function dw(r,a){switch(ce($d,a),ce(Wd,r),ce(js,Hd),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:f0(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=f0(a,r)}pe(js),ce(js,a)}function ou(){pe(js),pe(Wd),pe($d)}function oE(r){Za($d.current);var a=Za(js.current),d=f0(a,r.type);a!==d&&(ce(Wd,r),ce(js,d))}function fw(r){Wd.current===r&&(pe(js),pe(Wd))}var xe=Do(0);function Ng(r){for(var a=r;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var pw=[];function mw(){for(var r=0;r<pw.length;r++)pw[r]._workInProgressVersionPrimary=null;pw.length=0}var Fg=D.ReactCurrentDispatcher,gw=D.ReactCurrentBatchConfig,tl=0,Se=null,Xe=null,nn=null,Og=!1,Gd=!1,Xd=0,cL=0;function Tn(){throw Error(e(321))}function yw(r,a){if(a===null)return!1;for(var d=0;d<a.length&&d<r.length;d++)if(!ps(r[d],a[d]))return!1;return!0}function vw(r,a,d,m,v,x){if(tl=x,Se=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Fg.current=r===null||r.memoizedState===null?fL:pL,r=d(m,v),Gd){x=0;do{if(Gd=!1,Xd=0,25<=x)throw Error(e(301));x+=1,nn=Xe=null,a.updateQueue=null,Fg.current=mL,r=d(m,v)}while(Gd)}if(Fg.current=Vg,a=Xe!==null&&Xe.next!==null,tl=0,nn=Xe=Se=null,Og=!1,a)throw Error(e(300));return r}function ww(){var r=Xd!==0;return Xd=0,r}function Vs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Se.memoizedState=nn=r:nn=nn.next=r,nn}function Wi(){if(Xe===null){var r=Se.alternate;r=r!==null?r.memoizedState:null}else r=Xe.next;var a=nn===null?Se.memoizedState:nn.next;if(a!==null)nn=a,Xe=r;else{if(r===null)throw Error(e(310));Xe=r,r={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},nn===null?Se.memoizedState=nn=r:nn=nn.next=r}return nn}function Yd(r,a){return typeof a=="function"?a(r):a}function bw(r){var a=Wi(),d=a.queue;if(d===null)throw Error(e(311));d.lastRenderedReducer=r;var m=Xe,v=m.baseQueue,x=d.pending;if(x!==null){if(v!==null){var P=v.next;v.next=x.next,x.next=P}m.baseQueue=v=x,d.pending=null}if(v!==null){x=v.next,m=m.baseState;var L=P=null,N=null,W=x;do{var q=W.lane;if((tl&q)===q)N!==null&&(N=N.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),m=W.hasEagerState?W.eagerState:r(m,W.action);else{var J={lane:q,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};N===null?(L=N=J,P=m):N=N.next=J,Se.lanes|=q,el|=q}W=W.next}while(W!==null&&W!==x);N===null?P=m:N.next=L,ps(m,a.memoizedState)||(Qn=!0),a.memoizedState=m,a.baseState=P,a.baseQueue=N,d.lastRenderedState=m}if(r=d.interleaved,r!==null){v=r;do x=v.lane,Se.lanes|=x,el|=x,v=v.next;while(v!==r)}else v===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function xw(r){var a=Wi(),d=a.queue;if(d===null)throw Error(e(311));d.lastRenderedReducer=r;var m=d.dispatch,v=d.pending,x=a.memoizedState;if(v!==null){d.pending=null;var P=v=v.next;do x=r(x,P.action),P=P.next;while(P!==v);ps(x,a.memoizedState)||(Qn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),d.lastRenderedState=x}return[x,m]}function aE(){}function lE(r,a){var d=Se,m=Wi(),v=a(),x=!ps(m.memoizedState,v);if(x&&(m.memoizedState=v,Qn=!0),m=m.queue,Sw(hE.bind(null,d,m,r),[r]),m.getSnapshot!==a||x||nn!==null&&nn.memoizedState.tag&1){if(d.flags|=2048,qd(9,uE.bind(null,d,m,v,a),void 0,null),sn===null)throw Error(e(349));(tl&30)!==0||cE(d,a,v)}return v}function cE(r,a,d){r.flags|=16384,r={getSnapshot:a,value:d},a=Se.updateQueue,a===null?(a={lastEffect:null,stores:null},Se.updateQueue=a,a.stores=[r]):(d=a.stores,d===null?a.stores=[r]:d.push(r))}function uE(r,a,d,m){a.value=d,a.getSnapshot=m,dE(a)&&fE(r)}function hE(r,a,d){return d(function(){dE(a)&&fE(r)})}function dE(r){var a=r.getSnapshot;r=r.value;try{var d=a();return!ps(r,d)}catch{return!0}}function fE(r){var a=Ar(r,1);a!==null&&ws(a,r,1,-1)}function pE(r){var a=Vs();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:r},a.queue=r,r=r.dispatch=dL.bind(null,Se,r),[a.memoizedState,r]}function qd(r,a,d,m){return r={tag:r,create:a,destroy:d,deps:m,next:null},a=Se.updateQueue,a===null?(a={lastEffect:null,stores:null},Se.updateQueue=a,a.lastEffect=r.next=r):(d=a.lastEffect,d===null?a.lastEffect=r.next=r:(m=d.next,d.next=r,r.next=m,a.lastEffect=r)),r}function mE(){return Wi().memoizedState}function Bg(r,a,d,m){var v=Vs();Se.flags|=r,v.memoizedState=qd(1|a,d,void 0,m===void 0?null:m)}function jg(r,a,d,m){var v=Wi();m=m===void 0?null:m;var x=void 0;if(Xe!==null){var P=Xe.memoizedState;if(x=P.destroy,m!==null&&yw(m,P.deps)){v.memoizedState=qd(a,d,x,m);return}}Se.flags|=r,v.memoizedState=qd(1|a,d,x,m)}function gE(r,a){return Bg(8390656,8,r,a)}function Sw(r,a){return jg(2048,8,r,a)}function yE(r,a){return jg(4,2,r,a)}function vE(r,a){return jg(4,4,r,a)}function wE(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function bE(r,a,d){return d=d!=null?d.concat([r]):null,jg(4,4,wE.bind(null,a,r),d)}function Aw(){}function xE(r,a){var d=Wi();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&yw(a,m[1])?m[0]:(d.memoizedState=[r,a],r)}function SE(r,a){var d=Wi();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&yw(a,m[1])?m[0]:(r=r(),d.memoizedState=[r,a],r)}function AE(r,a,d){return(tl&21)===0?(r.baseState&&(r.baseState=!1,Qn=!0),r.memoizedState=d):(ps(d,a)||(d=ZA(),Se.lanes|=d,el|=d,r.baseState=!0),a)}function uL(r,a){var d=Yt;Yt=d!==0&&4>d?d:4,r(!0);var m=gw.transition;gw.transition={};try{r(!1),a()}finally{Yt=d,gw.transition=m}}function EE(){return Wi().memoizedState}function hL(r,a,d){var m=jo(r);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},CE(r))TE(a,d);else if(d=nE(r,a,d,m),d!==null){var v=jn();ws(d,r,m,v),_E(d,a,m)}}function dL(r,a,d){var m=jo(r),v={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(CE(r))TE(a,v);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var P=a.lastRenderedState,L=x(P,d);if(v.hasEagerState=!0,v.eagerState=L,ps(L,P)){var N=a.interleaved;N===null?(v.next=v,uw(a)):(v.next=N.next,N.next=v),a.interleaved=v;return}}catch{}finally{}d=nE(r,a,v,m),d!==null&&(v=jn(),ws(d,r,m,v),_E(d,a,m))}}function CE(r){var a=r.alternate;return r===Se||a!==null&&a===Se}function TE(r,a){Gd=Og=!0;var d=r.pending;d===null?a.next=a:(a.next=d.next,d.next=a),r.pending=a}function _E(r,a,d){if((d&4194240)!==0){var m=a.lanes;m&=r.pendingLanes,d|=m,a.lanes=d,C0(r,d)}}var Vg={readContext:Hi,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},fL={readContext:Hi,useCallback:function(r,a){return Vs().memoizedState=[r,a===void 0?null:a],r},useContext:Hi,useEffect:gE,useImperativeHandle:function(r,a,d){return d=d!=null?d.concat([r]):null,Bg(4194308,4,wE.bind(null,a,r),d)},useLayoutEffect:function(r,a){return Bg(4194308,4,r,a)},useInsertionEffect:function(r,a){return Bg(4,2,r,a)},useMemo:function(r,a){var d=Vs();return a=a===void 0?null:a,r=r(),d.memoizedState=[r,a],r},useReducer:function(r,a,d){var m=Vs();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},m.queue=r,r=r.dispatch=hL.bind(null,Se,r),[m.memoizedState,r]},useRef:function(r){var a=Vs();return r={current:r},a.memoizedState=r},useState:pE,useDebugValue:Aw,useDeferredValue:function(r){return Vs().memoizedState=r},useTransition:function(){var r=pE(!1),a=r[0];return r=uL.bind(null,r[1]),Vs().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,d){var m=Se,v=Vs();if(ye){if(d===void 0)throw Error(e(407));d=d()}else{if(d=a(),sn===null)throw Error(e(349));(tl&30)!==0||cE(m,a,d)}v.memoizedState=d;var x={value:d,getSnapshot:a};return v.queue=x,gE(hE.bind(null,m,x,r),[r]),m.flags|=2048,qd(9,uE.bind(null,m,x,d,a),void 0,null),d},useId:function(){var r=Vs(),a=sn.identifierPrefix;if(ye){var d=Sr,m=xr;d=(m&~(1<<32-fs(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Xd++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=cL++,a=":"+a+"r"+d.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},pL={readContext:Hi,useCallback:xE,useContext:Hi,useEffect:Sw,useImperativeHandle:bE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:SE,useReducer:bw,useRef:mE,useState:function(){return bw(Yd)},useDebugValue:Aw,useDeferredValue:function(r){var a=Wi();return AE(a,Xe.memoizedState,r)},useTransition:function(){var r=bw(Yd)[0],a=Wi().memoizedState;return[r,a]},useMutableSource:aE,useSyncExternalStore:lE,useId:EE,unstable_isNewReconciler:!1},mL={readContext:Hi,useCallback:xE,useContext:Hi,useEffect:Sw,useImperativeHandle:bE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:SE,useReducer:xw,useRef:mE,useState:function(){return xw(Yd)},useDebugValue:Aw,useDeferredValue:function(r){var a=Wi();return Xe===null?a.memoizedState=r:AE(a,Xe.memoizedState,r)},useTransition:function(){var r=xw(Yd)[0],a=Wi().memoizedState;return[r,a]},useMutableSource:aE,useSyncExternalStore:lE,useId:EE,unstable_isNewReconciler:!1};function gs(r,a){if(r&&r.defaultProps){a=nt({},a),r=r.defaultProps;for(var d in r)a[d]===void 0&&(a[d]=r[d]);return a}return a}function Ew(r,a,d,m){a=r.memoizedState,d=d(m,a),d=d==null?a:nt({},a,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var Ug={isMounted:function(r){return(r=r._reactInternals)?Xa(r)===r:!1},enqueueSetState:function(r,a,d){r=r._reactInternals;var m=jn(),v=jo(r),x=Er(m,v);x.payload=a,d!=null&&(x.callback=d),a=No(r,x,v),a!==null&&(ws(a,r,v,m),Lg(a,r,v))},enqueueReplaceState:function(r,a,d){r=r._reactInternals;var m=jn(),v=jo(r),x=Er(m,v);x.tag=1,x.payload=a,d!=null&&(x.callback=d),a=No(r,x,v),a!==null&&(ws(a,r,v,m),Lg(a,r,v))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var d=jn(),m=jo(r),v=Er(d,m);v.tag=2,a!=null&&(v.callback=a),a=No(r,v,m),a!==null&&(ws(a,r,m,d),Lg(a,r,m))}};function PE(r,a,d,m,v,x,P){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,x,P):a.prototype&&a.prototype.isPureReactComponent?!Nd(d,m)||!Nd(v,x):!0}function kE(r,a,d){var m=!1,v=Ro,x=a.contextType;return typeof x=="object"&&x!==null?x=Hi(x):(v=Kn(a)?qa:Cn.current,m=a.contextTypes,x=(m=m!=null)?Zc(r,v):Ro),a=new a(d,x),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ug,r.stateNode=a,a._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=x),a}function ME(r,a,d,m){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==r&&Ug.enqueueReplaceState(a,a.state,null)}function Cw(r,a,d,m){var v=r.stateNode;v.props=d,v.state=r.memoizedState,v.refs={},hw(r);var x=a.contextType;typeof x=="object"&&x!==null?v.context=Hi(x):(x=Kn(a)?qa:Cn.current,v.context=Zc(r,x)),v.state=r.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Ew(r,a,x,d),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&Ug.enqueueReplaceState(v,v.state,null),Ig(r,d,v,m),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function au(r,a){try{var d="",m=a;do d+=yt(m),m=m.return;while(m);var v=d}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:r,source:a,stack:v,digest:null}}function Tw(r,a,d){return{value:r,source:null,stack:d??null,digest:a??null}}function _w(r,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var gL=typeof WeakMap=="function"?WeakMap:Map;function DE(r,a,d){d=Er(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){Yg||(Yg=!0,zw=m),_w(r,a)},d}function RE(r,a,d){d=Er(-1,d),d.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var v=a.value;d.payload=function(){return m(v)},d.callback=function(){_w(r,a)}}var x=r.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(d.callback=function(){_w(r,a),typeof m!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var P=a.stack;this.componentDidCatch(a.value,{componentStack:P!==null?P:""})}),d}function LE(r,a,d){var m=r.pingCache;if(m===null){m=r.pingCache=new gL;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(d)||(v.add(d),r=ML.bind(null,r,a,d),a.then(r,r))}function IE(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function NE(r,a,d,m,v){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Er(-1,1),a.tag=2,No(d,a,1))),d.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var yL=D.ReactCurrentOwner,Qn=!1;function Bn(r,a,d,m){a.child=r===null?eE(a,null,d,m):iu(a,r.child,d,m)}function FE(r,a,d,m,v){d=d.render;var x=a.ref;return ru(a,v),m=vw(r,a,d,m,x,v),d=ww(),r!==null&&!Qn?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~v,Cr(r,a,v)):(ye&&d&&ew(a),a.flags|=1,Bn(r,a,m,v),a.child)}function OE(r,a,d,m,v){if(r===null){var x=d.type;return typeof x=="function"&&!qw(x)&&x.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=x,BE(r,a,x,m,v)):(r=ty(d.type,null,m,a,a.mode,v),r.ref=a.ref,r.return=a,a.child=r)}if(x=r.child,(r.lanes&v)===0){var P=x.memoizedProps;if(d=d.compare,d=d!==null?d:Nd,d(P,m)&&r.ref===a.ref)return Cr(r,a,v)}return a.flags|=1,r=Uo(x,m),r.ref=a.ref,r.return=a,a.child=r}function BE(r,a,d,m,v){if(r!==null){var x=r.memoizedProps;if(Nd(x,m)&&r.ref===a.ref)if(Qn=!1,a.pendingProps=m=x,(r.lanes&v)!==0)(r.flags&131072)!==0&&(Qn=!0);else return a.lanes=r.lanes,Cr(r,a,v)}return Pw(r,a,d,m,v)}function jE(r,a,d){var m=a.pendingProps,v=m.children,x=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(cu,fi),fi|=d;else{if((d&1073741824)===0)return r=x!==null?x.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,ce(cu,fi),fi|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=x!==null?x.baseLanes:d,ce(cu,fi),fi|=m}else x!==null?(m=x.baseLanes|d,a.memoizedState=null):m=d,ce(cu,fi),fi|=m;return Bn(r,a,v,d),a.child}function VE(r,a){var d=a.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Pw(r,a,d,m,v){var x=Kn(d)?qa:Cn.current;return x=Zc(a,x),ru(a,v),d=vw(r,a,d,m,x,v),m=ww(),r!==null&&!Qn?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~v,Cr(r,a,v)):(ye&&m&&ew(a),a.flags|=1,Bn(r,a,d,v),a.child)}function UE(r,a,d,m,v){if(Kn(d)){var x=!0;Cg(a)}else x=!1;if(ru(a,v),a.stateNode===null)Hg(r,a),kE(a,d,m),Cw(a,d,m,v),m=!0;else if(r===null){var P=a.stateNode,L=a.memoizedProps;P.props=L;var N=P.context,W=d.contextType;typeof W=="object"&&W!==null?W=Hi(W):(W=Kn(d)?qa:Cn.current,W=Zc(a,W));var q=d.getDerivedStateFromProps,J=typeof q=="function"||typeof P.getSnapshotBeforeUpdate=="function";J||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==m||N!==W)&&ME(a,P,m,W),Io=!1;var Y=a.memoizedState;P.state=Y,Ig(a,m,P,v),N=a.memoizedState,L!==m||Y!==N||qn.current||Io?(typeof q=="function"&&(Ew(a,d,q,m),N=a.memoizedState),(L=Io||PE(a,d,L,m,Y,N,W))?(J||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(a.flags|=4194308)):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=N),P.props=m,P.state=N,P.context=W,m=L):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{P=a.stateNode,iE(r,a),L=a.memoizedProps,W=a.type===a.elementType?L:gs(a.type,L),P.props=W,J=a.pendingProps,Y=P.context,N=d.contextType,typeof N=="object"&&N!==null?N=Hi(N):(N=Kn(d)?qa:Cn.current,N=Zc(a,N));var ot=d.getDerivedStateFromProps;(q=typeof ot=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==J||Y!==N)&&ME(a,P,m,N),Io=!1,Y=a.memoizedState,P.state=Y,Ig(a,m,P,v);var dt=a.memoizedState;L!==J||Y!==dt||qn.current||Io?(typeof ot=="function"&&(Ew(a,d,ot,m),dt=a.memoizedState),(W=Io||PE(a,d,W,m,Y,dt,N)||!1)?(q||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,dt,N),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,dt,N)),typeof P.componentDidUpdate=="function"&&(a.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof P.componentDidUpdate!="function"||L===r.memoizedProps&&Y===r.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&Y===r.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=dt),P.props=m,P.state=dt,P.context=N,m=W):(typeof P.componentDidUpdate!="function"||L===r.memoizedProps&&Y===r.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&Y===r.memoizedState||(a.flags|=1024),m=!1)}return kw(r,a,d,m,x,v)}function kw(r,a,d,m,v,x){VE(r,a);var P=(a.flags&128)!==0;if(!m&&!P)return v&&G1(a,d,!1),Cr(r,a,x);m=a.stateNode,yL.current=a;var L=P&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,r!==null&&P?(a.child=iu(a,r.child,null,x),a.child=iu(a,null,L,x)):Bn(r,a,L,x),a.memoizedState=m.state,v&&G1(a,d,!0),a.child}function zE(r){var a=r.stateNode;a.pendingContext?W1(r,a.pendingContext,a.pendingContext!==a.context):a.context&&W1(r,a.context,!1),dw(r,a.containerInfo)}function HE(r,a,d,m,v){return nu(),rw(v),a.flags|=256,Bn(r,a,d,m),a.child}var Mw={dehydrated:null,treeContext:null,retryLane:0};function Dw(r){return{baseLanes:r,cachePool:null,transitions:null}}function WE(r,a,d){var m=a.pendingProps,v=xe.current,x=!1,P=(a.flags&128)!==0,L;if((L=P)||(L=r!==null&&r.memoizedState===null?!1:(v&2)!==0),L?(x=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),ce(xe,v&1),r===null)return sw(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(P=m.children,r=m.fallback,x?(m=a.mode,x=a.child,P={mode:"hidden",children:P},(m&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=P):x=ey(P,m,0,null),r=rl(r,m,d,null),x.return=a,r.return=a,x.sibling=r,a.child=x,a.child.memoizedState=Dw(d),a.memoizedState=Mw,r):Rw(a,P));if(v=r.memoizedState,v!==null&&(L=v.dehydrated,L!==null))return vL(r,a,P,m,L,v,d);if(x){x=m.fallback,P=a.mode,v=r.child,L=v.sibling;var N={mode:"hidden",children:m.children};return(P&1)===0&&a.child!==v?(m=a.child,m.childLanes=0,m.pendingProps=N,a.deletions=null):(m=Uo(v,N),m.subtreeFlags=v.subtreeFlags&14680064),L!==null?x=Uo(L,x):(x=rl(x,P,d,null),x.flags|=2),x.return=a,m.return=a,m.sibling=x,a.child=m,m=x,x=a.child,P=r.child.memoizedState,P=P===null?Dw(d):{baseLanes:P.baseLanes|d,cachePool:null,transitions:P.transitions},x.memoizedState=P,x.childLanes=r.childLanes&~d,a.memoizedState=Mw,m}return x=r.child,r=x.sibling,m=Uo(x,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,r!==null&&(d=a.deletions,d===null?(a.deletions=[r],a.flags|=16):d.push(r)),a.child=m,a.memoizedState=null,m}function Rw(r,a){return a=ey({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function zg(r,a,d,m){return m!==null&&rw(m),iu(a,r.child,null,d),r=Rw(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function vL(r,a,d,m,v,x,P){if(d)return a.flags&256?(a.flags&=-257,m=Tw(Error(e(422))),zg(r,a,P,m)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(x=m.fallback,v=a.mode,m=ey({mode:"visible",children:m.children},v,0,null),x=rl(x,v,P,null),x.flags|=2,m.return=a,x.return=a,m.sibling=x,a.child=m,(a.mode&1)!==0&&iu(a,r.child,null,P),a.child.memoizedState=Dw(P),a.memoizedState=Mw,x);if((a.mode&1)===0)return zg(r,a,P,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var L=m.dgst;return m=L,x=Error(e(419)),m=Tw(x,m,void 0),zg(r,a,P,m)}if(L=(P&r.childLanes)!==0,Qn||L){if(m=sn,m!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|P))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,Ar(r,v),ws(m,r,v,-1))}return Yw(),m=Tw(Error(e(421))),zg(r,a,P,m)}return v.data==="$?"?(a.flags|=128,a.child=r.child,a=DL.bind(null,r),v._reactRetry=a,null):(r=x.treeContext,di=Mo(v.nextSibling),hi=a,ye=!0,ms=null,r!==null&&(Ui[zi++]=xr,Ui[zi++]=Sr,Ui[zi++]=Ka,xr=r.id,Sr=r.overflow,Ka=a),a=Rw(a,m.children),a.flags|=4096,a)}function $E(r,a,d){r.lanes|=a;var m=r.alternate;m!==null&&(m.lanes|=a),cw(r.return,a,d)}function Lw(r,a,d,m,v){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=d,x.tailMode=v)}function GE(r,a,d){var m=a.pendingProps,v=m.revealOrder,x=m.tail;if(Bn(r,a,m.children,d),m=xe.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$E(r,d,a);else if(r.tag===19)$E(r,d,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(ce(xe,m),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(d=a.child,v=null;d!==null;)r=d.alternate,r!==null&&Ng(r)===null&&(v=d),d=d.sibling;d=v,d===null?(v=a.child,a.child=null):(v=d.sibling,d.sibling=null),Lw(a,!1,v,d,x);break;case"backwards":for(d=null,v=a.child,a.child=null;v!==null;){if(r=v.alternate,r!==null&&Ng(r)===null){a.child=v;break}r=v.sibling,v.sibling=d,d=v,v=r}Lw(a,!0,d,null,x);break;case"together":Lw(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Hg(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function Cr(r,a,d){if(r!==null&&(a.dependencies=r.dependencies),el|=a.lanes,(d&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(e(153));if(a.child!==null){for(r=a.child,d=Uo(r,r.pendingProps),a.child=d,d.return=a;r.sibling!==null;)r=r.sibling,d=d.sibling=Uo(r,r.pendingProps),d.return=a;d.sibling=null}return a.child}function wL(r,a,d){switch(a.tag){case 3:zE(a),nu();break;case 5:oE(a);break;case 1:Kn(a.type)&&Cg(a);break;case 4:dw(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,v=a.memoizedProps.value;ce(Dg,m._currentValue),m._currentValue=v;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(ce(xe,xe.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?WE(r,a,d):(ce(xe,xe.current&1),r=Cr(r,a,d),r!==null?r.sibling:null);ce(xe,xe.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(r.flags&128)!==0){if(m)return GE(r,a,d);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ce(xe,xe.current),m)break;return null;case 22:case 23:return a.lanes=0,jE(r,a,d)}return Cr(r,a,d)}var XE,Iw,YE,qE;XE=function(r,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Iw=function(){},YE=function(r,a,d,m){var v=r.memoizedProps;if(v!==m){r=a.stateNode,Za(js.current);var x=null;switch(d){case"input":v=gd(r,v),m=gd(r,m),x=[];break;case"select":v=nt({},v,{value:void 0}),m=nt({},m,{value:void 0}),x=[];break;case"textarea":v=d0(r,v),m=d0(r,m),x=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=Sg)}p0(d,m);var P;d=null;for(W in v)if(!m.hasOwnProperty(W)&&v.hasOwnProperty(W)&&v[W]!=null)if(W==="style"){var L=v[W];for(P in L)L.hasOwnProperty(P)&&(d||(d={}),d[P]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?x||(x=[]):(x=x||[]).push(W,null));for(W in m){var N=m[W];if(L=v!=null?v[W]:void 0,m.hasOwnProperty(W)&&N!==L&&(N!=null||L!=null))if(W==="style")if(L){for(P in L)!L.hasOwnProperty(P)||N&&N.hasOwnProperty(P)||(d||(d={}),d[P]="");for(P in N)N.hasOwnProperty(P)&&L[P]!==N[P]&&(d||(d={}),d[P]=N[P])}else d||(x||(x=[]),x.push(W,d)),d=N;else W==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,L=L?L.__html:void 0,N!=null&&L!==N&&(x=x||[]).push(W,N)):W==="children"?typeof N!="string"&&typeof N!="number"||(x=x||[]).push(W,""+N):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(N!=null&&W==="onScroll"&&fe("scroll",r),x||L===N||(x=[])):(x=x||[]).push(W,N))}d&&(x=x||[]).push("style",d);var W=x;(a.updateQueue=W)&&(a.flags|=4)}},qE=function(r,a,d,m){d!==m&&(a.flags|=4)};function Kd(r,a){if(!ye)switch(r.tailMode){case"hidden":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function _n(r){var a=r.alternate!==null&&r.alternate.child===r.child,d=0,m=0;if(a)for(var v=r.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=m,r.childLanes=d,a}function bL(r,a,d){var m=a.pendingProps;switch(nw(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(a),null;case 1:return Kn(a.type)&&Eg(),_n(a),null;case 3:return m=a.stateNode,ou(),pe(qn),pe(Cn),mw(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(kg(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ms!==null&&($w(ms),ms=null))),Iw(r,a),_n(a),null;case 5:fw(a);var v=Za($d.current);if(d=a.type,r!==null&&a.stateNode!=null)YE(r,a,d,m,v),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(e(166));return _n(a),null}if(r=Za(js.current),kg(a)){m=a.stateNode,d=a.type;var x=a.memoizedProps;switch(m[Bs]=a,m[Vd]=x,r=(a.mode&1)!==0,d){case"dialog":fe("cancel",m),fe("close",m);break;case"iframe":case"object":case"embed":fe("load",m);break;case"video":case"audio":for(v=0;v<Od.length;v++)fe(Od[v],m);break;case"source":fe("error",m);break;case"img":case"image":case"link":fe("error",m),fe("load",m);break;case"details":fe("toggle",m);break;case"input":kA(m,x),fe("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!x.multiple},fe("invalid",m);break;case"textarea":RA(m,x),fe("invalid",m)}p0(d,x),v=null;for(var P in x)if(x.hasOwnProperty(P)){var L=x[P];P==="children"?typeof L=="string"?m.textContent!==L&&(x.suppressHydrationWarning!==!0&&xg(m.textContent,L,r),v=["children",L]):typeof L=="number"&&m.textContent!==""+L&&(x.suppressHydrationWarning!==!0&&xg(m.textContent,L,r),v=["children",""+L]):i.hasOwnProperty(P)&&L!=null&&P==="onScroll"&&fe("scroll",m)}switch(d){case"input":Vi(m),DA(m,x,!0);break;case"textarea":Vi(m),IA(m);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(m.onclick=Sg)}m=v,a.updateQueue=m,m!==null&&(a.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=NA(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=P.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=P.createElement(d,{is:m.is}):(r=P.createElement(d),d==="select"&&(P=r,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):r=P.createElementNS(r,d),r[Bs]=a,r[Vd]=m,XE(r,a,!1,!1),a.stateNode=r;t:{switch(P=m0(d,m),d){case"dialog":fe("cancel",r),fe("close",r),v=m;break;case"iframe":case"object":case"embed":fe("load",r),v=m;break;case"video":case"audio":for(v=0;v<Od.length;v++)fe(Od[v],r);v=m;break;case"source":fe("error",r),v=m;break;case"img":case"image":case"link":fe("error",r),fe("load",r),v=m;break;case"details":fe("toggle",r),v=m;break;case"input":kA(r,m),v=gd(r,m),fe("invalid",r);break;case"option":v=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},v=nt({},m,{value:void 0}),fe("invalid",r);break;case"textarea":RA(r,m),v=d0(r,m),fe("invalid",r);break;default:v=m}p0(d,v),L=v;for(x in L)if(L.hasOwnProperty(x)){var N=L[x];x==="style"?BA(r,N):x==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&FA(r,N)):x==="children"?typeof N=="string"?(d!=="textarea"||N!=="")&&vd(r,N):typeof N=="number"&&vd(r,""+N):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?N!=null&&x==="onScroll"&&fe("scroll",r):N!=null&&k(r,x,N,P))}switch(d){case"input":Vi(r),DA(r,m,!1);break;case"textarea":Vi(r),IA(r);break;case"option":m.value!=null&&r.setAttribute("value",""+Ut(m.value));break;case"select":r.multiple=!!m.multiple,x=m.value,x!=null?Uc(r,!!m.multiple,x,!1):m.defaultValue!=null&&Uc(r,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=Sg)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break t;case"img":m=!0;break t;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return _n(a),null;case 6:if(r&&a.stateNode!=null)qE(r,a,r.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(e(166));if(d=Za($d.current),Za(js.current),kg(a)){if(m=a.stateNode,d=a.memoizedProps,m[Bs]=a,(x=m.nodeValue!==d)&&(r=hi,r!==null))switch(r.tag){case 3:xg(m.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&xg(m.nodeValue,d,(r.mode&1)!==0)}x&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Bs]=a,a.stateNode=m}return _n(a),null;case 13:if(pe(xe),m=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ye&&di!==null&&(a.mode&1)!==0&&(a.flags&128)===0)J1(),nu(),a.flags|=98560,x=!1;else if(x=kg(a),m!==null&&m.dehydrated!==null){if(r===null){if(!x)throw Error(e(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(e(317));x[Bs]=a}else nu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_n(a),x=!1}else ms!==null&&($w(ms),ms=null),x=!0;if(!x)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(xe.current&1)!==0?Ye===0&&(Ye=3):Yw())),a.updateQueue!==null&&(a.flags|=4),_n(a),null);case 4:return ou(),Iw(r,a),r===null&&Bd(a.stateNode.containerInfo),_n(a),null;case 10:return lw(a.type._context),_n(a),null;case 17:return Kn(a.type)&&Eg(),_n(a),null;case 19:if(pe(xe),x=a.memoizedState,x===null)return _n(a),null;if(m=(a.flags&128)!==0,P=x.rendering,P===null)if(m)Kd(x,!1);else{if(Ye!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(P=Ng(r),P!==null){for(a.flags|=128,Kd(x,!1),m=P.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)x=d,r=m,x.flags&=14680066,P=x.alternate,P===null?(x.childLanes=0,x.lanes=r,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=P.childLanes,x.lanes=P.lanes,x.child=P.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=P.memoizedProps,x.memoizedState=P.memoizedState,x.updateQueue=P.updateQueue,x.type=P.type,r=P.dependencies,x.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return ce(xe,xe.current&1|2),a.child}r=r.sibling}x.tail!==null&&Fe()>uu&&(a.flags|=128,m=!0,Kd(x,!1),a.lanes=4194304)}else{if(!m)if(r=Ng(P),r!==null){if(a.flags|=128,m=!0,d=r.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Kd(x,!0),x.tail===null&&x.tailMode==="hidden"&&!P.alternate&&!ye)return _n(a),null}else 2*Fe()-x.renderingStartTime>uu&&d!==1073741824&&(a.flags|=128,m=!0,Kd(x,!1),a.lanes=4194304);x.isBackwards?(P.sibling=a.child,a.child=P):(d=x.last,d!==null?d.sibling=P:a.child=P,x.last=P)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=Fe(),a.sibling=null,d=xe.current,ce(xe,m?d&1|2:d&1),a):(_n(a),null);case 22:case 23:return Xw(),m=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(fi&1073741824)!==0&&(_n(a),a.subtreeFlags&6&&(a.flags|=8192)):_n(a),null;case 24:return null;case 25:return null}throw Error(e(156,a.tag))}function xL(r,a){switch(nw(a),a.tag){case 1:return Kn(a.type)&&Eg(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return ou(),pe(qn),pe(Cn),mw(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return fw(a),null;case 13:if(pe(xe),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(e(340));nu()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return pe(xe),null;case 4:return ou(),null;case 10:return lw(a.type._context),null;case 22:case 23:return Xw(),null;case 24:return null;default:return null}}var Wg=!1,Pn=!1,SL=typeof WeakSet=="function"?WeakSet:Set,ht=null;function lu(r,a){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){Pe(r,a,m)}else d.current=null}function Nw(r,a,d){try{d()}catch(m){Pe(r,a,m)}}var KE=!1;function AL(r,a){if(X0=ug,r=P1(),j0(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else t:{d=(d=r.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break t}var P=0,L=-1,N=-1,W=0,q=0,J=r,Y=null;e:for(;;){for(var ot;J!==d||v!==0&&J.nodeType!==3||(L=P+v),J!==x||m!==0&&J.nodeType!==3||(N=P+m),J.nodeType===3&&(P+=J.nodeValue.length),(ot=J.firstChild)!==null;)Y=J,J=ot;for(;;){if(J===r)break e;if(Y===d&&++W===v&&(L=P),Y===x&&++q===m&&(N=P),(ot=J.nextSibling)!==null)break;J=Y,Y=J.parentNode}J=ot}d=L===-1||N===-1?null:{start:L,end:N}}else d=null}d=d||{start:0,end:0}}else d=null;for(Y0={focusedElem:r,selectionRange:d},ug=!1,ht=a;ht!==null;)if(a=ht,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,ht=r;else for(;ht!==null;){a=ht;try{var dt=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var ft=dt.memoizedProps,Oe=dt.memoizedState,V=a.stateNode,O=V.getSnapshotBeforeUpdate(a.elementType===a.type?ft:gs(a.type,ft),Oe);V.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(et){Pe(a,a.return,et)}if(r=a.sibling,r!==null){r.return=a.return,ht=r;break}ht=a.return}return dt=KE,KE=!1,dt}function Qd(r,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&r)===r){var x=v.destroy;v.destroy=void 0,x!==void 0&&Nw(a,d,x)}v=v.next}while(v!==m)}}function $g(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&r)===r){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function Fw(r){var a=r.ref;if(a!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof a=="function"?a(r):a.current=r}}function QE(r){var a=r.alternate;a!==null&&(r.alternate=null,QE(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[Bs],delete a[Vd],delete a[J0],delete a[rL],delete a[oL])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function JE(r){return r.tag===5||r.tag===3||r.tag===4}function ZE(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||JE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ow(r,a,d){var m=r.tag;if(m===5||m===6)r=r.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(r,a):d.insertBefore(r,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(r,d)):(a=d,a.appendChild(r)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Sg));else if(m!==4&&(r=r.child,r!==null))for(Ow(r,a,d),r=r.sibling;r!==null;)Ow(r,a,d),r=r.sibling}function Bw(r,a,d){var m=r.tag;if(m===5||m===6)r=r.stateNode,a?d.insertBefore(r,a):d.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(Bw(r,a,d),r=r.sibling;r!==null;)Bw(r,a,d),r=r.sibling}var fn=null,ys=!1;function Fo(r,a,d){for(d=d.child;d!==null;)tC(r,a,d),d=d.sibling}function tC(r,a,d){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(sg,d)}catch{}switch(d.tag){case 5:Pn||lu(d,a);case 6:var m=fn,v=ys;fn=null,Fo(r,a,d),fn=m,ys=v,fn!==null&&(ys?(r=fn,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):fn.removeChild(d.stateNode));break;case 18:fn!==null&&(ys?(r=fn,d=d.stateNode,r.nodeType===8?Q0(r.parentNode,d):r.nodeType===1&&Q0(r,d),kd(r)):Q0(fn,d.stateNode));break;case 4:m=fn,v=ys,fn=d.stateNode.containerInfo,ys=!0,Fo(r,a,d),fn=m,ys=v;break;case 0:case 11:case 14:case 15:if(!Pn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var x=v,P=x.destroy;x=x.tag,P!==void 0&&((x&2)!==0||(x&4)!==0)&&Nw(d,a,P),v=v.next}while(v!==m)}Fo(r,a,d);break;case 1:if(!Pn&&(lu(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(L){Pe(d,a,L)}Fo(r,a,d);break;case 21:Fo(r,a,d);break;case 22:d.mode&1?(Pn=(m=Pn)||d.memoizedState!==null,Fo(r,a,d),Pn=m):Fo(r,a,d);break;default:Fo(r,a,d)}}function eC(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new SL),a.forEach(function(m){var v=RL.bind(null,r,m);d.has(m)||(d.add(m),m.then(v,v))})}}function vs(r,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m];try{var x=r,P=a,L=P;t:for(;L!==null;){switch(L.tag){case 5:fn=L.stateNode,ys=!1;break t;case 3:fn=L.stateNode.containerInfo,ys=!0;break t;case 4:fn=L.stateNode.containerInfo,ys=!0;break t}L=L.return}if(fn===null)throw Error(e(160));tC(x,P,v),fn=null,ys=!1;var N=v.alternate;N!==null&&(N.return=null),v.return=null}catch(W){Pe(v,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)nC(a,r),a=a.sibling}function nC(r,a){var d=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(vs(a,r),Us(r),m&4){try{Qd(3,r,r.return),$g(3,r)}catch(ft){Pe(r,r.return,ft)}try{Qd(5,r,r.return)}catch(ft){Pe(r,r.return,ft)}}break;case 1:vs(a,r),Us(r),m&512&&d!==null&&lu(d,d.return);break;case 5:if(vs(a,r),Us(r),m&512&&d!==null&&lu(d,d.return),r.flags&32){var v=r.stateNode;try{vd(v,"")}catch(ft){Pe(r,r.return,ft)}}if(m&4&&(v=r.stateNode,v!=null)){var x=r.memoizedProps,P=d!==null?d.memoizedProps:x,L=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{L==="input"&&x.type==="radio"&&x.name!=null&&MA(v,x),m0(L,P);var W=m0(L,x);for(P=0;P<N.length;P+=2){var q=N[P],J=N[P+1];q==="style"?BA(v,J):q==="dangerouslySetInnerHTML"?FA(v,J):q==="children"?vd(v,J):k(v,q,J,W)}switch(L){case"input":u0(v,x);break;case"textarea":LA(v,x);break;case"select":var Y=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var ot=x.value;ot!=null?Uc(v,!!x.multiple,ot,!1):Y!==!!x.multiple&&(x.defaultValue!=null?Uc(v,!!x.multiple,x.defaultValue,!0):Uc(v,!!x.multiple,x.multiple?[]:"",!1))}v[Vd]=x}catch(ft){Pe(r,r.return,ft)}}break;case 6:if(vs(a,r),Us(r),m&4){if(r.stateNode===null)throw Error(e(162));v=r.stateNode,x=r.memoizedProps;try{v.nodeValue=x}catch(ft){Pe(r,r.return,ft)}}break;case 3:if(vs(a,r),Us(r),m&4&&d!==null&&d.memoizedState.isDehydrated)try{kd(a.containerInfo)}catch(ft){Pe(r,r.return,ft)}break;case 4:vs(a,r),Us(r);break;case 13:vs(a,r),Us(r),v=r.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(Uw=Fe())),m&4&&eC(r);break;case 22:if(q=d!==null&&d.memoizedState!==null,r.mode&1?(Pn=(W=Pn)||q,vs(a,r),Pn=W):vs(a,r),Us(r),m&8192){if(W=r.memoizedState!==null,(r.stateNode.isHidden=W)&&!q&&(r.mode&1)!==0)for(ht=r,q=r.child;q!==null;){for(J=ht=q;ht!==null;){switch(Y=ht,ot=Y.child,Y.tag){case 0:case 11:case 14:case 15:Qd(4,Y,Y.return);break;case 1:lu(Y,Y.return);var dt=Y.stateNode;if(typeof dt.componentWillUnmount=="function"){m=Y,d=Y.return;try{a=m,dt.props=a.memoizedProps,dt.state=a.memoizedState,dt.componentWillUnmount()}catch(ft){Pe(m,d,ft)}}break;case 5:lu(Y,Y.return);break;case 22:if(Y.memoizedState!==null){rC(J);continue}}ot!==null?(ot.return=Y,ht=ot):rC(J)}q=q.sibling}t:for(q=null,J=r;;){if(J.tag===5){if(q===null){q=J;try{v=J.stateNode,W?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(L=J.stateNode,N=J.memoizedProps.style,P=N!=null&&N.hasOwnProperty("display")?N.display:null,L.style.display=OA("display",P))}catch(ft){Pe(r,r.return,ft)}}}else if(J.tag===6){if(q===null)try{J.stateNode.nodeValue=W?"":J.memoizedProps}catch(ft){Pe(r,r.return,ft)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===r)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===r)break t;for(;J.sibling===null;){if(J.return===null||J.return===r)break t;q===J&&(q=null),J=J.return}q===J&&(q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:vs(a,r),Us(r),m&4&&eC(r);break;case 21:break;default:vs(a,r),Us(r)}}function Us(r){var a=r.flags;if(a&2){try{t:{for(var d=r.return;d!==null;){if(JE(d)){var m=d;break t}d=d.return}throw Error(e(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(vd(v,""),m.flags&=-33);var x=ZE(r);Bw(r,x,v);break;case 3:case 4:var P=m.stateNode.containerInfo,L=ZE(r);Ow(r,L,P);break;default:throw Error(e(161))}}catch(N){Pe(r,r.return,N)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function EL(r,a,d){ht=r,iC(r)}function iC(r,a,d){for(var m=(r.mode&1)!==0;ht!==null;){var v=ht,x=v.child;if(v.tag===22&&m){var P=v.memoizedState!==null||Wg;if(!P){var L=v.alternate,N=L!==null&&L.memoizedState!==null||Pn;L=Wg;var W=Pn;if(Wg=P,(Pn=N)&&!W)for(ht=v;ht!==null;)P=ht,N=P.child,P.tag===22&&P.memoizedState!==null?oC(v):N!==null?(N.return=P,ht=N):oC(v);for(;x!==null;)ht=x,iC(x),x=x.sibling;ht=v,Wg=L,Pn=W}sC(r)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,ht=x):sC(r)}}function sC(r){for(;ht!==null;){var a=ht;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Pn||$g(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Pn)if(d===null)m.componentDidMount();else{var v=a.elementType===a.type?d.memoizedProps:gs(a.type,d.memoizedProps);m.componentDidUpdate(v,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&rE(a,x,m);break;case 3:var P=a.updateQueue;if(P!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}rE(a,P,d)}break;case 5:var L=a.stateNode;if(d===null&&a.flags&4){d=L;var N=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&d.focus();break;case"img":N.src&&(d.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var q=W.memoizedState;if(q!==null){var J=q.dehydrated;J!==null&&kd(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Pn||a.flags&512&&Fw(a)}catch(Y){Pe(a,a.return,Y)}}if(a===r){ht=null;break}if(d=a.sibling,d!==null){d.return=a.return,ht=d;break}ht=a.return}}function rC(r){for(;ht!==null;){var a=ht;if(a===r){ht=null;break}var d=a.sibling;if(d!==null){d.return=a.return,ht=d;break}ht=a.return}}function oC(r){for(;ht!==null;){var a=ht;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{$g(4,a)}catch(N){Pe(a,d,N)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var v=a.return;try{m.componentDidMount()}catch(N){Pe(a,v,N)}}var x=a.return;try{Fw(a)}catch(N){Pe(a,x,N)}break;case 5:var P=a.return;try{Fw(a)}catch(N){Pe(a,P,N)}}}catch(N){Pe(a,a.return,N)}if(a===r){ht=null;break}var L=a.sibling;if(L!==null){L.return=a.return,ht=L;break}ht=a.return}}var CL=Math.ceil,Gg=D.ReactCurrentDispatcher,jw=D.ReactCurrentOwner,$i=D.ReactCurrentBatchConfig,zt=0,sn=null,Ue=null,pn=0,fi=0,cu=Do(0),Ye=0,Jd=null,el=0,Xg=0,Vw=0,Zd=null,Jn=null,Uw=0,uu=1/0,Tr=null,Yg=!1,zw=null,Oo=null,qg=!1,Bo=null,Kg=0,tf=0,Hw=null,Qg=-1,Jg=0;function jn(){return(zt&6)!==0?Fe():Qg!==-1?Qg:Qg=Fe()}function jo(r){return(r.mode&1)===0?1:(zt&2)!==0&&pn!==0?pn&-pn:lL.transition!==null?(Jg===0&&(Jg=ZA()),Jg):(r=Yt,r!==0||(r=window.event,r=r===void 0?16:l1(r.type)),r)}function ws(r,a,d,m){if(50<tf)throw tf=0,Hw=null,Error(e(185));Ed(r,d,m),((zt&2)===0||r!==sn)&&(r===sn&&((zt&2)===0&&(Xg|=d),Ye===4&&Vo(r,pn)),Zn(r,m),d===1&&zt===0&&(a.mode&1)===0&&(uu=Fe()+500,Tg&&Lo()))}function Zn(r,a){var d=r.callbackNode;lR(r,a);var m=ag(r,r===sn?pn:0);if(m===0)d!==null&&KA(d),r.callbackNode=null,r.callbackPriority=0;else if(a=m&-m,r.callbackPriority!==a){if(d!=null&&KA(d),a===1)r.tag===0?aL(lC.bind(null,r)):X1(lC.bind(null,r)),iL(function(){(zt&6)===0&&Lo()}),d=null;else{switch(t1(m)){case 1:d=S0;break;case 4:d=QA;break;case 16:d=ig;break;case 536870912:d=JA;break;default:d=ig}d=gC(d,aC.bind(null,r))}r.callbackPriority=a,r.callbackNode=d}}function aC(r,a){if(Qg=-1,Jg=0,(zt&6)!==0)throw Error(e(327));var d=r.callbackNode;if(hu()&&r.callbackNode!==d)return null;var m=ag(r,r===sn?pn:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||a)a=Zg(r,m);else{a=m;var v=zt;zt|=2;var x=uC();(sn!==r||pn!==a)&&(Tr=null,uu=Fe()+500,il(r,a));do try{PL();break}catch(L){cC(r,L)}while(!0);aw(),Gg.current=x,zt=v,Ue!==null?a=0:(sn=null,pn=0,a=Ye)}if(a!==0){if(a===2&&(v=A0(r),v!==0&&(m=v,a=Ww(r,v))),a===1)throw d=Jd,il(r,0),Vo(r,m),Zn(r,Fe()),d;if(a===6)Vo(r,m);else{if(v=r.current.alternate,(m&30)===0&&!TL(v)&&(a=Zg(r,m),a===2&&(x=A0(r),x!==0&&(m=x,a=Ww(r,x))),a===1))throw d=Jd,il(r,0),Vo(r,m),Zn(r,Fe()),d;switch(r.finishedWork=v,r.finishedLanes=m,a){case 0:case 1:throw Error(e(345));case 2:sl(r,Jn,Tr);break;case 3:if(Vo(r,m),(m&130023424)===m&&(a=Uw+500-Fe(),10<a)){if(ag(r,0)!==0)break;if(v=r.suspendedLanes,(v&m)!==m){jn(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=K0(sl.bind(null,r,Jn,Tr),a);break}sl(r,Jn,Tr);break;case 4:if(Vo(r,m),(m&4194240)===m)break;for(a=r.eventTimes,v=-1;0<m;){var P=31-fs(m);x=1<<P,P=a[P],P>v&&(v=P),m&=~x}if(m=v,m=Fe()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*CL(m/1960))-m,10<m){r.timeoutHandle=K0(sl.bind(null,r,Jn,Tr),m);break}sl(r,Jn,Tr);break;case 5:sl(r,Jn,Tr);break;default:throw Error(e(329))}}}return Zn(r,Fe()),r.callbackNode===d?aC.bind(null,r):null}function Ww(r,a){var d=Zd;return r.current.memoizedState.isDehydrated&&(il(r,a).flags|=256),r=Zg(r,a),r!==2&&(a=Jn,Jn=d,a!==null&&$w(a)),r}function $w(r){Jn===null?Jn=r:Jn.push.apply(Jn,r)}function TL(r){for(var a=r;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var v=d[m],x=v.getSnapshot;v=v.value;try{if(!ps(x(),v))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Vo(r,a){for(a&=~Vw,a&=~Xg,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var d=31-fs(a),m=1<<d;r[d]=-1,a&=~m}}function lC(r){if((zt&6)!==0)throw Error(e(327));hu();var a=ag(r,0);if((a&1)===0)return Zn(r,Fe()),null;var d=Zg(r,a);if(r.tag!==0&&d===2){var m=A0(r);m!==0&&(a=m,d=Ww(r,m))}if(d===1)throw d=Jd,il(r,0),Vo(r,a),Zn(r,Fe()),d;if(d===6)throw Error(e(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,sl(r,Jn,Tr),Zn(r,Fe()),null}function Gw(r,a){var d=zt;zt|=1;try{return r(a)}finally{zt=d,zt===0&&(uu=Fe()+500,Tg&&Lo())}}function nl(r){Bo!==null&&Bo.tag===0&&(zt&6)===0&&hu();var a=zt;zt|=1;var d=$i.transition,m=Yt;try{if($i.transition=null,Yt=1,r)return r()}finally{Yt=m,$i.transition=d,zt=a,(zt&6)===0&&Lo()}}function Xw(){fi=cu.current,pe(cu)}function il(r,a){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,nL(d)),Ue!==null)for(d=Ue.return;d!==null;){var m=d;switch(nw(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Eg();break;case 3:ou(),pe(qn),pe(Cn),mw();break;case 5:fw(m);break;case 4:ou();break;case 13:pe(xe);break;case 19:pe(xe);break;case 10:lw(m.type._context);break;case 22:case 23:Xw()}d=d.return}if(sn=r,Ue=r=Uo(r.current,null),pn=fi=a,Ye=0,Jd=null,Vw=Xg=el=0,Jn=Zd=null,Ja!==null){for(a=0;a<Ja.length;a++)if(d=Ja[a],m=d.interleaved,m!==null){d.interleaved=null;var v=m.next,x=d.pending;if(x!==null){var P=x.next;x.next=v,m.next=P}d.pending=m}Ja=null}return r}function cC(r,a){do{var d=Ue;try{if(aw(),Fg.current=Vg,Og){for(var m=Se.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}Og=!1}if(tl=0,nn=Xe=Se=null,Gd=!1,Xd=0,jw.current=null,d===null||d.return===null){Ye=1,Jd=a,Ue=null;break}t:{var x=r,P=d.return,L=d,N=a;if(a=pn,L.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var W=N,q=L,J=q.tag;if((q.mode&1)===0&&(J===0||J===11||J===15)){var Y=q.alternate;Y?(q.updateQueue=Y.updateQueue,q.memoizedState=Y.memoizedState,q.lanes=Y.lanes):(q.updateQueue=null,q.memoizedState=null)}var ot=IE(P);if(ot!==null){ot.flags&=-257,NE(ot,P,L,x,a),ot.mode&1&&LE(x,W,a),a=ot,N=W;var dt=a.updateQueue;if(dt===null){var ft=new Set;ft.add(N),a.updateQueue=ft}else dt.add(N);break t}else{if((a&1)===0){LE(x,W,a),Yw();break t}N=Error(e(426))}}else if(ye&&L.mode&1){var Oe=IE(P);if(Oe!==null){(Oe.flags&65536)===0&&(Oe.flags|=256),NE(Oe,P,L,x,a),rw(au(N,L));break t}}x=N=au(N,L),Ye!==4&&(Ye=2),Zd===null?Zd=[x]:Zd.push(x),x=P;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var V=DE(x,N,a);sE(x,V);break t;case 1:L=N;var O=x.type,z=x.stateNode;if((x.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Oo===null||!Oo.has(z)))){x.flags|=65536,a&=-a,x.lanes|=a;var et=RE(x,L,a);sE(x,et);break t}}x=x.return}while(x!==null)}dC(d)}catch(mt){a=mt,Ue===d&&d!==null&&(Ue=d=d.return);continue}break}while(!0)}function uC(){var r=Gg.current;return Gg.current=Vg,r===null?Vg:r}function Yw(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),sn===null||(el&268435455)===0&&(Xg&268435455)===0||Vo(sn,pn)}function Zg(r,a){var d=zt;zt|=2;var m=uC();(sn!==r||pn!==a)&&(Tr=null,il(r,a));do try{_L();break}catch(v){cC(r,v)}while(!0);if(aw(),zt=d,Gg.current=m,Ue!==null)throw Error(e(261));return sn=null,pn=0,Ye}function _L(){for(;Ue!==null;)hC(Ue)}function PL(){for(;Ue!==null&&!ZD();)hC(Ue)}function hC(r){var a=mC(r.alternate,r,fi);r.memoizedProps=r.pendingProps,a===null?dC(r):Ue=a,jw.current=null}function dC(r){var a=r;do{var d=a.alternate;if(r=a.return,(a.flags&32768)===0){if(d=bL(d,a,fi),d!==null){Ue=d;return}}else{if(d=xL(d,a),d!==null){d.flags&=32767,Ue=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ye=6,Ue=null;return}}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=r}while(a!==null);Ye===0&&(Ye=5)}function sl(r,a,d){var m=Yt,v=$i.transition;try{$i.transition=null,Yt=1,kL(r,a,d,m)}finally{$i.transition=v,Yt=m}return null}function kL(r,a,d,m){do hu();while(Bo!==null);if((zt&6)!==0)throw Error(e(327));d=r.finishedWork;var v=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(e(177));r.callbackNode=null,r.callbackPriority=0;var x=d.lanes|d.childLanes;if(cR(r,x),r===sn&&(Ue=sn=null,pn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||qg||(qg=!0,gC(ig,function(){return hu(),null})),x=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||x){x=$i.transition,$i.transition=null;var P=Yt;Yt=1;var L=zt;zt|=4,jw.current=null,AL(r,d),nC(d,r),qR(Y0),ug=!!X0,Y0=X0=null,r.current=d,EL(d),tR(),zt=L,Yt=P,$i.transition=x}else r.current=d;if(qg&&(qg=!1,Bo=r,Kg=v),x=r.pendingLanes,x===0&&(Oo=null),iR(d.stateNode),Zn(r,Fe()),a!==null)for(m=r.onRecoverableError,d=0;d<a.length;d++)v=a[d],m(v.value,{componentStack:v.stack,digest:v.digest});if(Yg)throw Yg=!1,r=zw,zw=null,r;return(Kg&1)!==0&&r.tag!==0&&hu(),x=r.pendingLanes,(x&1)!==0?r===Hw?tf++:(tf=0,Hw=r):tf=0,Lo(),null}function hu(){if(Bo!==null){var r=t1(Kg),a=$i.transition,d=Yt;try{if($i.transition=null,Yt=16>r?16:r,Bo===null)var m=!1;else{if(r=Bo,Bo=null,Kg=0,(zt&6)!==0)throw Error(e(331));var v=zt;for(zt|=4,ht=r.current;ht!==null;){var x=ht,P=x.child;if((ht.flags&16)!==0){var L=x.deletions;if(L!==null){for(var N=0;N<L.length;N++){var W=L[N];for(ht=W;ht!==null;){var q=ht;switch(q.tag){case 0:case 11:case 15:Qd(8,q,x)}var J=q.child;if(J!==null)J.return=q,ht=J;else for(;ht!==null;){q=ht;var Y=q.sibling,ot=q.return;if(QE(q),q===W){ht=null;break}if(Y!==null){Y.return=ot,ht=Y;break}ht=ot}}}var dt=x.alternate;if(dt!==null){var ft=dt.child;if(ft!==null){dt.child=null;do{var Oe=ft.sibling;ft.sibling=null,ft=Oe}while(ft!==null)}}ht=x}}if((x.subtreeFlags&2064)!==0&&P!==null)P.return=x,ht=P;else t:for(;ht!==null;){if(x=ht,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Qd(9,x,x.return)}var V=x.sibling;if(V!==null){V.return=x.return,ht=V;break t}ht=x.return}}var O=r.current;for(ht=O;ht!==null;){P=ht;var z=P.child;if((P.subtreeFlags&2064)!==0&&z!==null)z.return=P,ht=z;else t:for(P=O;ht!==null;){if(L=ht,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:$g(9,L)}}catch(mt){Pe(L,L.return,mt)}if(L===P){ht=null;break t}var et=L.sibling;if(et!==null){et.return=L.return,ht=et;break t}ht=L.return}}if(zt=v,Lo(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(sg,r)}catch{}m=!0}return m}finally{Yt=d,$i.transition=a}}return!1}function fC(r,a,d){a=au(d,a),a=DE(r,a,1),r=No(r,a,1),a=jn(),r!==null&&(Ed(r,1,a),Zn(r,a))}function Pe(r,a,d){if(r.tag===3)fC(r,r,d);else for(;a!==null;){if(a.tag===3){fC(a,r,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Oo===null||!Oo.has(m))){r=au(d,r),r=RE(a,r,1),a=No(a,r,1),r=jn(),a!==null&&(Ed(a,1,r),Zn(a,r));break}}a=a.return}}function ML(r,a,d){var m=r.pingCache;m!==null&&m.delete(a),a=jn(),r.pingedLanes|=r.suspendedLanes&d,sn===r&&(pn&d)===d&&(Ye===4||Ye===3&&(pn&130023424)===pn&&500>Fe()-Uw?il(r,0):Vw|=d),Zn(r,a)}function pC(r,a){a===0&&((r.mode&1)===0?a=1:(a=og,og<<=1,(og&130023424)===0&&(og=4194304)));var d=jn();r=Ar(r,a),r!==null&&(Ed(r,a,d),Zn(r,d))}function DL(r){var a=r.memoizedState,d=0;a!==null&&(d=a.retryLane),pC(r,d)}function RL(r,a){var d=0;switch(r.tag){case 13:var m=r.stateNode,v=r.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(e(314))}m!==null&&m.delete(a),pC(r,d)}var mC;mC=function(r,a,d){if(r!==null)if(r.memoizedProps!==a.pendingProps||qn.current)Qn=!0;else{if((r.lanes&d)===0&&(a.flags&128)===0)return Qn=!1,wL(r,a,d);Qn=(r.flags&131072)!==0}else Qn=!1,ye&&(a.flags&1048576)!==0&&Y1(a,Pg,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Hg(r,a),r=a.pendingProps;var v=Zc(a,Cn.current);ru(a,d),v=vw(null,a,m,r,v,d);var x=ww();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Kn(m)?(x=!0,Cg(a)):x=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,hw(a),v.updater=Ug,a.stateNode=v,v._reactInternals=a,Cw(a,m,r,d),a=kw(null,a,m,!0,x,d)):(a.tag=0,ye&&x&&ew(a),Bn(null,a,v,d),a=a.child),a;case 16:m=a.elementType;t:{switch(Hg(r,a),r=a.pendingProps,v=m._init,m=v(m._payload),a.type=m,v=a.tag=IL(m),r=gs(m,r),v){case 0:a=Pw(null,a,m,r,d);break t;case 1:a=UE(null,a,m,r,d);break t;case 11:a=FE(null,a,m,r,d);break t;case 14:a=OE(null,a,m,gs(m.type,r),d);break t}throw Error(e(306,m,""))}return a;case 0:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:gs(m,v),Pw(r,a,m,v,d);case 1:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:gs(m,v),UE(r,a,m,v,d);case 3:t:{if(zE(a),r===null)throw Error(e(387));m=a.pendingProps,x=a.memoizedState,v=x.element,iE(r,a),Ig(a,m,null,d);var P=a.memoizedState;if(m=P.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){v=au(Error(e(423)),a),a=HE(r,a,m,d,v);break t}else if(m!==v){v=au(Error(e(424)),a),a=HE(r,a,m,d,v);break t}else for(di=Mo(a.stateNode.containerInfo.firstChild),hi=a,ye=!0,ms=null,d=eE(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(nu(),m===v){a=Cr(r,a,d);break t}Bn(r,a,m,d)}a=a.child}return a;case 5:return oE(a),r===null&&sw(a),m=a.type,v=a.pendingProps,x=r!==null?r.memoizedProps:null,P=v.children,q0(m,v)?P=null:x!==null&&q0(m,x)&&(a.flags|=32),VE(r,a),Bn(r,a,P,d),a.child;case 6:return r===null&&sw(a),null;case 13:return WE(r,a,d);case 4:return dw(a,a.stateNode.containerInfo),m=a.pendingProps,r===null?a.child=iu(a,null,m,d):Bn(r,a,m,d),a.child;case 11:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:gs(m,v),FE(r,a,m,v,d);case 7:return Bn(r,a,a.pendingProps,d),a.child;case 8:return Bn(r,a,a.pendingProps.children,d),a.child;case 12:return Bn(r,a,a.pendingProps.children,d),a.child;case 10:t:{if(m=a.type._context,v=a.pendingProps,x=a.memoizedProps,P=v.value,ce(Dg,m._currentValue),m._currentValue=P,x!==null)if(ps(x.value,P)){if(x.children===v.children&&!qn.current){a=Cr(r,a,d);break t}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var L=x.dependencies;if(L!==null){P=x.child;for(var N=L.firstContext;N!==null;){if(N.context===m){if(x.tag===1){N=Er(-1,d&-d),N.tag=2;var W=x.updateQueue;if(W!==null){W=W.shared;var q=W.pending;q===null?N.next=N:(N.next=q.next,q.next=N),W.pending=N}}x.lanes|=d,N=x.alternate,N!==null&&(N.lanes|=d),cw(x.return,d,a),L.lanes|=d;break}N=N.next}}else if(x.tag===10)P=x.type===a.type?null:x.child;else if(x.tag===18){if(P=x.return,P===null)throw Error(e(341));P.lanes|=d,L=P.alternate,L!==null&&(L.lanes|=d),cw(P,d,a),P=x.sibling}else P=x.child;if(P!==null)P.return=x;else for(P=x;P!==null;){if(P===a){P=null;break}if(x=P.sibling,x!==null){x.return=P.return,P=x;break}P=P.return}x=P}Bn(r,a,v.children,d),a=a.child}return a;case 9:return v=a.type,m=a.pendingProps.children,ru(a,d),v=Hi(v),m=m(v),a.flags|=1,Bn(r,a,m,d),a.child;case 14:return m=a.type,v=gs(m,a.pendingProps),v=gs(m.type,v),OE(r,a,m,v,d);case 15:return BE(r,a,a.type,a.pendingProps,d);case 17:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:gs(m,v),Hg(r,a),a.tag=1,Kn(m)?(r=!0,Cg(a)):r=!1,ru(a,d),kE(a,m,v),Cw(a,m,v,d),kw(null,a,m,!0,r,d);case 19:return GE(r,a,d);case 22:return jE(r,a,d)}throw Error(e(156,a.tag))};function gC(r,a){return qA(r,a)}function LL(r,a,d,m){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,a,d,m){return new LL(r,a,d,m)}function qw(r){return r=r.prototype,!(!r||!r.isReactComponent)}function IL(r){if(typeof r=="function")return qw(r)?1:0;if(r!=null){if(r=r.$$typeof,r===vt)return 11;if(r===St)return 14}return 2}function Uo(r,a){var d=r.alternate;return d===null?(d=Gi(r.tag,a,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=a,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,a=r.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function ty(r,a,d,m,v,x){var P=2;if(m=r,typeof r=="function")qw(r)&&(P=1);else if(typeof r=="string")P=5;else t:switch(r){case j:return rl(d.children,v,x,a);case H:P=8,v|=8;break;case X:return r=Gi(12,d,a,v|2),r.elementType=X,r.lanes=x,r;case wt:return r=Gi(13,d,a,v),r.elementType=wt,r.lanes=x,r;case gt:return r=Gi(19,d,a,v),r.elementType=gt,r.lanes=x,r;case tt:return ey(d,v,x,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Q:P=10;break t;case Z:P=9;break t;case vt:P=11;break t;case St:P=14;break t;case rt:P=16,m=null;break t}throw Error(e(130,r==null?r:typeof r,""))}return a=Gi(P,d,a,v),a.elementType=r,a.type=m,a.lanes=x,a}function rl(r,a,d,m){return r=Gi(7,r,m,a),r.lanes=d,r}function ey(r,a,d,m){return r=Gi(22,r,m,a),r.elementType=tt,r.lanes=d,r.stateNode={isHidden:!1},r}function Kw(r,a,d){return r=Gi(6,r,null,a),r.lanes=d,r}function Qw(r,a,d){return a=Gi(4,r.children!==null?r.children:[],r.key,a),a.lanes=d,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function NL(r,a,d,m,v){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E0(0),this.expirationTimes=E0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Jw(r,a,d,m,v,x,P,L,N){return r=new NL(r,a,d,L,N),a===1?(a=1,x===!0&&(a|=8)):a=0,x=Gi(3,null,null,a),r.current=x,x.stateNode=r,x.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},hw(x),r}function FL(r,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:m==null?null:""+m,children:r,containerInfo:a,implementation:d}}function yC(r){if(!r)return Ro;r=r._reactInternals;t:{if(Xa(r)!==r||r.tag!==1)throw Error(e(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Kn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(e(171))}if(r.tag===1){var d=r.type;if(Kn(d))return $1(r,d,a)}return a}function vC(r,a,d,m,v,x,P,L,N){return r=Jw(d,m,!0,r,v,x,P,L,N),r.context=yC(null),d=r.current,m=jn(),v=jo(d),x=Er(m,v),x.callback=a??null,No(d,x,v),r.current.lanes=v,Ed(r,v,m),Zn(r,m),r}function ny(r,a,d,m){var v=a.current,x=jn(),P=jo(v);return d=yC(d),a.context===null?a.context=d:a.pendingContext=d,a=Er(x,P),a.payload={element:r},m=m===void 0?null:m,m!==null&&(a.callback=m),r=No(v,a,P),r!==null&&(ws(r,v,P,x),Lg(r,v,P)),P}function iy(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function wC(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<a?d:a}}function Zw(r,a){wC(r,a),(r=r.alternate)&&wC(r,a)}function OL(){return null}var bC=typeof reportError=="function"?reportError:function(r){console.error(r)};function tb(r){this._internalRoot=r}sy.prototype.render=tb.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(e(409));ny(r,a,null,null)},sy.prototype.unmount=tb.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;nl(function(){ny(null,r,null,null)}),a[wr]=null}};function sy(r){this._internalRoot=r}sy.prototype.unstable_scheduleHydration=function(r){if(r){var a=i1();r={blockedOn:null,target:r,priority:a};for(var d=0;d<_o.length&&a!==0&&a<_o[d].priority;d++);_o.splice(d,0,r),d===0&&o1(r)}};function eb(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ry(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function xC(){}function BL(r,a,d,m,v){if(v){if(typeof m=="function"){var x=m;m=function(){var W=iy(P);x.call(W)}}var P=vC(a,m,r,0,null,!1,!1,"",xC);return r._reactRootContainer=P,r[wr]=P.current,Bd(r.nodeType===8?r.parentNode:r),nl(),P}for(;v=r.lastChild;)r.removeChild(v);if(typeof m=="function"){var L=m;m=function(){var W=iy(N);L.call(W)}}var N=Jw(r,0,!1,null,null,!1,!1,"",xC);return r._reactRootContainer=N,r[wr]=N.current,Bd(r.nodeType===8?r.parentNode:r),nl(function(){ny(a,N,d,m)}),N}function oy(r,a,d,m,v){var x=d._reactRootContainer;if(x){var P=x;if(typeof v=="function"){var L=v;v=function(){var N=iy(P);L.call(N)}}ny(a,P,r,v)}else P=BL(d,a,r,v,m);return iy(P)}e1=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var d=Ad(a.pendingLanes);d!==0&&(C0(a,d|1),Zn(a,Fe()),(zt&6)===0&&(uu=Fe()+500,Lo()))}break;case 13:nl(function(){var m=Ar(r,1);if(m!==null){var v=jn();ws(m,r,1,v)}}),Zw(r,1)}},T0=function(r){if(r.tag===13){var a=Ar(r,134217728);if(a!==null){var d=jn();ws(a,r,134217728,d)}Zw(r,134217728)}},n1=function(r){if(r.tag===13){var a=jo(r),d=Ar(r,a);if(d!==null){var m=jn();ws(d,r,a,m)}Zw(r,a)}},i1=function(){return Yt},s1=function(r,a){var d=Yt;try{return Yt=r,a()}finally{Yt=d}},v0=function(r,a,d){switch(a){case"input":if(u0(r,d),a=d.name,d.type==="radio"&&a!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==r&&m.form===r.form){var v=Ag(m);if(!v)throw Error(e(90));Vc(m),u0(m,v)}}}break;case"textarea":LA(r,d);break;case"select":a=d.value,a!=null&&Uc(r,!!d.multiple,a,!1)}},zA=Gw,HA=nl;var jL={usingClientEntryPoint:!1,Events:[Ud,Qc,Ag,VA,UA,Gw]},ef={findFiberByHostInstance:Ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VL={bundleType:ef.bundleType,version:ef.version,rendererPackageName:ef.rendererPackageName,rendererConfig:ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=XA(r),r===null?null:r.stateNode},findFiberByHostInstance:ef.findFiberByHostInstance||OL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ay=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ay.isDisabled&&ay.supportsFiber)try{sg=ay.inject(VL),Os=ay}catch{}}return ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jL,ti.createPortal=function(r,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eb(a))throw Error(e(200));return FL(r,a,null,d)},ti.createRoot=function(r,a){if(!eb(r))throw Error(e(299));var d=!1,m="",v=bC;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Jw(r,1,!1,null,null,d,!1,m,v),r[wr]=a.current,Bd(r.nodeType===8?r.parentNode:r),new tb(a)},ti.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(e(188)):(r=Object.keys(r).join(","),Error(e(268,r)));return r=XA(a),r=r===null?null:r.stateNode,r},ti.flushSync=function(r){return nl(r)},ti.hydrate=function(r,a,d){if(!ry(a))throw Error(e(200));return oy(null,r,a,!0,d)},ti.hydrateRoot=function(r,a,d){if(!eb(r))throw Error(e(405));var m=d!=null&&d.hydratedSources||null,v=!1,x="",P=bC;if(d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),a=vC(a,null,r,1,d??null,v,!1,x,P),r[wr]=a.current,Bd(r),m)for(r=0;r<m.length;r++)d=m[r],v=d._getVersion,v=v(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,v]:a.mutableSourceEagerHydrationData.push(d,v);return new sy(a)},ti.render=function(r,a,d){if(!ry(a))throw Error(e(200));return oy(null,r,a,!1,d)},ti.unmountComponentAtNode=function(r){if(!ry(r))throw Error(e(40));return r._reactRootContainer?(nl(function(){oy(null,null,r,!1,function(){r._reactRootContainer=null,r[wr]=null})}),!0):!1},ti.unstable_batchedUpdates=Gw,ti.unstable_renderSubtreeIntoContainer=function(r,a,d,m){if(!ry(d))throw Error(e(200));if(r==null||r._reactInternals===void 0)throw Error(e(38));return oy(r,a,d,!1,m)},ti.version="18.3.1-next-f1338f8080-20240426",ti}var MC;function V_(){if(MC)return rb.exports;MC=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),rb.exports=QL(),rb.exports}var DC;function JL(){if(DC)return ly;DC=1;var s=V_();return ly.createRoot=s.createRoot,ly.hydrateRoot=s.hydrateRoot,ly}var ZL=JL();const t2=j_(ZL);V_();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vf(){return Vf=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},Vf.apply(this,arguments)}var Ba;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Ba||(Ba={}));const RC="popstate";function e2(s){s===void 0&&(s={});function t(n,i){let{pathname:o,search:l,hash:u}=n.location;return Lb("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:rv(i)}return i2(t,e,null,s)}function Te(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function kS(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function n2(){return Math.random().toString(36).substr(2,8)}function LC(s,t){return{usr:s.state,key:s.key,idx:t}}function Lb(s,t,e,n){return e===void 0&&(e=null),Vf({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?dd(t):t,{state:e,key:t&&t.key||n||n2()})}function rv(s){let{pathname:t="/",search:e="",hash:n=""}=s;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function dd(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substr(e),s=s.substr(0,e));let n=s.indexOf("?");n>=0&&(t.search=s.substr(n),s=s.substr(0,n)),s&&(t.pathname=s)}return t}function i2(s,t,e,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,l=i.history,u=Ba.Pop,h=null,f=p();f==null&&(f=0,l.replaceState(Vf({},l.state,{idx:f}),""));function p(){return(l.state||{idx:null}).idx}function g(){u=Ba.Pop;let C=p(),T=C==null?null:C-f;f=C,h&&h({action:u,location:S.location,delta:T})}function y(C,T){u=Ba.Push;let M=Lb(S.location,C,T);f=p()+1;let k=LC(M,f),D=S.createHref(M);try{l.pushState(k,"",D)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(D)}o&&h&&h({action:u,location:S.location,delta:1})}function w(C,T){u=Ba.Replace;let M=Lb(S.location,C,T);f=p();let k=LC(M,f),D=S.createHref(M);l.replaceState(k,"",D),o&&h&&h({action:u,location:S.location,delta:0})}function A(C){let T=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof C=="string"?C:rv(C);return M=M.replace(/ $/,"%20"),Te(T,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,T)}let S={get action(){return u},get location(){return s(i,l)},listen(C){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(RC,g),h=C,()=>{i.removeEventListener(RC,g),h=null}},createHref(C){return t(i,C)},createURL:A,encodeLocation(C){let T=A(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:w,go(C){return l.go(C)}};return S}var IC;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(IC||(IC={}));function s2(s,t,e){return e===void 0&&(e="/"),r2(s,t,e)}function r2(s,t,e,n){let i=typeof t=="string"?dd(t):t,o=ad(i.pathname||"/",e);if(o==null)return null;let l=U_(s);o2(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=y2(o);u=m2(l[h],f)}return u}function U_(s,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let i=(o,l,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(Te(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=ja([n,h.relativePath]),p=e.concat(h);o.children&&o.children.length>0&&(Te(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),U_(o.children,t,p,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:f2(f,o.index),routesMeta:p})};return s.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let h of z_(o.path))i(o,l,h)}),t}function z_(s){let t=s.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let l=z_(n.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...l),u.map(h=>s.startsWith("/")&&h===""?"/":h)}function o2(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:p2(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const a2=/^:[\w-]+$/,l2=3,c2=2,u2=1,h2=10,d2=-2,NC=s=>s==="*";function f2(s,t){let e=s.split("/"),n=e.length;return e.some(NC)&&(n+=d2),t&&(n+=c2),e.filter(i=>!NC(i)).reduce((i,o)=>i+(a2.test(o)?l2:o===""?u2:h2),n)}function p2(s,t){return s.length===t.length&&s.slice(0,-1).every((n,i)=>n===t[i])?s[s.length-1]-t[t.length-1]:0}function m2(s,t,e){let{routesMeta:n}=s,i={},o="/",l=[];for(let u=0;u<n.length;++u){let h=n[u],f=u===n.length-1,p=o==="/"?t:t.slice(o.length)||"/",g=Ib({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),y=h.route;if(!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:ja([o,g.pathname]),pathnameBase:S2(ja([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=ja([o,g.pathnameBase]))}return l}function Ib(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,n]=g2(s.path,s.caseSensitive,s.end),i=t.match(e);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((f,p,g)=>{let{paramName:y,isOptional:w}=p;if(y==="*"){let S=u[g]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const A=u[g];return w&&!A?f[y]=void 0:f[y]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:s}}function g2(s,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),kS(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let n=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function y2(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kS(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function ad(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=s.charAt(e);return n&&n!=="/"?null:s.slice(e)||"/"}const v2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w2=s=>v2.test(s);function b2(s,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:i=""}=typeof s=="string"?dd(s):s,o;if(e)if(w2(e))o=e;else{if(e.includes("//")){let l=e;e=e.replace(/\/\/+/g,"/"),kS(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+e))}e.startsWith("/")?o=FC(e.substring(1),"/"):o=FC(e,t)}else o=t;return{pathname:o,search:A2(n),hash:E2(i)}}function FC(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function lb(s,t,e,n){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x2(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function MS(s,t){let e=x2(s);return t?e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function DS(s,t,e,n){n===void 0&&(n=!1);let i;typeof s=="string"?i=dd(s):(i=Vf({},s),Te(!i.pathname||!i.pathname.includes("?"),lb("?","pathname","search",i)),Te(!i.pathname||!i.pathname.includes("#"),lb("#","pathname","hash",i)),Te(!i.search||!i.search.includes("#"),lb("#","search","hash",i)));let o=s===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=e;else{let g=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?t[g]:"/"}let h=b2(i,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const ja=s=>s.join("/").replace(/\/\/+/g,"/"),S2=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),A2=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,E2=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function C2(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const H_=["post","put","patch","delete"];new Set(H_);const T2=["get",...H_];new Set(T2);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uf(){return Uf=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},Uf.apply(this,arguments)}const Yv=U.createContext(null),W_=U.createContext(null),So=U.createContext(null),qv=U.createContext(null),Ao=U.createContext({outlet:null,matches:[],isDataRoute:!1}),$_=U.createContext(null);function _2(s,t){let{relative:e}=t===void 0?{}:t;fd()||Te(!1);let{basename:n,navigator:i}=U.useContext(So),{hash:o,pathname:l,search:u}=Kv(s,{relative:e}),h=l;return n!=="/"&&(h=l==="/"?n:ja([n,l])),i.createHref({pathname:h,search:u,hash:o})}function fd(){return U.useContext(qv)!=null}function Fc(){return fd()||Te(!1),U.useContext(qv).location}function G_(s){U.useContext(So).static||U.useLayoutEffect(s)}function RS(){let{isDataRoute:s}=U.useContext(Ao);return s?z2():P2()}function P2(){fd()||Te(!1);let s=U.useContext(Yv),{basename:t,future:e,navigator:n}=U.useContext(So),{matches:i}=U.useContext(Ao),{pathname:o}=Fc(),l=JSON.stringify(MS(i,e.v7_relativeSplatPath)),u=U.useRef(!1);return G_(()=>{u.current=!0}),U.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){n.go(f);return}let g=DS(f,JSON.parse(l),o,p.relative==="path");s==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ja([t,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[t,n,l,o,s])}const k2=U.createContext(null);function M2(s){let t=U.useContext(Ao).outlet;return t&&U.createElement(k2.Provider,{value:s},t)}function Kv(s,t){let{relative:e}=t===void 0?{}:t,{future:n}=U.useContext(So),{matches:i}=U.useContext(Ao),{pathname:o}=Fc(),l=JSON.stringify(MS(i,n.v7_relativeSplatPath));return U.useMemo(()=>DS(s,JSON.parse(l),o,e==="path"),[s,l,o,e])}function D2(s,t){return R2(s,t)}function R2(s,t,e,n){fd()||Te(!1);let{navigator:i}=U.useContext(So),{matches:o}=U.useContext(Ao),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let f=Fc(),p;if(t){var g;let C=typeof t=="string"?dd(t):t;h==="/"||(g=C.pathname)!=null&&g.startsWith(h)||Te(!1),p=C}else p=f;let y=p.pathname||"/",w=y;if(h!=="/"){let C=h.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let A=s2(s,{pathname:w}),S=O2(A&&A.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:ja([h,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:ja([h,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,e,n);return t&&S?U.createElement(qv.Provider,{value:{location:Uf({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ba.Pop}},S):S}function L2(){let s=U2(),t=C2(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),e?U.createElement("pre",{style:i},e):null,null)}const I2=U.createElement(L2,null);class N2 extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?U.createElement(Ao.Provider,{value:this.props.routeContext},U.createElement($_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F2(s){let{routeContext:t,match:e,children:n}=s,i=U.useContext(Yv);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Ao.Provider,{value:t},n)}function O2(s,t,e,n){var i;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),s==null){var o;if(!e)return null;if(e.errors)s=e.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let l=s,u=(i=e)==null?void 0:i.errors;if(u!=null){let p=l.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);p>=0||Te(!1),l=l.slice(0,Math.min(l.length,p+1))}let h=!1,f=-1;if(e&&n&&n.v7_partialHydration)for(let p=0;p<l.length;p++){let g=l[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:y,errors:w}=e,A=g.route.loader&&y[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||A){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((p,g,y)=>{let w,A=!1,S=null,C=null;e&&(w=u&&g.route.id?u[g.route.id]:void 0,S=g.route.errorElement||I2,h&&(f<0&&y===0?(H2("route-fallback"),A=!0,C=null):f===y&&(A=!0,C=g.route.hydrateFallbackElement||null)));let T=t.concat(l.slice(0,y+1)),M=()=>{let k;return w?k=S:A?k=C:g.route.Component?k=U.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=p,U.createElement(F2,{match:g,routeContext:{outlet:p,matches:T,isDataRoute:e!=null},children:k})};return e&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?U.createElement(N2,{location:e.location,revalidation:e.revalidation,component:S,error:w,children:M(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):M()},null)}var X_=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(X_||{}),Y_=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(Y_||{});function B2(s){let t=U.useContext(Yv);return t||Te(!1),t}function j2(s){let t=U.useContext(W_);return t||Te(!1),t}function V2(s){let t=U.useContext(Ao);return t||Te(!1),t}function q_(s){let t=V2(),e=t.matches[t.matches.length-1];return e.route.id||Te(!1),e.route.id}function U2(){var s;let t=U.useContext($_),e=j2(),n=q_();return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function z2(){let{router:s}=B2(X_.UseNavigateStable),t=q_(Y_.UseNavigateStable),e=U.useRef(!1);return G_(()=>{e.current=!0}),U.useCallback(function(i,o){o===void 0&&(o={}),e.current&&(typeof i=="number"?s.navigate(i):s.navigate(i,Uf({fromRouteId:t},o)))},[s,t])}const OC={};function H2(s,t,e){OC[s]||(OC[s]=!0)}function W2(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function $2(s){let{to:t,replace:e,state:n,relative:i}=s;fd()||Te(!1);let{future:o,static:l}=U.useContext(So),{matches:u}=U.useContext(Ao),{pathname:h}=Fc(),f=RS(),p=DS(t,MS(u,o.v7_relativeSplatPath),h,i==="path"),g=JSON.stringify(p);return U.useEffect(()=>f(JSON.parse(g),{replace:e,state:n,relative:i}),[f,g,i,e,n]),null}function Nb(s){return M2(s.context)}function Wo(s){Te(!1)}function G2(s){let{basename:t="/",children:e=null,location:n,navigationType:i=Ba.Pop,navigator:o,static:l=!1,future:u}=s;fd()&&Te(!1);let h=t.replace(/^\/*/,"/"),f=U.useMemo(()=>({basename:h,navigator:o,static:l,future:Uf({v7_relativeSplatPath:!1},u)}),[h,u,o,l]);typeof n=="string"&&(n=dd(n));let{pathname:p="/",search:g="",hash:y="",state:w=null,key:A="default"}=n,S=U.useMemo(()=>{let C=ad(p,h);return C==null?null:{location:{pathname:C,search:g,hash:y,state:w,key:A},navigationType:i}},[h,p,g,y,w,A,i]);return S==null?null:U.createElement(So.Provider,{value:f},U.createElement(qv.Provider,{children:e,value:S}))}function X2(s){let{children:t,location:e}=s;return D2(Fb(t),e)}new Promise(()=>{});function Fb(s,t){t===void 0&&(t=[]);let e=[];return U.Children.forEach(s,(n,i)=>{if(!U.isValidElement(n))return;let o=[...t,i];if(n.type===U.Fragment){e.push.apply(e,Fb(n.props.children,o));return}n.type!==Wo&&Te(!1),!n.props.index||!n.props.children||Te(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Fb(n.props.children,o)),e.push(l)}),e}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ov(){return ov=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},ov.apply(this,arguments)}function K_(s,t){if(s==null)return{};var e={},n=Object.keys(s),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(e[i]=s[i]);return e}function Y2(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function q2(s,t){return s.button===0&&(!t||t==="_self")&&!Y2(s)}const K2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Q2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],J2="6";try{window.__reactRouterVersion=J2}catch{}const Z2=U.createContext({isTransitioning:!1}),tI="startTransition",BC=YL[tI];function eI(s){let{basename:t,children:e,future:n,window:i}=s,o=U.useRef();o.current==null&&(o.current=e2({window:i,v5Compat:!0}));let l=o.current,[u,h]=U.useState({action:l.action,location:l.location}),{v7_startTransition:f}=n||{},p=U.useCallback(g=>{f&&BC?BC(()=>h(g)):h(g)},[h,f]);return U.useLayoutEffect(()=>l.listen(p),[l,p]),U.useEffect(()=>W2(n),[n]),U.createElement(G2,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l,future:n})}const nI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sI=U.forwardRef(function(t,e){let{onClick:n,relative:i,reloadDocument:o,replace:l,state:u,target:h,to:f,preventScrollReset:p,viewTransition:g}=t,y=K_(t,K2),{basename:w}=U.useContext(So),A,S=!1;if(typeof f=="string"&&iI.test(f)&&(A=f,nI))try{let k=new URL(window.location.href),D=f.startsWith("//")?new URL(k.protocol+f):new URL(f),R=ad(D.pathname,w);D.origin===k.origin&&R!=null?f=R+D.search+D.hash:S=!0}catch{}let C=_2(f,{relative:i}),T=aI(f,{replace:l,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:g});function M(k){n&&n(k),k.defaultPrevented||T(k)}return U.createElement("a",ov({},y,{href:A||C,onClick:S||o?n:M,ref:e,target:h}))}),rI=U.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:i=!1,className:o="",end:l=!1,style:u,to:h,viewTransition:f,children:p}=t,g=K_(t,Q2),y=Kv(h,{relative:g.relative}),w=Fc(),A=U.useContext(W_),{navigator:S,basename:C}=U.useContext(So),T=A!=null&&lI(y)&&f===!0,M=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,k=w.pathname,D=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(k=k.toLowerCase(),D=D?D.toLowerCase():null,M=M.toLowerCase()),D&&C&&(D=ad(D,C)||D);const R=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let I=k===M||!l&&k.startsWith(M)&&k.charAt(R)==="/",j=D!=null&&(D===M||!l&&D.startsWith(M)&&D.charAt(M.length)==="/"),H={isActive:I,isPending:j,isTransitioning:T},X=I?n:void 0,Q;typeof o=="function"?Q=o(H):Q=[o,I?"active":null,j?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let Z=typeof u=="function"?u(H):u;return U.createElement(sI,ov({},g,{"aria-current":X,className:Q,ref:e,style:Z,to:h,viewTransition:f}),typeof p=="function"?p(H):p)});var Ob;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Ob||(Ob={}));var jC;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(jC||(jC={}));function oI(s){let t=U.useContext(Yv);return t||Te(!1),t}function aI(s,t){let{target:e,replace:n,state:i,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,h=RS(),f=Fc(),p=Kv(s,{relative:l});return U.useCallback(g=>{if(q2(g,e)){g.preventDefault();let y=n!==void 0?n:rv(f)===rv(p);h(s,{replace:y,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[f,h,p,n,i,e,s,o,l,u])}function lI(s,t){t===void 0&&(t={});let e=U.useContext(Z2);e==null&&Te(!1);let{basename:n}=oI(Ob.useViewTransitionState),i=Kv(s,{relative:t.relative});if(!e.isTransitioning)return!1;let o=ad(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=ad(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Ib(i.pathname,l)!=null||Ib(i.pathname,o)!=null}function av(){return console.warn("Supabase environment variables are not configured. Auth will be disabled/mocked."),null}function cI(){const[s,t]=U.useState(null),[e,n]=U.useState(!0);U.useEffect(()=>{const o=av();if(!o){n(!1);return}o.auth.getSession().then(({data:{session:u}})=>{t(u),n(!1)});const{data:{subscription:l}}=o.auth.onAuthStateChange((u,h)=>{t(h),n(!1)});return()=>l.unsubscribe()},[]);const i=av()!==null;return e?F.jsx("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#050505] text-white",children:F.jsx("div",{className:"animate-pulse tracking-widest text-xs uppercase text-gray-500 mb-4",children:"Verifying Clearance..."})}):i?s?F.jsx(Nb,{}):F.jsx($2,{to:"/auth",replace:!0}):F.jsx(Nb,{})}const LS=U.createContext({});function IS(s){const t=U.useRef(null);return t.current===null&&(t.current=s()),t.current}const Qv=U.createContext(null),NS=U.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class uI extends U.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function hI({children:s,isPresent:t}){const e=U.useId(),n=U.useRef(null),i=U.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=U.useContext(NS);return U.useInsertionEffect(()=>{const{width:l,height:u,top:h,left:f}=i.current;if(t||!n.current||!l||!u)return;n.current.dataset.motionPopId=e;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[t]),F.jsx(uI,{isPresent:t,childRef:n,sizeRef:i,children:U.cloneElement(s,{ref:n})})}const dI=({children:s,initial:t,isPresent:e,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:l})=>{const u=IS(fI),h=U.useId(),f=U.useCallback(g=>{u.set(g,!0);for(const y of u.values())if(!y)return;n&&n()},[u,n]),p=U.useMemo(()=>({id:h,initial:t,isPresent:e,custom:i,onExitComplete:f,register:g=>(u.set(g,!1),()=>u.delete(g))}),o?[Math.random(),f]:[e,f]);return U.useMemo(()=>{u.forEach((g,y)=>u.set(y,!1))},[e]),U.useEffect(()=>{!e&&!u.size&&n&&n()},[e]),l==="popLayout"&&(s=F.jsx(hI,{isPresent:e,children:s})),F.jsx(Qv.Provider,{value:p,children:s})};function fI(){return new Map}function Q_(s=!0){const t=U.useContext(Qv);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,o=U.useId();U.useEffect(()=>{s&&i(o)},[s]);const l=U.useCallback(()=>s&&n&&n(o),[o,n,s]);return!e&&n?[!1,l]:[!0]}const cy=s=>s.key||"";function VC(s){const t=[];return U.Children.forEach(s,e=>{U.isValidElement(e)&&t.push(e)}),t}const FS=typeof window<"u",J_=FS?U.useLayoutEffect:U.useEffect,pI=({children:s,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1})=>{const[u,h]=Q_(l),f=U.useMemo(()=>VC(s),[s]),p=l&&!u?[]:f.map(cy),g=U.useRef(!0),y=U.useRef(f),w=IS(()=>new Map),[A,S]=U.useState(f),[C,T]=U.useState(f);J_(()=>{g.current=!1,y.current=f;for(let D=0;D<C.length;D++){const R=cy(C[D]);p.includes(R)?w.delete(R):w.get(R)!==!0&&w.set(R,!1)}},[C,p.length,p.join("-")]);const M=[];if(f!==A){let D=[...f];for(let R=0;R<C.length;R++){const I=C[R],j=cy(I);p.includes(j)||(D.splice(R,0,I),M.push(I))}o==="wait"&&M.length&&(D=M),T(VC(D)),S(f);return}const{forceRender:k}=U.useContext(LS);return F.jsx(F.Fragment,{children:C.map(D=>{const R=cy(D),I=l&&!u?!1:f===C||p.includes(R),j=()=>{if(w.has(R))w.set(R,!0);else return;let H=!0;w.forEach(X=>{X||(H=!1)}),H&&(k==null||k(),T(y.current),l&&(h==null||h()),n&&n())};return F.jsx(dI,{isPresent:I,initial:!g.current||e?void 0:!1,custom:I?void 0:t,presenceAffectsLayout:i,mode:o,onExitComplete:I?void 0:j,children:D},R)})})},Oi=s=>s;let Z_=Oi;function OS(s){let t;return()=>(t===void 0&&(t=s()),t)}const ld=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n},po=s=>s*1e3,mo=s=>s/1e3,mI={useManualTiming:!1};function gI(s){let t=new Set,e=new Set,n=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),s()),f(l)}const h={schedule:(f,p=!1,g=!1)=>{const w=g&&n?t:e;return p&&o.add(f),w.has(f)||w.add(f),f},cancel:f=>{e.delete(f),o.delete(f)},process:f=>{if(l=f,n){i=!0;return}n=!0,[t,e]=[e,t],t.forEach(u),t.clear(),n=!1,i&&(i=!1,h.process(f))}};return h}const uy=["read","resolveKeyframes","update","preRender","render","postRender"],yI=40;function tP(s,t){let e=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,l=uy.reduce((T,M)=>(T[M]=gI(o),T),{}),{read:u,resolveKeyframes:h,update:f,preRender:p,render:g,postRender:y}=l,w=()=>{const T=performance.now();e=!1,i.delta=n?1e3/60:Math.max(Math.min(T-i.timestamp,yI),1),i.timestamp=T,i.isProcessing=!0,u.process(i),h.process(i),f.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,e&&t&&(n=!1,s(w))},A=()=>{e=!0,n=!0,i.isProcessing||s(w)};return{schedule:uy.reduce((T,M)=>{const k=l[M];return T[M]=(D,R=!1,I=!1)=>(e||A(),k.schedule(D,R,I)),T},{}),cancel:T=>{for(let M=0;M<uy.length;M++)l[uy[M]].cancel(T)},state:i,steps:l}}const{schedule:ge,cancel:Va,state:xn,steps:cb}=tP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Oi,!0),eP=U.createContext({strict:!1}),UC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cd={};for(const s in UC)cd[s]={isEnabled:t=>UC[s].some(e=>!!t[e])};function vI(s){for(const t in s)cd[t]={...cd[t],...s[t]}}const wI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lv(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||wI.has(s)}let nP=s=>!lv(s);function bI(s){s&&(nP=t=>t.startsWith("on")?!lv(t):s(t))}try{bI(require("@emotion/is-prop-valid").default)}catch{}function xI(s,t,e){const n={};for(const i in s)i==="values"&&typeof s.values=="object"||(nP(i)||e===!0&&lv(i)||!t&&!lv(i)||s.draggable&&i.startsWith("onDrag"))&&(n[i]=s[i]);return n}function SI(s){if(typeof Proxy>"u")return s;const t=new Map,e=(...n)=>s(...n);return new Proxy(e,{get:(n,i)=>i==="create"?s:(t.has(i)||t.set(i,s(i)),t.get(i))})}const Jv=U.createContext({});function zf(s){return typeof s=="string"||Array.isArray(s)}function Zv(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const BS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jS=["initial",...BS];function t0(s){return Zv(s.animate)||jS.some(t=>zf(s[t]))}function iP(s){return!!(t0(s)||s.variants)}function AI(s,t){if(t0(s)){const{initial:e,animate:n}=s;return{initial:e===!1||zf(e)?e:void 0,animate:zf(n)?n:void 0}}return s.inherit!==!1?t:{}}function EI(s){const{initial:t,animate:e}=AI(s,U.useContext(Jv));return U.useMemo(()=>({initial:t,animate:e}),[zC(t),zC(e)])}function zC(s){return Array.isArray(s)?s.join(" "):s}const CI=Symbol.for("motionComponentSymbol");function Au(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function TI(s,t,e){return U.useCallback(n=>{n&&s.onMount&&s.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Au(e)&&(e.current=n))},[t])}const VS=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_I="framerAppearId",sP="data-"+VS(_I),{schedule:US}=tP(queueMicrotask,!1),rP=U.createContext({});function PI(s,t,e,n,i){var o,l;const{visualElement:u}=U.useContext(Jv),h=U.useContext(eP),f=U.useContext(Qv),p=U.useContext(NS).reducedMotion,g=U.useRef(null);n=n||h.renderer,!g.current&&n&&(g.current=n(s,{visualState:t,parent:u,props:e,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const y=g.current,w=U.useContext(rP);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&kI(g.current,e,i,w);const A=U.useRef(!1);U.useInsertionEffect(()=>{y&&A.current&&y.update(e,f)});const S=e[sP],C=U.useRef(!!S&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,S))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,S)));return J_(()=>{y&&(A.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),US.render(y.render),C.current&&y.animationState&&y.animationState.animateChanges())}),U.useEffect(()=>{y&&(!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,S)}),C.current=!1))}),y}function kI(s,t,e,n){const{layoutId:i,layout:o,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:f}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:oP(s.parent)),s.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||u&&Au(u),visualElement:s,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,layoutScroll:h,layoutRoot:f})}function oP(s){if(s)return s.options.allowProjection!==!1?s.projection:oP(s.parent)}function MI({preloadedFeatures:s,createVisualElement:t,useRender:e,useVisualState:n,Component:i}){var o,l;s&&vI(s);function u(f,p){let g;const y={...U.useContext(NS),...f,layoutId:DI(f)},{isStatic:w}=y,A=EI(f),S=n(f,w);if(!w&&FS){RI();const C=LI(y);g=C.MeasureLayout,A.visualElement=PI(i,S,y,t,C.ProjectionNode)}return F.jsxs(Jv.Provider,{value:A,children:[g&&A.visualElement?F.jsx(g,{visualElement:A.visualElement,...y}):null,e(i,f,TI(S,A.visualElement,p),S,w,A.visualElement)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${(l=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&l!==void 0?l:""})`}`;const h=U.forwardRef(u);return h[CI]=i,h}function DI({layoutId:s}){const t=U.useContext(LS).id;return t&&s!==void 0?t+"-"+s:s}function RI(s,t){U.useContext(eP).strict}function LI(s){const{drag:t,layout:e}=cd;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(s)||e!=null&&e.isEnabled(s)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const II=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zS(s){return typeof s!="string"||s.includes("-")?!1:!!(II.indexOf(s)>-1||/[A-Z]/u.test(s))}function HC(s){const t=[{},{}];return s==null||s.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function HS(s,t,e,n){if(typeof t=="function"){const[i,o]=HC(n);t=t(e!==void 0?e:s.custom,i,o)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[i,o]=HC(n);t=t(e!==void 0?e:s.custom,i,o)}return t}const Bb=s=>Array.isArray(s),NI=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),FI=s=>Bb(s)?s[s.length-1]||0:s,On=s=>!!(s&&s.getVelocity);function Sy(s){const t=On(s)?s.get():s;return NI(t)?t.toValue():t}function OI({scrapeMotionValuesFromProps:s,createRenderState:t,onUpdate:e},n,i,o){const l={latestValues:BI(n,i,o,s),renderState:t()};return e&&(l.onMount=u=>e({props:n,current:u,...l}),l.onUpdate=u=>e(u)),l}const aP=s=>(t,e)=>{const n=U.useContext(Jv),i=U.useContext(Qv),o=()=>OI(s,t,n,i);return e?o():IS(o)};function BI(s,t,e,n){const i={},o=n(s,{});for(const y in o)i[y]=Sy(o[y]);let{initial:l,animate:u}=s;const h=t0(s),f=iP(s);t&&f&&!h&&s.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const g=p?u:l;if(g&&typeof g!="boolean"&&!Zv(g)){const y=Array.isArray(g)?g:[g];for(let w=0;w<y.length;w++){const A=HS(s,y[w]);if(A){const{transitionEnd:S,transition:C,...T}=A;for(const M in T){let k=T[M];if(Array.isArray(k)){const D=p?k.length-1:0;k=k[D]}k!==null&&(i[M]=k)}for(const M in S)i[M]=S[M]}}}return i}const pd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Oc=new Set(pd),lP=s=>t=>typeof t=="string"&&t.startsWith(s),cP=lP("--"),jI=lP("var(--"),WS=s=>jI(s)?VI.test(s.split("/*")[0].trim()):!1,VI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uP=(s,t)=>t&&typeof s=="number"?t.transform(s):s,wo=(s,t,e)=>e>t?t:e<s?s:e,md={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Hf={...md,transform:s=>wo(0,1,s)},hy={...md,default:1},Hm=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),$o=Hm("deg"),pr=Hm("%"),Et=Hm("px"),UI=Hm("vh"),zI=Hm("vw"),WC={...pr,parse:s=>pr.parse(s)/100,transform:s=>pr.transform(s*100)},HI={borderWidth:Et,borderTopWidth:Et,borderRightWidth:Et,borderBottomWidth:Et,borderLeftWidth:Et,borderRadius:Et,radius:Et,borderTopLeftRadius:Et,borderTopRightRadius:Et,borderBottomRightRadius:Et,borderBottomLeftRadius:Et,width:Et,maxWidth:Et,height:Et,maxHeight:Et,top:Et,right:Et,bottom:Et,left:Et,padding:Et,paddingTop:Et,paddingRight:Et,paddingBottom:Et,paddingLeft:Et,margin:Et,marginTop:Et,marginRight:Et,marginBottom:Et,marginLeft:Et,backgroundPositionX:Et,backgroundPositionY:Et},WI={rotate:$o,rotateX:$o,rotateY:$o,rotateZ:$o,scale:hy,scaleX:hy,scaleY:hy,scaleZ:hy,skew:$o,skewX:$o,skewY:$o,distance:Et,translateX:Et,translateY:Et,translateZ:Et,x:Et,y:Et,z:Et,perspective:Et,transformPerspective:Et,opacity:Hf,originX:WC,originY:WC,originZ:Et},$C={...md,transform:Math.round},$S={...HI,...WI,zIndex:$C,size:Et,fillOpacity:Hf,strokeOpacity:Hf,numOctaves:$C},$I={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GI=pd.length;function XI(s,t,e){let n="",i=!0;for(let o=0;o<GI;o++){const l=pd[o],u=s[l];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(l.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||e){const f=uP(u,$S[l]);if(!h){i=!1;const p=$I[l]||l;n+=`${p}(${f}) `}e&&(t[l]=f)}}return n=n.trim(),e?n=e(t,i?"":n):i&&(n="none"),n}function GS(s,t,e){const{style:n,vars:i,transformOrigin:o}=s;let l=!1,u=!1;for(const h in t){const f=t[h];if(Oc.has(h)){l=!0;continue}else if(cP(h)){i[h]=f;continue}else{const p=uP(f,$S[h]);h.startsWith("origin")?(u=!0,o[h]=p):n[h]=p}}if(t.transform||(l||e?n.transform=XI(t,s.transform,e):n.transform&&(n.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=o;n.transformOrigin=`${h} ${f} ${p}`}}const YI={offset:"stroke-dashoffset",array:"stroke-dasharray"},qI={offset:"strokeDashoffset",array:"strokeDasharray"};function KI(s,t,e=1,n=0,i=!0){s.pathLength=1;const o=i?YI:qI;s[o.offset]=Et.transform(-n);const l=Et.transform(t),u=Et.transform(e);s[o.array]=`${l} ${u}`}function GC(s,t,e){return typeof s=="string"?s:Et.transform(t+e*s)}function QI(s,t,e){const n=GC(t,s.x,s.width),i=GC(e,s.y,s.height);return`${n} ${i}`}function XS(s,{attrX:t,attrY:e,attrScale:n,originX:i,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:h=0,...f},p,g){if(GS(s,f,g),p){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:y,style:w,dimensions:A}=s;y.transform&&(A&&(w.transform=y.transform),delete y.transform),A&&(i!==void 0||o!==void 0||w.transform)&&(w.transformOrigin=QI(A,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),n!==void 0&&(y.scale=n),l!==void 0&&KI(y,l,u,h,!1)}const YS=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),hP=()=>({...YS(),attrs:{}}),qS=s=>typeof s=="string"&&s.toLowerCase()==="svg";function dP(s,{style:t,vars:e},n,i){Object.assign(s.style,t,i&&i.getProjectionStyles(n));for(const o in e)s.style.setProperty(o,e[o])}const fP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pP(s,t,e,n){dP(s,t,void 0,n);for(const i in t.attrs)s.setAttribute(fP.has(i)?i:VS(i),t.attrs[i])}const cv={};function JI(s){Object.assign(cv,s)}function mP(s,{layout:t,layoutId:e}){return Oc.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!cv[s]||s==="opacity")}function KS(s,t,e){var n;const{style:i}=s,o={};for(const l in i)(On(i[l])||t.style&&On(t.style[l])||mP(l,s)||((n=e==null?void 0:e.getValue(l))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(o[l]=i[l]);return o}function gP(s,t,e){const n=KS(s,t,e);for(const i in s)if(On(s[i])||On(t[i])){const o=pd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[o]=s[i]}return n}function ZI(s,t){try{t.dimensions=typeof s.getBBox=="function"?s.getBBox():s.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const XC=["x","y","width","height","cx","cy","r"],tN={useVisualState:aP({scrapeMotionValuesFromProps:gP,createRenderState:hP,onUpdate:({props:s,prevProps:t,current:e,renderState:n,latestValues:i})=>{if(!e)return;let o=!!s.drag;if(!o){for(const u in i)if(Oc.has(u)){o=!0;break}}if(!o)return;let l=!t;if(t)for(let u=0;u<XC.length;u++){const h=XC[u];s[h]!==t[h]&&(l=!0)}l&&ge.read(()=>{ZI(e,n),ge.render(()=>{XS(n,i,qS(e.tagName),s.transformTemplate),pP(e,n)})})}})},eN={useVisualState:aP({scrapeMotionValuesFromProps:KS,createRenderState:YS})};function yP(s,t,e){for(const n in t)!On(t[n])&&!mP(n,e)&&(s[n]=t[n])}function nN({transformTemplate:s},t){return U.useMemo(()=>{const e=YS();return GS(e,t,s),Object.assign({},e.vars,e.style)},[t])}function iN(s,t){const e=s.style||{},n={};return yP(n,e,s),Object.assign(n,nN(s,t)),n}function sN(s,t){const e={},n=iN(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}function rN(s,t,e,n){const i=U.useMemo(()=>{const o=hP();return XS(o,t,qS(n),s.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(s.style){const o={};yP(o,s.style,s),i.style={...o,...i.style}}return i}function oN(s=!1){return(e,n,i,{latestValues:o},l)=>{const h=(zS(e)?rN:sN)(n,o,l,e),f=xI(n,typeof e=="string",s),p=e!==U.Fragment?{...f,...h,ref:i}:{},{children:g}=n,y=U.useMemo(()=>On(g)?g.get():g,[g]);return U.createElement(e,{...p,children:y})}}function aN(s,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...zS(n)?tN:eN,preloadedFeatures:s,useRender:oN(i),createVisualElement:t,Component:n};return MI(l)}}function vP(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}function e0(s,t,e){const n=s.getProps();return HS(n,t,e!==void 0?e:n.custom,s)}const lN=OS(()=>window.ScrollTimeline!==void 0);class cN{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map(i=>{if(lN()&&i.attachTimeline)return i.attachTimeline(t);if(typeof e=="function")return e(i)});return()=>{n.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class uN extends cN{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function QS(s,t){return s?s[t]||s.default||s:void 0}const jb=2e4;function wP(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<jb;)t+=e,n=s.next(t);return t>=jb?1/0:t}function JS(s){return typeof s=="function"}function YC(s,t){s.timeline=t,s.onfinish=null}const ZS=s=>Array.isArray(s)&&typeof s[0]=="number",hN={linearEasing:void 0};function dN(s,t){const e=OS(s);return()=>{var n;return(n=hN[t])!==null&&n!==void 0?n:e()}}const uv=dN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bP=(s,t,e=10)=>{let n="";const i=Math.max(Math.round(t/e),2);for(let o=0;o<i;o++)n+=s(ld(0,i-1,o))+", ";return`linear(${n.substring(0,n.length-2)})`};function xP(s){return!!(typeof s=="function"&&uv()||!s||typeof s=="string"&&(s in Vb||uv())||ZS(s)||Array.isArray(s)&&s.every(xP))}const df=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,Vb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:df([0,.65,.55,1]),circOut:df([.55,0,1,.45]),backIn:df([.31,.01,.66,-.59]),backOut:df([.33,1.53,.69,.99])};function SP(s,t){if(s)return typeof s=="function"&&uv()?bP(s,t):ZS(s)?df(s):Array.isArray(s)?s.map(e=>SP(e,t)||Vb.easeOut):Vb[s]}const xs={x:!1,y:!1};function AP(){return xs.x||xs.y}function fN(s,t,e){var n;if(s instanceof Element)return[s];if(typeof s=="string"){let i=document;const o=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(s);return o?Array.from(o):[]}return Array.from(s)}function EP(s,t){const e=fN(s),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[e,i,()=>n.abort()]}function qC(s){return t=>{t.pointerType==="touch"||AP()||s(t)}}function pN(s,t,e={}){const[n,i,o]=EP(s,e),l=qC(u=>{const{target:h}=u,f=t(u);if(typeof f!="function"||!h)return;const p=qC(g=>{f(g),h.removeEventListener("pointerleave",p)});h.addEventListener("pointerleave",p,i)});return n.forEach(u=>{u.addEventListener("pointerenter",l,i)}),o}const CP=(s,t)=>t?s===t?!0:CP(s,t.parentElement):!1,tA=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,mN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gN(s){return mN.has(s.tagName)||s.tabIndex!==-1}const ff=new WeakSet;function KC(s){return t=>{t.key==="Enter"&&s(t)}}function ub(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const yN=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=KC(()=>{if(ff.has(e))return;ub(e,"down");const i=KC(()=>{ub(e,"up")}),o=()=>ub(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function QC(s){return tA(s)&&!AP()}function vN(s,t,e={}){const[n,i,o]=EP(s,e),l=u=>{const h=u.currentTarget;if(!QC(u)||ff.has(h))return;ff.add(h);const f=t(u),p=(w,A)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),!(!QC(w)||!ff.has(h))&&(ff.delete(h),typeof f=="function"&&f(w,{success:A}))},g=w=>{p(w,e.useGlobalTarget||CP(h,w.target))},y=w=>{p(w,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return n.forEach(u=>{!gN(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),u.addEventListener("focus",f=>yN(f,i),i)}),o}function wN(s){return s==="x"||s==="y"?xs[s]?null:(xs[s]=!0,()=>{xs[s]=!1}):xs.x||xs.y?null:(xs.x=xs.y=!0,()=>{xs.x=xs.y=!1})}const TP=new Set(["width","height","top","left","right","bottom",...pd]);let Ay;function bN(){Ay=void 0}const mr={now:()=>(Ay===void 0&&mr.set(xn.isProcessing||mI.useManualTiming?xn.timestamp:performance.now()),Ay),set:s=>{Ay=s,queueMicrotask(bN)}};function eA(s,t){s.indexOf(t)===-1&&s.push(t)}function nA(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}class iA{constructor(){this.subscriptions=[]}add(t){return eA(this.subscriptions,t),()=>nA(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,n);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function _P(s,t){return t?s*(1e3/t):0}const JC=30,xN=s=>!isNaN(parseFloat(s));class SN{constructor(t,e={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const o=mr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=mr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=xN(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new iA);const n=this.events[t].add(e);return t==="change"?()=>{n(),ge.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>JC)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,JC);return _P(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wf(s,t){return new SN(s,t)}function AN(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,Wf(e))}function EN(s,t){const e=e0(s,t);let{transitionEnd:n={},transition:i={},...o}=e||{};o={...o,...n};for(const l in o){const u=FI(o[l]);AN(s,l,u)}}function CN(s){return!!(On(s)&&s.add)}function Ub(s,t){const e=s.getValue("willChange");if(CN(e))return e.add(t)}function PP(s){return s.props[sP]}const kP=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,TN=1e-7,_N=12;function PN(s,t,e,n,i){let o,l,u=0;do l=t+(e-t)/2,o=kP(l,n,i)-s,o>0?e=l:t=l;while(Math.abs(o)>TN&&++u<_N);return l}function Wm(s,t,e,n){if(s===t&&e===n)return Oi;const i=o=>PN(o,0,1,s,e);return o=>o===0||o===1?o:kP(i(o),t,n)}const MP=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,DP=s=>t=>1-s(1-t),RP=Wm(.33,1.53,.69,.99),sA=DP(RP),LP=MP(sA),IP=s=>(s*=2)<1?.5*sA(s):.5*(2-Math.pow(2,-10*(s-1))),rA=s=>1-Math.sin(Math.acos(s)),NP=DP(rA),FP=MP(rA),OP=s=>/^0[^.\s]+$/u.test(s);function kN(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||OP(s):!0}const Ff=s=>Math.round(s*1e5)/1e5,oA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function MN(s){return s==null}const DN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,aA=(s,t)=>e=>!!(typeof e=="string"&&DN.test(e)&&e.startsWith(s)||t&&!MN(e)&&Object.prototype.hasOwnProperty.call(e,t)),BP=(s,t,e)=>n=>{if(typeof n!="string")return n;const[i,o,l,u]=n.match(oA);return{[s]:parseFloat(i),[t]:parseFloat(o),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},RN=s=>wo(0,255,s),hb={...md,transform:s=>Math.round(RN(s))},gl={test:aA("rgb","red"),parse:BP("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+hb.transform(s)+", "+hb.transform(t)+", "+hb.transform(e)+", "+Ff(Hf.transform(n))+")"};function LN(s){let t="",e="",n="",i="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),i=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),i=s.substring(4,5),t+=t,e+=e,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const zb={test:aA("#"),parse:LN,transform:gl.transform},Eu={test:aA("hsl","hue"),parse:BP("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+pr.transform(Ff(t))+", "+pr.transform(Ff(e))+", "+Ff(Hf.transform(n))+")"},Fn={test:s=>gl.test(s)||zb.test(s)||Eu.test(s),parse:s=>gl.test(s)?gl.parse(s):Eu.test(s)?Eu.parse(s):zb.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?gl.transform(s):Eu.transform(s)},IN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NN(s){var t,e;return isNaN(s)&&typeof s=="string"&&(((t=s.match(oA))===null||t===void 0?void 0:t.length)||0)+(((e=s.match(IN))===null||e===void 0?void 0:e.length)||0)>0}const jP="number",VP="color",FN="var",ON="var(",ZC="${}",BN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $f(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},i=[];let o=0;const u=t.replace(BN,h=>(Fn.test(h)?(n.color.push(o),i.push(VP),e.push(Fn.parse(h))):h.startsWith(ON)?(n.var.push(o),i.push(FN),e.push(h)):(n.number.push(o),i.push(jP),e.push(parseFloat(h))),++o,ZC)).split(ZC);return{values:e,split:u,indexes:n,types:i}}function UP(s){return $f(s).values}function zP(s){const{split:t,types:e}=$f(s),n=t.length;return i=>{let o="";for(let l=0;l<n;l++)if(o+=t[l],i[l]!==void 0){const u=e[l];u===jP?o+=Ff(i[l]):u===VP?o+=Fn.transform(i[l]):o+=i[l]}return o}}const jN=s=>typeof s=="number"?0:s;function VN(s){const t=UP(s);return zP(s)(t.map(jN))}const Ua={test:NN,parse:UP,createTransformer:zP,getAnimatableNone:VN},UN=new Set(["brightness","contrast","saturate","opacity"]);function zN(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(oA)||[];if(!n)return s;const i=e.replace(n,"");let o=UN.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+i+")"}const HN=/\b([a-z-]*)\(.*?\)/gu,Hb={...Ua,getAnimatableNone:s=>{const t=s.match(HN);return t?t.map(zN).join(" "):s}},WN={...$S,color:Fn,backgroundColor:Fn,outlineColor:Fn,fill:Fn,stroke:Fn,borderColor:Fn,borderTopColor:Fn,borderRightColor:Fn,borderBottomColor:Fn,borderLeftColor:Fn,filter:Hb,WebkitFilter:Hb},lA=s=>WN[s];function HP(s,t){let e=lA(s);return e!==Hb&&(e=Ua),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const $N=new Set(["auto","none","0"]);function GN(s,t,e){let n=0,i;for(;n<s.length&&!i;){const o=s[n];typeof o=="string"&&!$N.has(o)&&$f(o).values.length&&(i=s[n]),n++}if(i&&e)for(const o of t)s[o]=HP(e,i)}const tT=s=>s===md||s===Et,eT=(s,t)=>parseFloat(s.split(", ")[t]),nT=(s,t)=>(e,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return eT(i[1],t);{const o=n.match(/^matrix\((.+)\)$/u);return o?eT(o[1],s):0}},XN=new Set(["x","y","z"]),YN=pd.filter(s=>!XN.has(s));function qN(s){const t=[];return YN.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const ud={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:nT(4,13),y:nT(5,14)};ud.translateX=ud.x;ud.translateY=ud.y;const Rc=new Set;let Wb=!1,$b=!1;function WP(){if($b){const s=Array.from(Rc).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const i=qN(n);i.length&&(e.set(n,i),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=e.get(n);i&&i.forEach(([o,l])=>{var u;(u=n.getValue(o))===null||u===void 0||u.set(l)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}$b=!1,Wb=!1,Rc.forEach(s=>s.complete()),Rc.clear()}function $P(){Rc.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&($b=!0)})}function KN(){$P(),WP()}class cA{constructor(t,e,n,i,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Rc.add(this),Wb||(Wb=!0,ge.read($P),ge.resolveKeyframes(WP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;for(let o=0;o<t.length;o++)if(t[o]===null)if(o===0){const l=i==null?void 0:i.get(),u=t[t.length-1];if(l!==void 0)t[0]=l;else if(n&&e){const h=n.readValue(e,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),i&&l===void 0&&i.set(t[0])}else t[o]=t[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Rc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Rc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const GP=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s),QN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JN(s){const t=QN.exec(s);if(!t)return[,];const[,e,n,i]=t;return[`--${e??n}`,i]}function XP(s,t,e=1){const[n,i]=JN(s);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const l=o.trim();return GP(l)?parseFloat(l):l}return WS(i)?XP(i,t,e+1):i}const YP=s=>t=>t.test(s),ZN={test:s=>s==="auto",parse:s=>s},qP=[md,Et,pr,$o,zI,UI,ZN],iT=s=>qP.find(YP(s));class KP extends cA{constructor(t,e,n,i,o){super(t,e,n,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let f=t[h];if(typeof f=="string"&&(f=f.trim(),WS(f))){const p=XP(f,e.current);p!==void 0&&(t[h]=p),h===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!TP.has(n)||t.length!==2)return;const[i,o]=t,l=iT(i),u=iT(o);if(l!==u)if(tT(l)&&tT(u))for(let h=0;h<t.length;h++){const f=t[h];typeof f=="string"&&(t[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)kN(t[i])&&n.push(i);n.length&&GN(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ud[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const l=i.length-1,u=i[l];i[l]=ud[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const sT=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Ua.test(s)||s==="0")&&!s.startsWith("url("));function tF(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function eF(s,t,e,n){const i=s[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const o=s[s.length-1],l=sT(i,t),u=sT(o,t);return!l||!u?!1:tF(s)||(e==="spring"||JS(e))&&n}const nF=s=>s!==null;function n0(s,{repeat:t,repeatType:e="loop"},n){const i=s.filter(nF),o=t&&e!=="loop"&&t%2===1?0:i.length-1;return!o||n===void 0?i[o]:n}const iF=40;class QP{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=mr.now(),this.options={autoplay:t,delay:e,type:n,repeat:i,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iF?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&KN(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=mr.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:o,delay:l,onComplete:u,onUpdate:h,isGenerator:f}=this.options;if(!f&&!eF(t,n,i,o))if(l)this.options.duration=0;else{h&&h(n0(t,this.options,e)),u&&u(),this.resolveFinishedPromise();return}const p=this.initPlayback(t,e);p!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...p},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ce=(s,t,e)=>s+(t-s)*e;function db(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function sF({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let i=0,o=0,l=0;if(!t)i=o=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,h=2*e-u;i=db(h,u,s+1/3),o=db(h,u,s),l=db(h,u,s-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:n}}function hv(s,t){return e=>e>0?t:s}const fb=(s,t,e)=>{const n=s*s,i=e*(t*t-n)+n;return i<0?0:Math.sqrt(i)},rF=[zb,gl,Eu],oF=s=>rF.find(t=>t.test(s));function rT(s){const t=oF(s);if(!t)return!1;let e=t.parse(s);return t===Eu&&(e=sF(e)),e}const oT=(s,t)=>{const e=rT(s),n=rT(t);if(!e||!n)return hv(s,t);const i={...e};return o=>(i.red=fb(e.red,n.red,o),i.green=fb(e.green,n.green,o),i.blue=fb(e.blue,n.blue,o),i.alpha=Ce(e.alpha,n.alpha,o),gl.transform(i))},aF=(s,t)=>e=>t(s(e)),$m=(...s)=>s.reduce(aF),Gb=new Set(["none","hidden"]);function lF(s,t){return Gb.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function cF(s,t){return e=>Ce(s,t,e)}function uA(s){return typeof s=="number"?cF:typeof s=="string"?WS(s)?hv:Fn.test(s)?oT:dF:Array.isArray(s)?JP:typeof s=="object"?Fn.test(s)?oT:uF:hv}function JP(s,t){const e=[...s],n=e.length,i=s.map((o,l)=>uA(o)(o,t[l]));return o=>{for(let l=0;l<n;l++)e[l]=i[l](o);return e}}function uF(s,t){const e={...s,...t},n={};for(const i in e)s[i]!==void 0&&t[i]!==void 0&&(n[i]=uA(s[i])(s[i],t[i]));return i=>{for(const o in n)e[o]=n[o](i);return e}}function hF(s,t){var e;const n=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const l=t.types[o],u=s.indexes[l][i[l]],h=(e=s.values[u])!==null&&e!==void 0?e:0;n[o]=h,i[l]++}return n}const dF=(s,t)=>{const e=Ua.createTransformer(t),n=$f(s),i=$f(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Gb.has(s)&&!i.values.length||Gb.has(t)&&!n.values.length?lF(s,t):$m(JP(hF(n,i),i.values),e):hv(s,t)};function ZP(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?Ce(s,t,e):uA(s)(s,t)}const fF=5;function tk(s,t,e){const n=Math.max(t-fF,0);return _P(e-s(n),t-n)}const Le={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pb=.001;function pF({duration:s=Le.duration,bounce:t=Le.bounce,velocity:e=Le.velocity,mass:n=Le.mass}){let i,o,l=1-t;l=wo(Le.minDamping,Le.maxDamping,l),s=wo(Le.minDuration,Le.maxDuration,mo(s)),l<1?(i=f=>{const p=f*l,g=p*s,y=p-e,w=Xb(f,l),A=Math.exp(-g);return pb-y/w*A},o=f=>{const g=f*l*s,y=g*e+e,w=Math.pow(l,2)*Math.pow(f,2)*s,A=Math.exp(-g),S=Xb(Math.pow(f,2),l);return(-i(f)+pb>0?-1:1)*((y-w)*A)/S}):(i=f=>{const p=Math.exp(-f*s),g=(f-e)*s+1;return-pb+p*g},o=f=>{const p=Math.exp(-f*s),g=(e-f)*(s*s);return p*g});const u=5/s,h=gF(i,o,u);if(s=po(s),isNaN(h))return{stiffness:Le.stiffness,damping:Le.damping,duration:s};{const f=Math.pow(h,2)*n;return{stiffness:f,damping:l*2*Math.sqrt(n*f),duration:s}}}const mF=12;function gF(s,t,e){let n=e;for(let i=1;i<mF;i++)n=n-s(n)/t(n);return n}function Xb(s,t){return s*Math.sqrt(1-t*t)}const yF=["duration","bounce"],vF=["stiffness","damping","mass"];function aT(s,t){return t.some(e=>s[e]!==void 0)}function wF(s){let t={velocity:Le.velocity,stiffness:Le.stiffness,damping:Le.damping,mass:Le.mass,isResolvedFromDuration:!1,...s};if(!aT(s,vF)&&aT(s,yF))if(s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),i=n*n,o=2*wo(.05,1,1-(s.bounce||0))*Math.sqrt(i);t={...t,mass:Le.mass,stiffness:i,damping:o}}else{const e=pF(s);t={...t,...e,mass:Le.mass},t.isResolvedFromDuration=!0}return t}function ek(s=Le.visualDuration,t=Le.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:i}=e;const o=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:p,duration:g,velocity:y,isResolvedFromDuration:w}=wF({...e,velocity:-mo(e.velocity||0)}),A=y||0,S=f/(2*Math.sqrt(h*p)),C=l-o,T=mo(Math.sqrt(h/p)),M=Math.abs(C)<5;n||(n=M?Le.restSpeed.granular:Le.restSpeed.default),i||(i=M?Le.restDelta.granular:Le.restDelta.default);let k;if(S<1){const R=Xb(T,S);k=I=>{const j=Math.exp(-S*T*I);return l-j*((A+S*T*C)/R*Math.sin(R*I)+C*Math.cos(R*I))}}else if(S===1)k=R=>l-Math.exp(-T*R)*(C+(A+T*C)*R);else{const R=T*Math.sqrt(S*S-1);k=I=>{const j=Math.exp(-S*T*I),H=Math.min(R*I,300);return l-j*((A+S*T*C)*Math.sinh(H)+R*C*Math.cosh(H))/R}}const D={calculatedDuration:w&&g||null,next:R=>{const I=k(R);if(w)u.done=R>=g;else{let j=0;S<1&&(j=R===0?po(A):tk(k,R,I));const H=Math.abs(j)<=n,X=Math.abs(l-I)<=i;u.done=H&&X}return u.value=u.done?l:I,u},toString:()=>{const R=Math.min(wP(D),jb),I=bP(j=>D.next(R*j).value,R,30);return R+"ms "+I}};return D}function lT({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:h,restDelta:f=.5,restSpeed:p}){const g=s[0],y={done:!1,value:g},w=H=>u!==void 0&&H<u||h!==void 0&&H>h,A=H=>u===void 0?h:h===void 0||Math.abs(u-H)<Math.abs(h-H)?u:h;let S=e*t;const C=g+S,T=l===void 0?C:l(C);T!==C&&(S=T-g);const M=H=>-S*Math.exp(-H/n),k=H=>T+M(H),D=H=>{const X=M(H),Q=k(H);y.done=Math.abs(X)<=f,y.value=y.done?T:Q};let R,I;const j=H=>{w(y.value)&&(R=H,I=ek({keyframes:[y.value,A(y.value)],velocity:tk(k,H,y.value),damping:i,stiffness:o,restDelta:f,restSpeed:p}))};return j(0),{calculatedDuration:null,next:H=>{let X=!1;return!I&&R===void 0&&(X=!0,D(H),j(H)),R!==void 0&&H>=R?I.next(H-R):(!X&&D(H),y)}}}const bF=Wm(.42,0,1,1),xF=Wm(0,0,.58,1),nk=Wm(.42,0,.58,1),SF=s=>Array.isArray(s)&&typeof s[0]!="number",AF={linear:Oi,easeIn:bF,easeInOut:nk,easeOut:xF,circIn:rA,circInOut:FP,circOut:NP,backIn:sA,backInOut:LP,backOut:RP,anticipate:IP},cT=s=>{if(ZS(s)){Z_(s.length===4);const[t,e,n,i]=s;return Wm(t,e,n,i)}else if(typeof s=="string")return AF[s];return s};function EF(s,t,e){const n=[],i=e||ZP,o=s.length-1;for(let l=0;l<o;l++){let u=i(s[l],s[l+1]);if(t){const h=Array.isArray(t)?t[l]||Oi:t;u=$m(h,u)}n.push(u)}return n}function CF(s,t,{clamp:e=!0,ease:n,mixer:i}={}){const o=s.length;if(Z_(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=s[0]===s[1];s[0]>s[o-1]&&(s=[...s].reverse(),t=[...t].reverse());const u=EF(t,n,i),h=u.length,f=p=>{if(l&&p<s[0])return t[0];let g=0;if(h>1)for(;g<s.length-2&&!(p<s[g+1]);g++);const y=ld(s[g],s[g+1],p);return u[g](y)};return e?p=>f(wo(s[0],s[o-1],p)):f}function TF(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const i=ld(0,t,n);s.push(Ce(e,1,i))}}function _F(s){const t=[0];return TF(t,s.length-1),t}function PF(s,t){return s.map(e=>e*t)}function kF(s,t){return s.map(()=>t||nk).splice(0,s.length-1)}function dv({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const i=SF(n)?n.map(cT):cT(n),o={done:!1,value:t[0]},l=PF(e&&e.length===t.length?e:_F(t),s),u=CF(l,t,{ease:Array.isArray(i)?i:kF(t,i)});return{calculatedDuration:s,next:h=>(o.value=u(h),o.done=h>=s,o)}}const MF=s=>{const t=({timestamp:e})=>s(e);return{start:()=>ge.update(t,!0),stop:()=>Va(t),now:()=>xn.isProcessing?xn.timestamp:mr.now()}},DF={decay:lT,inertia:lT,tween:dv,keyframes:dv,spring:ek},RF=s=>s/100;class hA extends QP{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:e,motionValue:n,element:i,keyframes:o}=this.options,l=(i==null?void 0:i.KeyframeResolver)||cA,u=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new l(o,u,e,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=this.options,u=JS(e)?e:DF[e]||dv;let h,f;u!==dv&&typeof t[0]!="number"&&(h=$m(RF,ZP(t[0],t[1])),t=[0,100]);const p=u({...this.options,keyframes:t});o==="mirror"&&(f=u({...this.options,keyframes:[...t].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=wP(p));const{calculatedDuration:g}=p,y=g+i,w=y*(n+1)-i;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:g,resolvedDuration:y,totalDuration:w}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:H}=this.options;return{done:!0,value:H[H.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:f,totalDuration:p,resolvedDuration:g}=n;if(this.startTime===null)return o.next(0);const{delay:y,repeat:w,repeatType:A,repeatDelay:S,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-p/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const T=this.currentTime-y*(this.speed>=0?1:-1),M=this.speed>=0?T<0:T>p;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let k=this.currentTime,D=o;if(w){const H=Math.min(this.currentTime,p)/g;let X=Math.floor(H),Q=H%1;!Q&&H>=1&&(Q=1),Q===1&&X--,X=Math.min(X,w+1),!!(X%2)&&(A==="reverse"?(Q=1-Q,S&&(Q-=S/g)):A==="mirror"&&(D=l)),k=wo(0,1,Q)*g}const R=M?{done:!1,value:h[0]}:D.next(k);u&&(R.value=u(R.value));let{done:I}=R;!M&&f!==null&&(I=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return j&&i!==void 0&&(R.value=n0(h,this.options,i)),C&&C(R.value),j&&this.finish(),R}get duration(){const{resolved:t}=this;return t?mo(t.calculatedDuration):0}get time(){return mo(this.currentTime)}set time(t){t=po(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=mo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=MF,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),e&&e();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const LF=new Set(["opacity","clipPath","filter","transform"]);function IF(s,t,e,{delay:n=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:h}={}){const f={[t]:e};h&&(f.offset=h);const p=SP(u,i);return Array.isArray(p)&&(f.easing=p),s.animate(f,{delay:n,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const NF=OS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fv=10,FF=2e4;function OF(s){return JS(s.type)||s.type==="spring"||!xP(s.ease)}function BF(s,t){const e=new hA({...t,keyframes:s,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:s[0]};const i=[];let o=0;for(;!n.done&&o<FF;)n=e.sample(o),i.push(n.value),o+=fv;return{times:void 0,keyframes:i,duration:o-fv,ease:"linear"}}const ik={anticipate:IP,backInOut:LP,circInOut:FP};function jF(s){return s in ik}class uT extends QP{constructor(t){super(t);const{name:e,motionValue:n,element:i,keyframes:o}=this.options;this.resolver=new KP(o,(l,u)=>this.onKeyframesResolved(l,u),e,n,i),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:n=300,times:i,ease:o,type:l,motionValue:u,name:h,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&uv()&&jF(o)&&(o=ik[o]),OF(this.options)){const{onComplete:g,onUpdate:y,motionValue:w,element:A,...S}=this.options,C=BF(t,S);t=C.keyframes,t.length===1&&(t[1]=t[0]),n=C.duration,i=C.times,o=C.ease,l="keyframes"}const p=IF(u.owner.current,h,t,{...this.options,duration:n,times:i,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(YC(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;u.set(n0(t,this.options,e)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:n,times:i,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return mo(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return mo(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=po(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return Oi;const{animation:n}=e;YC(n,t)}return Oi}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:i,type:o,ease:l,times:u}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:g,element:y,...w}=this.options,A=new hA({...w,keyframes:n,duration:i,type:o,ease:l,times:u,isGenerator:!0}),S=po(this.time);f.setWithVelocity(A.sample(S-fv).value,A.sample(S).value,fv)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:o,damping:l,type:u}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return NF()&&n&&LF.has(n)&&!h&&!f&&!i&&o!=="mirror"&&l!==0&&u!=="inertia"}}const VF={type:"spring",stiffness:500,damping:25,restSpeed:10},UF=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),zF={type:"keyframes",duration:.8},HF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WF=(s,{keyframes:t})=>t.length>2?zF:Oc.has(s)?s.startsWith("scale")?UF(t[1]):VF:HF;function $F({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const dA=(s,t,e,n={},i,o)=>l=>{const u=QS(n,s)||{},h=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-po(h);let p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:y=>{t.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:s,motionValue:t,element:o?void 0:i};$F(u)||(p={...p,...WF(s,p)}),p.duration&&(p.duration=po(p.duration)),p.repeatDelay&&(p.repeatDelay=po(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),g&&!o&&t.get()!==void 0){const y=n0(p.keyframes,u);if(y!==void 0)return ge.update(()=>{p.onUpdate(y),p.onComplete()}),new uN([])}return!o&&uT.supports(p)?new uT(p):new hA(p)};function GF({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function sk(s,t,{delay:e=0,transitionOverride:n,type:i}={}){var o;let{transition:l=s.getDefaultTransition(),transitionEnd:u,...h}=t;n&&(l=n);const f=[],p=i&&s.animationState&&s.animationState.getState()[i];for(const g in h){const y=s.getValue(g,(o=s.latestValues[g])!==null&&o!==void 0?o:null),w=h[g];if(w===void 0||p&&GF(p,g))continue;const A={delay:e,...QS(l||{},g)};let S=!1;if(window.MotionHandoffAnimation){const T=PP(s);if(T){const M=window.MotionHandoffAnimation(T,g,ge);M!==null&&(A.startTime=M,S=!0)}}Ub(s,g),y.start(dA(g,y,w,s.shouldReduceMotion&&TP.has(g)?{type:!1}:A,s,S));const C=y.animation;C&&f.push(C)}return u&&Promise.all(f).then(()=>{ge.update(()=>{u&&EN(s,u)})}),f}function Yb(s,t,e={}){var n;const i=e0(s,t,e.type==="exit"?(n=s.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:o=s.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(o=e.transitionOverride);const l=i?()=>Promise.all(sk(s,i,e)):()=>Promise.resolve(),u=s.variantChildren&&s.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=o;return XF(s,t,p+f,g,y,e)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,p]=h==="beforeChildren"?[l,u]:[u,l];return f().then(()=>p())}else return Promise.all([l(),u(e.delay)])}function XF(s,t,e=0,n=0,i=1,o){const l=[],u=(s.variantChildren.size-1)*n,h=i===1?(f=0)=>f*n:(f=0)=>u-f*n;return Array.from(s.variantChildren).sort(YF).forEach((f,p)=>{f.notify("AnimationStart",t),l.push(Yb(f,t,{...o,delay:e+h(p)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(l)}function YF(s,t){return s.sortNodePosition(t)}function qF(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(o=>Yb(s,o,e));n=Promise.all(i)}else if(typeof t=="string")n=Yb(s,t,e);else{const i=typeof t=="function"?e0(s,t,e.custom):t;n=Promise.all(sk(s,i,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}const KF=jS.length;function rk(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?rk(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<KF;e++){const n=jS[e],i=s.props[n];(zf(i)||i===!1)&&(t[n]=i)}return t}const QF=[...BS].reverse(),JF=BS.length;function ZF(s){return t=>Promise.all(t.map(({animation:e,options:n})=>qF(s,e,n)))}function tO(s){let t=ZF(s),e=hT(),n=!0;const i=h=>(f,p)=>{var g;const y=e0(s,p,h==="exit"?(g=s.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:w,transitionEnd:A,...S}=y;f={...f,...S,...A}}return f};function o(h){t=h(s)}function l(h){const{props:f}=s,p=rk(s.parent)||{},g=[],y=new Set;let w={},A=1/0;for(let C=0;C<JF;C++){const T=QF[C],M=e[T],k=f[T]!==void 0?f[T]:p[T],D=zf(k),R=T===h?M.isActive:null;R===!1&&(A=C);let I=k===p[T]&&k!==f[T]&&D;if(I&&n&&s.manuallyAnimateOnMount&&(I=!1),M.protectedKeys={...w},!M.isActive&&R===null||!k&&!M.prevProp||Zv(k)||typeof k=="boolean")continue;const j=eO(M.prevProp,k);let H=j||T===h&&M.isActive&&!I&&D||C>A&&D,X=!1;const Q=Array.isArray(k)?k:[k];let Z=Q.reduce(i(T),{});R===!1&&(Z={});const{prevResolvedValues:vt={}}=M,wt={...vt,...Z},gt=tt=>{H=!0,y.has(tt)&&(X=!0,y.delete(tt)),M.needsAnimating[tt]=!0;const G=s.getValue(tt);G&&(G.liveStyle=!1)};for(const tt in wt){const G=Z[tt],at=vt[tt];if(w.hasOwnProperty(tt))continue;let nt=!1;Bb(G)&&Bb(at)?nt=!vP(G,at):nt=G!==at,nt?G!=null?gt(tt):y.add(tt):G!==void 0&&y.has(tt)?gt(tt):M.protectedKeys[tt]=!0}M.prevProp=k,M.prevResolvedValues=Z,M.isActive&&(w={...w,...Z}),n&&s.blockInitialAnimation&&(H=!1),H&&(!(I&&j)||X)&&g.push(...Q.map(tt=>({animation:tt,options:{type:T}})))}if(y.size){const C={};y.forEach(T=>{const M=s.getBaseTarget(T),k=s.getValue(T);k&&(k.liveStyle=!0),C[T]=M??null}),g.push({animation:C})}let S=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!s.manuallyAnimateOnMount&&(S=!1),n=!1,S?t(g):Promise.resolve()}function u(h,f){var p;if(e[h].isActive===f)return Promise.resolve();(p=s.variantChildren)===null||p===void 0||p.forEach(y=>{var w;return(w=y.animationState)===null||w===void 0?void 0:w.setActive(h,f)}),e[h].isActive=f;const g=l(h);for(const y in e)e[y].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>e,reset:()=>{e=hT(),n=!0}}}function eO(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!vP(t,s):!1}function ol(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hT(){return{animate:ol(!0),whileInView:ol(),whileHover:ol(),whileTap:ol(),whileDrag:ol(),whileFocus:ol(),exit:ol()}}class $a{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nO extends $a{constructor(t){super(t),t.animationState||(t.animationState=tO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Zv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let iO=0;class sO extends $a{constructor(){super(...arguments),this.id=iO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const rO={animation:{Feature:nO},exit:{Feature:sO}};function Gf(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}function Gm(s){return{point:{x:s.pageX,y:s.pageY}}}const oO=s=>t=>tA(t)&&s(t,Gm(t));function Of(s,t,e,n){return Gf(s,t,oO(e),n)}const dT=(s,t)=>Math.abs(s-t);function aO(s,t){const e=dT(s.x,t.x),n=dT(s.y,t.y);return Math.sqrt(e**2+n**2)}class ok{constructor(t,e,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=gb(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=aO(g.offset,{x:0,y:0})>=3;if(!y&&!w)return;const{point:A}=g,{timestamp:S}=xn;this.history.push({...A,timestamp:S});const{onStart:C,onMove:T}=this.handlers;y||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=mb(y,this.transformPagePoint),ge.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:w,onSessionEnd:A,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=gb(g.type==="pointercancel"?this.lastMoveEventInfo:mb(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(g,C),A&&A(g,C)},!tA(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.contextWindow=i||window;const l=Gm(t),u=mb(l,this.transformPagePoint),{point:h}=u,{timestamp:f}=xn;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=e;p&&p(t,gb(u,this.history)),this.removeListeners=$m(Of(this.contextWindow,"pointermove",this.handlePointerMove),Of(this.contextWindow,"pointerup",this.handlePointerUp),Of(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Va(this.updatePoint)}}function mb(s,t){return t?{point:t(s.point)}:s}function fT(s,t){return{x:s.x-t.x,y:s.y-t.y}}function gb({point:s},t){return{point:s,delta:fT(s,ak(t)),offset:fT(s,lO(t)),velocity:cO(t,.1)}}function lO(s){return s[0]}function ak(s){return s[s.length-1]}function cO(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const i=ak(s);for(;e>=0&&(n=s[e],!(i.timestamp-n.timestamp>po(t)));)e--;if(!n)return{x:0,y:0};const o=mo(i.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const lk=1e-4,uO=1-lk,hO=1+lk,ck=.01,dO=0-ck,fO=0+ck;function ji(s){return s.max-s.min}function pO(s,t,e){return Math.abs(s-t)<=e}function pT(s,t,e,n=.5){s.origin=n,s.originPoint=Ce(t.min,t.max,s.origin),s.scale=ji(e)/ji(t),s.translate=Ce(e.min,e.max,s.origin)-s.originPoint,(s.scale>=uO&&s.scale<=hO||isNaN(s.scale))&&(s.scale=1),(s.translate>=dO&&s.translate<=fO||isNaN(s.translate))&&(s.translate=0)}function Bf(s,t,e,n){pT(s.x,t.x,e.x,n?n.originX:void 0),pT(s.y,t.y,e.y,n?n.originY:void 0)}function mT(s,t,e){s.min=e.min+t.min,s.max=s.min+ji(t)}function mO(s,t,e){mT(s.x,t.x,e.x),mT(s.y,t.y,e.y)}function gT(s,t,e){s.min=t.min-e.min,s.max=s.min+ji(t)}function jf(s,t,e){gT(s.x,t.x,e.x),gT(s.y,t.y,e.y)}function gO(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?Ce(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?Ce(e,s,n.max):Math.min(s,e)),s}function yT(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function yO(s,{top:t,left:e,bottom:n,right:i}){return{x:yT(s.x,e,i),y:yT(s.y,t,n)}}function vT(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function vO(s,t){return{x:vT(s.x,t.x),y:vT(s.y,t.y)}}function wO(s,t){let e=.5;const n=ji(s),i=ji(t);return i>n?e=ld(t.min,t.max-n,s.min):n>i&&(e=ld(s.min,s.max-i,t.min)),wo(0,1,e)}function bO(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const qb=.35;function xO(s=qb){return s===!1?s=0:s===!0&&(s=qb),{x:wT(s,"left","right"),y:wT(s,"top","bottom")}}function wT(s,t,e){return{min:bT(s,t),max:bT(s,e)}}function bT(s,t){return typeof s=="number"?s:s[t]||0}const xT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Cu=()=>({x:xT(),y:xT()}),ST=()=>({min:0,max:0}),Ve=()=>({x:ST(),y:ST()});function Ki(s){return[s("x"),s("y")]}function uk({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function SO({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function AO(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function yb(s){return s===void 0||s===1}function Kb({scale:s,scaleX:t,scaleY:e}){return!yb(s)||!yb(t)||!yb(e)}function al(s){return Kb(s)||hk(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function hk(s){return AT(s.x)||AT(s.y)}function AT(s){return s&&s!=="0%"}function pv(s,t,e){const n=s-e,i=t*n;return e+i}function ET(s,t,e,n,i){return i!==void 0&&(s=pv(s,i,n)),pv(s,e,n)+t}function Qb(s,t=0,e=1,n,i){s.min=ET(s.min,t,e,n,i),s.max=ET(s.max,t,e,n,i)}function dk(s,{x:t,y:e}){Qb(s.x,t.translate,t.scale,t.originPoint),Qb(s.y,e.translate,e.scale,e.originPoint)}const CT=.999999999999,TT=1.0000000000001;function EO(s,t,e,n=!1){const i=e.length;if(!i)return;t.x=t.y=1;let o,l;for(let u=0;u<i;u++){o=e[u],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&_u(s,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,dk(s,l)),n&&al(o.latestValues)&&_u(s,o.latestValues))}t.x<TT&&t.x>CT&&(t.x=1),t.y<TT&&t.y>CT&&(t.y=1)}function Tu(s,t){s.min=s.min+t,s.max=s.max+t}function _T(s,t,e,n,i=.5){const o=Ce(s.min,s.max,i);Qb(s,t,e,o,n)}function _u(s,t){_T(s.x,t.x,t.scaleX,t.scale,t.originX),_T(s.y,t.y,t.scaleY,t.scale,t.originY)}function fk(s,t){return uk(AO(s.getBoundingClientRect(),t))}function CO(s,t,e){const n=fk(s,e),{scroll:i}=t;return i&&(Tu(n.x,i.offset.x),Tu(n.y,i.offset.y)),n}const pk=({current:s})=>s?s.ownerDocument.defaultView:null,TO=new WeakMap;class _O{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ve(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Gm(p).point)},o=(p,g)=>{const{drag:y,dragPropagation:w,onDragStart:A}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wN(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ki(C=>{let T=this.getAxisMotionValue(C).get()||0;if(pr.test(T)){const{projection:M}=this.visualElement;if(M&&M.layout){const k=M.layout.layoutBox[C];k&&(T=ji(k)*(parseFloat(T)/100))}}this.originPoint[C]=T}),A&&ge.postRender(()=>A(p,g)),Ub(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(p,g)=>{const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:A,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:C}=g;if(w&&this.currentDirection===null){this.currentDirection=PO(C),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),S&&S(p,g)},u=(p,g)=>this.stop(p,g),h=()=>Ki(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new ok(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:pk(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=e;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ge.postRender(()=>o(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:i}=this.getProps();if(!n||!dy(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=gO(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;e&&Au(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=yO(i.layoutBox,e):this.constraints=!1,this.elastic=xO(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ki(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=bO(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Au(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=CO(n,i.root,this.visualElement.getTransformPagePoint());let l=vO(i.layout.layoutBox,o);if(e){const u=e(SO(l));this.hasMutatedConstraints=!!u,u&&(l=uk(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Ki(p=>{if(!dy(p,e,this.currentDirection))return;let g=h&&h[p]||{};l&&(g={min:0,max:0});const y=i?200:1e6,w=i?40:1e7,A={type:"inertia",velocity:n?t[p]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(p,A)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Ub(this.visualElement,t),n.start(dA(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ki(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ki(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[e];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ki(e=>{const{drag:n}=this.getProps();if(!dy(e,n,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(e);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[e];o.set(t[e]-Ce(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Au(e)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ki(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();i[l]=wO({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ki(l=>{if(!dy(l,t,null))return;const u=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];u.set(Ce(h,f,i[l]))})}addListeners(){if(!this.visualElement.current)return;TO.set(this.visualElement,this);const t=this.visualElement.current,e=Of(t,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Au(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ge.read(n);const l=Gf(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ki(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=h[p].translate,g.set(g.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),o(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=qb,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function dy(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function PO(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class kO extends $a{constructor(t){super(t),this.removeGroupControls=Oi,this.removeListeners=Oi,this.controls=new _O(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Oi}unmount(){this.removeGroupControls(),this.removeListeners()}}const PT=s=>(t,e)=>{s&&ge.postRender(()=>s(t,e))};class MO extends $a{constructor(){super(...arguments),this.removePointerDownListener=Oi}onPointerDown(t){this.session=new ok(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:PT(t),onStart:PT(e),onMove:n,onEnd:(o,l)=>{delete this.session,i&&ge.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Of(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ey={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kT(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const sf={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(Et.test(s))s=parseFloat(s);else return s;const e=kT(s,t.target.x),n=kT(s,t.target.y);return`${e}% ${n}%`}},DO={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,i=Ua.parse(s);if(i.length>5)return n;const o=Ua.createTransformer(s),l=typeof i[0]!="number"?1:0,u=e.x.scale*t.x,h=e.y.scale*t.y;i[0+l]/=u,i[1+l]/=h;const f=Ce(u,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=f),typeof i[3+l]=="number"&&(i[3+l]/=f),o(i)}};class RO extends U.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:i}=this.props,{projection:o}=t;JI(LO),o&&(e.group&&e.group.add(o),n&&n.register&&i&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ey.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:i,isPresent:o}=this.props,l=n.projection;return l&&(l.isPresent=o,i||t.layoutDependency!==e||e===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||ge.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),US.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function mk(s){const[t,e]=Q_(),n=U.useContext(LS);return F.jsx(RO,{...s,layoutGroup:n,switchLayoutGroup:U.useContext(rP),isPresent:t,safeToRemove:e})}const LO={borderRadius:{...sf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sf,borderTopRightRadius:sf,borderBottomLeftRadius:sf,borderBottomRightRadius:sf,boxShadow:DO};function IO(s,t,e){const n=On(s)?s:Wf(s);return n.start(dA("",n,t,e)),n.animation}function NO(s){return s instanceof SVGElement&&s.tagName!=="svg"}const FO=(s,t)=>s.depth-t.depth;class OO{constructor(){this.children=[],this.isDirty=!1}add(t){eA(this.children,t),this.isDirty=!0}remove(t){nA(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(FO),this.isDirty=!1,this.children.forEach(t)}}function BO(s,t){const e=mr.now(),n=({timestamp:i})=>{const o=i-e;o>=t&&(Va(n),s(o-t))};return ge.read(n,!0),()=>Va(n)}const gk=["TopLeft","TopRight","BottomLeft","BottomRight"],jO=gk.length,MT=s=>typeof s=="string"?parseFloat(s):s,DT=s=>typeof s=="number"||Et.test(s);function VO(s,t,e,n,i,o){i?(s.opacity=Ce(0,e.opacity!==void 0?e.opacity:1,UO(n)),s.opacityExit=Ce(t.opacity!==void 0?t.opacity:1,0,zO(n))):o&&(s.opacity=Ce(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,n));for(let l=0;l<jO;l++){const u=`border${gk[l]}Radius`;let h=RT(t,u),f=RT(e,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||DT(h)===DT(f)?(s[u]=Math.max(Ce(MT(h),MT(f),n),0),(pr.test(f)||pr.test(h))&&(s[u]+="%")):s[u]=f}(t.rotate||e.rotate)&&(s.rotate=Ce(t.rotate||0,e.rotate||0,n))}function RT(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const UO=yk(0,.5,NP),zO=yk(.5,.95,Oi);function yk(s,t,e){return n=>n<s?0:n>t?1:e(ld(s,t,n))}function LT(s,t){s.min=t.min,s.max=t.max}function Xi(s,t){LT(s.x,t.x),LT(s.y,t.y)}function IT(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function NT(s,t,e,n,i){return s-=t,s=pv(s,1/e,n),i!==void 0&&(s=pv(s,1/i,n)),s}function HO(s,t=0,e=1,n=.5,i,o=s,l=s){if(pr.test(t)&&(t=parseFloat(t),t=Ce(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=Ce(o.min,o.max,n);s===o&&(u-=t),s.min=NT(s.min,t,e,u,i),s.max=NT(s.max,t,e,u,i)}function FT(s,t,[e,n,i],o,l){HO(s,t[e],t[n],t[i],t.scale,o,l)}const WO=["x","scaleX","originX"],$O=["y","scaleY","originY"];function OT(s,t,e,n){FT(s.x,t,WO,e?e.x:void 0,n?n.x:void 0),FT(s.y,t,$O,e?e.y:void 0,n?n.y:void 0)}function BT(s){return s.translate===0&&s.scale===1}function vk(s){return BT(s.x)&&BT(s.y)}function jT(s,t){return s.min===t.min&&s.max===t.max}function GO(s,t){return jT(s.x,t.x)&&jT(s.y,t.y)}function VT(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function wk(s,t){return VT(s.x,t.x)&&VT(s.y,t.y)}function UT(s){return ji(s.x)/ji(s.y)}function zT(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class XO{constructor(){this.members=[]}add(t){eA(this.members,t),t.scheduleRender()}remove(t){if(nA(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let n;for(let i=e;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YO(s,t,e){let n="";const i=s.x.translate/t.x,o=s.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((i||o||l)&&(n=`translate3d(${i}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:y,skewX:w,skewY:A}=e;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),y&&(n+=`rotateY(${y}deg) `),w&&(n+=`skewX(${w}deg) `),A&&(n+=`skewY(${A}deg) `)}const u=s.x.scale*t.x,h=s.y.scale*t.y;return(u!==1||h!==1)&&(n+=`scale(${u}, ${h})`),n||"none"}const ll={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},pf=typeof window<"u"&&window.MotionDebug!==void 0,vb=["","X","Y","Z"],qO={visibility:"hidden"},HT=1e3;let KO=0;function wb(s,t,e,n){const{latestValues:i}=t;i[s]&&(e[s]=i[s],t.setStaticValue(s,0),n&&(n[s]=0))}function bk(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=PP(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:o}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",ge,!(i||o))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&bk(n)}function xk({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(l={},u=t==null?void 0:t()){this.id=KO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,pf&&(ll.totalNodes=ll.resolvedTargetDeltas=ll.recalculatedProjection=0),this.nodes.forEach(ZO),this.nodes.forEach(sB),this.nodes.forEach(rB),this.nodes.forEach(tB),pf&&window.MotionDebug.record(ll)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new OO)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new iA),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NO(l),this.instance=l;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),s){let g;const y=()=>this.root.updateBlockedByResize=!1;s(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=BO(y,250),Ey.hasAnimatedSinceResize&&(Ey.hasAnimatedSinceResize=!1,this.nodes.forEach($T))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeTargetChanged:w,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||p.getDefaultTransition()||uB,{onLayoutAnimationStart:C,onLayoutAnimationComplete:T}=p.getProps(),M=!this.targetLayout||!wk(this.targetLayout,A)||w,k=!y&&w;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,k);const D={...QS(S,"layout"),onPlay:C,onComplete:T};(p.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D)}else y||$T(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Va(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oB),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WT);return}this.isUpdating||this.nodes.forEach(nB),this.isUpdating=!1,this.nodes.forEach(iB),this.nodes.forEach(QO),this.nodes.forEach(JO),this.clearAllSnapshots();const u=mr.now();xn.delta=wo(0,1e3/60,u-xn.timestamp),xn.timestamp=u,xn.isProcessing=!0,cb.update.process(xn),cb.preRender.process(xn),cb.render.process(xn),xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,US.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eB),this.sharedNodes.forEach(aB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ve(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!vk(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(u||al(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),hB(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return Ve();const h=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(dB))){const{scroll:p}=this.root;p&&(Tu(h.x,p.offset.x),Tu(h.y,p.offset.y))}return h}removeElementScroll(l){var u;const h=Ve();if(Xi(h,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return h;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Xi(h,l),Tu(h.x,g.offset.x),Tu(h.y,g.offset.y))}return h}applyTransform(l,u=!1){const h=Ve();Xi(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&_u(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),al(p.latestValues)&&_u(h,p.latestValues)}return al(this.latestValues)&&_u(h,this.latestValues),h}removeTransform(l){const u=Ve();Xi(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!al(f.latestValues))continue;Kb(f.latestValues)&&f.updateSnapshot();const p=Ve(),g=f.measurePageBox();Xi(p,g),OT(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return al(this.latestValues)&&OT(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=xn.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ve(),this.relativeTargetOrigin=Ve(),jf(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ve(),this.targetWithTransforms=Ve()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xi(this.target,this.layout.layoutBox),dk(this.target,this.targetDelta)):Xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ve(),this.relativeTargetOrigin=Ve(),jf(this.relativeTargetOrigin,this.target,w.target),Xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pf&&ll.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Kb(this.parent.latestValues)||hk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===xn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Xi(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,w=this.treeScale.y;EO(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Ve());const{target:A}=u;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IT(this.prevProjectionDelta.x,this.projectionDelta.x),IT(this.prevProjectionDelta.y,this.projectionDelta.y)),Bf(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==w||!zT(this.projectionDelta.x,this.prevProjectionDelta.x)||!zT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),pf&&ll.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Cu(),this.projectionDelta=Cu(),this.projectionDeltaWithTransform=Cu()}setAnimationOrigin(l,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},g=Cu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Ve(),w=h?h.source:void 0,A=this.layout?this.layout.source:void 0,S=w!==A,C=this.getStack(),T=!C||C.members.length<=1,M=!!(S&&!T&&this.options.crossfade===!0&&!this.path.some(cB));this.animationProgress=0;let k;this.mixTargetDelta=D=>{const R=D/1e3;GT(g.x,l.x,R),GT(g.y,l.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jf(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lB(this.relativeTarget,this.relativeTargetOrigin,y,R),k&&GO(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Ve()),Xi(k,this.relativeTarget)),S&&(this.animationValues=p,VO(p,f,this.latestValues,R,M,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Va(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.update(()=>{Ey.hasAnimatedSinceResize=!0,this.currentAnimation=IO(0,HT,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=l;if(!(!u||!h||!f)){if(this!==l&&this.layout&&f&&Sk(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Ve();const g=ji(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+g;const y=ji(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+y}Xi(u,h),_u(u,p),Bf(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new XO),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&wb("z",l,f,this.animationValues);for(let p=0;p<vb.length;p++)wb(`rotate${vb[p]}`,l,f,this.animationValues),wb(`skew${vb[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return qO;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Sy(l==null?void 0:l.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Sy(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!al(this.latestValues)&&(S.transform=p?p({},""):"none",this.hasProjected=!1),S}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=YO(this.projectionDeltaWithTransform,this.treeScale,y),p&&(f.transform=p(y,f.transform));const{x:w,y:A}=this.projectionDelta;f.transformOrigin=`${w.origin*100}% ${A.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=y.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:f.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const S in cv){if(y[S]===void 0)continue;const{correct:C,applyTo:T}=cv[S],M=f.transform==="none"?y[S]:C(y[S],g);if(T){const k=T.length;for(let D=0;D<k;D++)f[T[D]]=M}else f[S]=M}return this.options.layoutId&&(f.pointerEvents=g===this?Sy(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(WT),this.root.sharedNodes.clear()}}}function QO(s){s.updateLayout()}function JO(s){var t;const e=((t=s.resumeFrom)===null||t===void 0?void 0:t.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&e&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=s.layout,{animationType:o}=s.options,l=e.source!==s.layout.source;o==="size"?Ki(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],w=ji(y);y.min=n[g].min,y.max=y.min+w}):Sk(o,e.layoutBox,n)&&Ki(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],w=ji(n[g]);y.max=y.min+w,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[g].max=s.relativeTarget[g].min+w)});const u=Cu();Bf(u,n,e.layoutBox);const h=Cu();l?Bf(h,s.applyTransform(i,!0),e.measuredBox):Bf(h,n,e.layoutBox);const f=!vk(u);let p=!1;if(!s.resumeFrom){const g=s.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:w}=g;if(y&&w){const A=Ve();jf(A,e.layoutBox,y.layoutBox);const S=Ve();jf(S,n,w.layoutBox),wk(A,S)||(p=!0),g.options.layoutRoot&&(s.relativeTarget=S,s.relativeTargetOrigin=A,s.relativeParent=g)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function ZO(s){pf&&ll.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function tB(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function eB(s){s.clearSnapshot()}function WT(s){s.clearMeasurements()}function nB(s){s.isLayoutDirty=!1}function iB(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function $T(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function sB(s){s.resolveTargetDelta()}function rB(s){s.calcProjection()}function oB(s){s.resetSkewAndRotation()}function aB(s){s.removeLeadSnapshot()}function GT(s,t,e){s.translate=Ce(t.translate,0,e),s.scale=Ce(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function XT(s,t,e,n){s.min=Ce(t.min,e.min,n),s.max=Ce(t.max,e.max,n)}function lB(s,t,e,n){XT(s.x,t.x,e.x,n),XT(s.y,t.y,e.y,n)}function cB(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const uB={duration:.45,ease:[.4,0,.1,1]},YT=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),qT=YT("applewebkit/")&&!YT("chrome/")?Math.round:Oi;function KT(s){s.min=qT(s.min),s.max=qT(s.max)}function hB(s){KT(s.x),KT(s.y)}function Sk(s,t,e){return s==="position"||s==="preserve-aspect"&&!pO(UT(t),UT(e),.2)}function dB(s){var t;return s!==s.root&&((t=s.scroll)===null||t===void 0?void 0:t.wasRoot)}const fB=xk({attachResizeListener:(s,t)=>Gf(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bb={current:void 0},Ak=xk({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!bb.current){const s=new fB({});s.mount(window),s.setOptions({layoutScroll:!0}),bb.current=s}return bb.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),pB={pan:{Feature:MO},drag:{Feature:kO,ProjectionNode:Ak,MeasureLayout:mk}};function QT(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,o=n[i];o&&ge.postRender(()=>o(t,Gm(t)))}class mB extends $a{mount(){const{current:t}=this.node;t&&(this.unmount=pN(t,e=>(QT(this.node,e,"Start"),n=>QT(this.node,n,"End"))))}unmount(){}}class gB extends $a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$m(Gf(this.node.current,"focus",()=>this.onFocus()),Gf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JT(s,t,e){const{props:n}=s;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),o=n[i];o&&ge.postRender(()=>o(t,Gm(t)))}class yB extends $a{mount(){const{current:t}=this.node;t&&(this.unmount=vN(t,e=>(JT(this.node,e,"Start"),(n,{success:i})=>JT(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jb=new WeakMap,xb=new WeakMap,vB=s=>{const t=Jb.get(s.target);t&&t(s)},wB=s=>{s.forEach(vB)};function bB({root:s,...t}){const e=s||document;xb.has(e)||xb.set(e,{});const n=xb.get(e),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(wB,{root:s,...t})),n[i]}function xB(s,t,e){const n=bB(t);return Jb.set(s,e),n.observe(s),()=>{Jb.delete(s),n.unobserve(s)}}const SB={some:0,all:1};class AB extends $a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:i="some",once:o}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:SB[i]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=f?p:g;y&&y(h)};return xB(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(EB(t,e))&&this.startObserver()}unmount(){}}function EB({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const CB={inView:{Feature:AB},tap:{Feature:yB},focus:{Feature:gB},hover:{Feature:mB}},TB={layout:{ProjectionNode:Ak,MeasureLayout:mk}},Zb={current:null},Ek={current:!1};function _B(){if(Ek.current=!0,!!FS)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Zb.current=s.matches;s.addListener(t),t()}else Zb.current=!1}const PB=[...qP,Fn,Ua],kB=s=>PB.find(YP(s)),ZT=new WeakMap;function MB(s,t,e){for(const n in t){const i=t[n],o=e[n];if(On(i))s.addValue(n,i);else if(On(o))s.addValue(n,Wf(i,{owner:s}));else if(o!==i)if(s.hasValue(n)){const l=s.getValue(n);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=s.getStaticValue(n);s.addValue(n,Wf(l!==void 0?l:i,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const t_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DB{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=mr.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,ge.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=t0(e),this.isVariantNode=iP(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(e,{},this);for(const w in y){const A=y[w];h[w]!==void 0&&On(A)&&A.set(h[w],!1)}}mount(t){this.current=t,ZT.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),Ek.current||_B(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ZT.delete(this.current),this.projection&&this.projection.unmount(),Va(this.notifyUpdate),Va(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Oc.has(t),i=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&ge.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=e.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),o(),l&&l(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in cd){const e=cd[t];if(!e)continue;const{isEnabled:n,Feature:i}=e;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ve()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<t_.length;n++){const i=t_[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=t[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=MB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Wf(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(GP(i)||OP(i))?i=parseFloat(i):!kB(i)&&Ua.test(e)&&(i=HP(t,e)),this.setBaseTarget(t,On(i)?i.get():i)),On(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const l=HS(this.props,n,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);l&&(i=l[t])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!On(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new iA),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class Ck extends DB{constructor(){super(...arguments),this.KeyframeResolver=KP}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;On(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function RB(s){return window.getComputedStyle(s)}class LB extends Ck{constructor(){super(...arguments),this.type="html",this.renderInstance=dP}readValueFromInstance(t,e){if(Oc.has(e)){const n=lA(e);return n&&n.default||0}else{const n=RB(t),i=(cP(e)?n.getPropertyValue(e):n[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return fk(t,e)}build(t,e,n){GS(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return KS(t,e,n)}}class IB extends Ck{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ve}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Oc.has(e)){const n=lA(e);return n&&n.default||0}return e=fP.has(e)?e:VS(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return gP(t,e,n)}build(t,e,n){XS(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,i){pP(t,e,n,i)}mount(t){this.isSVGTag=qS(t.tagName),super.mount(t)}}const NB=(s,t)=>zS(s)?new IB(t):new LB(t,{allowProjection:s!==U.Fragment}),FB=aN({...rO,...CB,...pB,...TB},NB),hd=SI(FB),OB=[{to:"/",label:"Command Center"},{to:"/combat-drills",label:"Combat Drills"},{to:"/deep-work",label:"Deep Work"},{to:"/legion",label:"The Legion"}];function BB(){const s=Fc();return F.jsxs("div",{className:"min-h-screen bg-primary text-white flex flex-col",children:[F.jsx("header",{className:"border-b border-white/5 bg-black/40 backdrop-blur-xl",children:F.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsx("div",{className:"h-8 w-8 rounded-xl bg-gradient-to-br from-accent to-urgent shadow-neon"}),F.jsxs("div",{children:[F.jsx("div",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Sarwak"}),F.jsx("div",{className:"text-xs text-white/50",children:"Elite Study Command Center"})]})]}),F.jsx("nav",{className:"flex gap-2 text-xs",children:OB.map(t=>F.jsx(rI,{to:t.to,className:({isActive:e})=>["px-3 py-1 rounded-full border border-white/5","hover:border-accent/60 hover:text-accent transition-colors",e?"bg-accent/20 text-accent":"text-white/60"].join(" "),children:t.label},t.to))})]})}),F.jsx("main",{className:"flex-1",children:F.jsx(pI,{mode:"wait",children:F.jsx(hd.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"max-w-6xl mx-auto px-6 py-8",children:F.jsx(Nb,{})},s.pathname)})})]})}const Tk=6048e5,jB=864e5,e_=Symbol.for("constructDateFrom");function gr(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&e_ in s?s[e_](t):s instanceof Date?new s.constructor(t):new Date(t)}function ds(s,t){return gr(t||s,s)}function VB(s,t,e){const n=ds(s,e==null?void 0:e.in);return isNaN(t)?gr(s,NaN):(n.setDate(n.getDate()+t),n)}let UB={};function i0(){return UB}function Xf(s,t){var u,h,f,p;const e=i0(),n=(t==null?void 0:t.weekStartsOn)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??e.weekStartsOn??((p=(f=e.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=ds(s,t==null?void 0:t.in),o=i.getDay(),l=(o<n?7:0)+o-n;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function mv(s,t){return Xf(s,{...t,weekStartsOn:1})}function _k(s,t){const e=ds(s,t==null?void 0:t.in),n=e.getFullYear(),i=gr(e,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const o=mv(i),l=gr(e,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);const u=mv(l);return e.getTime()>=o.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}function n_(s){const t=ds(s),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+s-+e}function Pk(s,...t){const e=gr.bind(null,t.find(n=>typeof n=="object"));return t.map(e)}function i_(s,t){const e=ds(s,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function zB(s,t,e){const[n,i]=Pk(e==null?void 0:e.in,s,t),o=i_(n),l=i_(i),u=+o-n_(o),h=+l-n_(l);return Math.round((u-h)/jB)}function HB(s,t){const e=_k(s,t),n=gr(s,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),mv(n)}function WB(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function $B(s){return!(!WB(s)&&typeof s!="number"||isNaN(+ds(s)))}function GB(s,t){const[e,n]=Pk(s,t.start,t.end);return{start:e,end:n}}function XB(s,t){const{start:e,end:n}=GB(t==null?void 0:t.in,s);let i=+e>+n;const o=i?+e:+n,l=i?n:e;l.setHours(0,0,0,0);let u=1;const h=[];for(;+l<=o;)h.push(gr(e,l)),l.setDate(l.getDate()+u),l.setHours(0,0,0,0);return i?h.reverse():h}function YB(s,t){const e=ds(s,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const qB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KB=(s,t,e)=>{let n;const i=qB[s];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function Sb(s){return(t={})=>{const e=t.width?String(t.width):s.defaultWidth;return s.formats[e]||s.formats[s.defaultWidth]}}const QB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},JB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ZB={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tj={date:Sb({formats:QB,defaultWidth:"full"}),time:Sb({formats:JB,defaultWidth:"full"}),dateTime:Sb({formats:ZB,defaultWidth:"full"})},ej={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nj=(s,t,e,n)=>ej[s];function rf(s){return(t,e)=>{const n=e!=null&&e.context?String(e.context):"standalone";let i;if(n==="formatting"&&s.formattingValues){const l=s.defaultFormattingWidth||s.defaultWidth,u=e!=null&&e.width?String(e.width):l;i=s.formattingValues[u]||s.formattingValues[l]}else{const l=s.defaultWidth,u=e!=null&&e.width?String(e.width):s.defaultWidth;i=s.values[u]||s.values[l]}const o=s.argumentCallback?s.argumentCallback(t):t;return i[o]}}const ij={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},aj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cj=(s,t)=>{const e=Number(s),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},uj={ordinalNumber:cj,era:rf({values:ij,defaultWidth:"wide"}),quarter:rf({values:sj,defaultWidth:"wide",argumentCallback:s=>s-1}),month:rf({values:rj,defaultWidth:"wide"}),day:rf({values:oj,defaultWidth:"wide"}),dayPeriod:rf({values:aj,defaultWidth:"wide",formattingValues:lj,defaultFormattingWidth:"wide"})};function of(s){return(t,e={})=>{const n=e.width,i=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],o=t.match(i);if(!o)return null;const l=o[0],u=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],h=Array.isArray(u)?dj(u,g=>g.test(l)):hj(u,g=>g.test(l));let f;f=s.valueCallback?s.valueCallback(h):h,f=e.valueCallback?e.valueCallback(f):f;const p=t.slice(l.length);return{value:f,rest:p}}}function hj(s,t){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&t(s[e]))return e}function dj(s,t){for(let e=0;e<s.length;e++)if(t(s[e]))return e}function fj(s){return(t,e={})=>{const n=t.match(s.matchPattern);if(!n)return null;const i=n[0],o=t.match(s.parsePattern);if(!o)return null;let l=s.valueCallback?s.valueCallback(o[0]):o[0];l=e.valueCallback?e.valueCallback(l):l;const u=t.slice(i.length);return{value:l,rest:u}}}const pj=/^(\d+)(th|st|nd|rd)?/i,mj=/\d+/i,gj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yj={any:[/^b/i,/^(a|c)/i]},vj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wj={any:[/1/i,/2/i,/3/i,/4/i]},bj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Aj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ej={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Cj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tj={ordinalNumber:fj({matchPattern:pj,parsePattern:mj,valueCallback:s=>parseInt(s,10)}),era:of({matchPatterns:gj,defaultMatchWidth:"wide",parsePatterns:yj,defaultParseWidth:"any"}),quarter:of({matchPatterns:vj,defaultMatchWidth:"wide",parsePatterns:wj,defaultParseWidth:"any",valueCallback:s=>s+1}),month:of({matchPatterns:bj,defaultMatchWidth:"wide",parsePatterns:xj,defaultParseWidth:"any"}),day:of({matchPatterns:Sj,defaultMatchWidth:"wide",parsePatterns:Aj,defaultParseWidth:"any"}),dayPeriod:of({matchPatterns:Ej,defaultMatchWidth:"any",parsePatterns:Cj,defaultParseWidth:"any"})},_j={code:"en-US",formatDistance:KB,formatLong:tj,formatRelative:nj,localize:uj,match:Tj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Pj(s,t){const e=ds(s,t==null?void 0:t.in);return zB(e,YB(e))+1}function kj(s,t){const e=ds(s,t==null?void 0:t.in),n=+mv(e)-+HB(e);return Math.round(n/Tk)+1}function kk(s,t){var p,g,y,w;const e=ds(s,t==null?void 0:t.in),n=e.getFullYear(),i=i0(),o=(t==null?void 0:t.firstWeekContainsDate)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((w=(y=i.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??1,l=gr((t==null?void 0:t.in)||s,0);l.setFullYear(n+1,0,o),l.setHours(0,0,0,0);const u=Xf(l,t),h=gr((t==null?void 0:t.in)||s,0);h.setFullYear(n,0,o),h.setHours(0,0,0,0);const f=Xf(h,t);return+e>=+u?n+1:+e>=+f?n:n-1}function Mj(s,t){var u,h,f,p;const e=i0(),n=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??e.firstWeekContainsDate??((p=(f=e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,i=kk(s,t),o=gr((t==null?void 0:t.in)||s,0);return o.setFullYear(i,0,n),o.setHours(0,0,0,0),Xf(o,t)}function Dj(s,t){const e=ds(s,t==null?void 0:t.in),n=+Xf(e,t)-+Mj(e,t);return Math.round(n/Tk)+1}function Qt(s,t){const e=s<0?"-":"",n=Math.abs(s).toString().padStart(t,"0");return e+n}const Ho={y(s,t){const e=s.getFullYear(),n=e>0?e:1-e;return Qt(t==="yy"?n%100:n,t.length)},M(s,t){const e=s.getMonth();return t==="M"?String(e+1):Qt(e+1,2)},d(s,t){return Qt(s.getDate(),t.length)},a(s,t){const e=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(s,t){return Qt(s.getHours()%12||12,t.length)},H(s,t){return Qt(s.getHours(),t.length)},m(s,t){return Qt(s.getMinutes(),t.length)},s(s,t){return Qt(s.getSeconds(),t.length)},S(s,t){const e=t.length,n=s.getMilliseconds(),i=Math.trunc(n*Math.pow(10,e-3));return Qt(i,t.length)}},du={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},s_={G:function(s,t,e){const n=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(s,t,e){if(t==="yo"){const n=s.getFullYear(),i=n>0?n:1-n;return e.ordinalNumber(i,{unit:"year"})}return Ho.y(s,t)},Y:function(s,t,e,n){const i=kk(s,n),o=i>0?i:1-i;if(t==="YY"){const l=o%100;return Qt(l,2)}return t==="Yo"?e.ordinalNumber(o,{unit:"year"}):Qt(o,t.length)},R:function(s,t){const e=_k(s);return Qt(e,t.length)},u:function(s,t){const e=s.getFullYear();return Qt(e,t.length)},Q:function(s,t,e){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Qt(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,t,e){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Qt(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,t,e){const n=s.getMonth();switch(t){case"M":case"MM":return Ho.M(s,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(s,t,e){const n=s.getMonth();switch(t){case"L":return String(n+1);case"LL":return Qt(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(s,t,e,n){const i=Dj(s,n);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):Qt(i,t.length)},I:function(s,t,e){const n=kj(s);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):Qt(n,t.length)},d:function(s,t,e){return t==="do"?e.ordinalNumber(s.getDate(),{unit:"date"}):Ho.d(s,t)},D:function(s,t,e){const n=Pj(s);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):Qt(n,t.length)},E:function(s,t,e){const n=s.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(s,t,e,n){const i=s.getDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Qt(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(s,t,e,n){const i=s.getDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Qt(o,t.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(s,t,e){const n=s.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return Qt(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(s,t,e){const i=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,t,e){const n=s.getHours();let i;switch(n===12?i=du.noon:n===0?i=du.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,t,e){const n=s.getHours();let i;switch(n>=17?i=du.evening:n>=12?i=du.afternoon:n>=4?i=du.morning:i=du.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,t,e){if(t==="ho"){let n=s.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return Ho.h(s,t)},H:function(s,t,e){return t==="Ho"?e.ordinalNumber(s.getHours(),{unit:"hour"}):Ho.H(s,t)},K:function(s,t,e){const n=s.getHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):Qt(n,t.length)},k:function(s,t,e){let n=s.getHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):Qt(n,t.length)},m:function(s,t,e){return t==="mo"?e.ordinalNumber(s.getMinutes(),{unit:"minute"}):Ho.m(s,t)},s:function(s,t,e){return t==="so"?e.ordinalNumber(s.getSeconds(),{unit:"second"}):Ho.s(s,t)},S:function(s,t){return Ho.S(s,t)},X:function(s,t,e){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return o_(n);case"XXXX":case"XX":return cl(n);case"XXXXX":case"XXX":default:return cl(n,":")}},x:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"x":return o_(n);case"xxxx":case"xx":return cl(n);case"xxxxx":case"xxx":default:return cl(n,":")}},O:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+r_(n,":");case"OOOO":default:return"GMT"+cl(n,":")}},z:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+r_(n,":");case"zzzz":default:return"GMT"+cl(n,":")}},t:function(s,t,e){const n=Math.trunc(+s/1e3);return Qt(n,t.length)},T:function(s,t,e){return Qt(+s,t.length)}};function r_(s,t=""){const e=s>0?"-":"+",n=Math.abs(s),i=Math.trunc(n/60),o=n%60;return o===0?e+String(i):e+String(i)+t+Qt(o,2)}function o_(s,t){return s%60===0?(s>0?"-":"+")+Qt(Math.abs(s)/60,2):cl(s,t)}function cl(s,t=""){const e=s>0?"-":"+",n=Math.abs(s),i=Qt(Math.trunc(n/60),2),o=Qt(n%60,2);return e+i+t+o}const a_=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Mk=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Rj=(s,t)=>{const e=s.match(/(P+)(p+)?/)||[],n=e[1],i=e[2];if(!i)return a_(s,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",a_(n,t)).replace("{{time}}",Mk(i,t))},Lj={p:Mk,P:Rj},Ij=/^D+$/,Nj=/^Y+$/,Fj=["D","DD","YY","YYYY"];function Oj(s){return Ij.test(s)}function Bj(s){return Nj.test(s)}function jj(s,t,e){const n=Vj(s,t,e);if(console.warn(n),Fj.includes(s))throw new RangeError(n)}function Vj(s,t,e){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Uj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hj=/^'([^]*?)'?$/,Wj=/''/g,$j=/[a-zA-Z]/;function Gj(s,t,e){var p,g,y,w;const n=i0(),i=n.locale??_j,o=n.firstWeekContainsDate??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,l=n.weekStartsOn??((w=(y=n.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,u=ds(s,e==null?void 0:e.in);if(!$B(u))throw new RangeError("Invalid time value");let h=t.match(zj).map(A=>{const S=A[0];if(S==="p"||S==="P"){const C=Lj[S];return C(A,i.formatLong)}return A}).join("").match(Uj).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const S=A[0];if(S==="'")return{isToken:!1,value:Xj(A)};if(s_[S])return{isToken:!0,value:A};if(S.match($j))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:A}});i.localize.preprocessor&&(h=i.localize.preprocessor(u,h));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return h.map(A=>{if(!A.isToken)return A.value;const S=A.value;(Bj(S)||Oj(S))&&jj(S,t,String(s));const C=s_[S[0]];return C(u,S,i.localize,f)}).join("")}function Xj(s){const t=s.match(Hj);return t?t[1].replace(Wj,"'"):s}function Yj(s,t,e){return VB(s,-29,e)}const Ab=[0,15,45,90,180];function qj(s){return s===0?0:s<Ab[1]?1:s<Ab[2]?2:s<Ab[3]?3:4}function Kj({studyMinutesByDay:s}){const t=new Date,e=Yj(t),n=XB({start:e,end:t});return F.jsxs("div",{className:"glass-panel rounded-xl p-4",children:[F.jsxs("div",{className:"flex items-center justify-between mb-3",children:[F.jsx("div",{className:"text-sm font-medium text-white/80",children:"Study Velocity"}),F.jsx("div",{className:"text-[10px] uppercase tracking-[0.25em] text-white/40",children:"Last 30 days"})]}),F.jsx("div",{className:"grid grid-cols-[repeat(30,minmax(0,1fr))] gap-[3px]",children:n.map(i=>{const o=Gj(i,"yyyy-MM-dd"),l=s[o]??0,u=qj(l),h=["bg-surface/40","bg-accent/20","bg-accent/40","bg-accent/70","bg-accent"];return F.jsx("div",{className:`h-6 rounded-sm ${h[u]} transition-colors`,title:`${o}: ${l} min`},o)})})]})}function Qj({subjects:s,mastery:t}){return F.jsxs("div",{className:"glass-panel rounded-xl p-4 space-y-3",children:[F.jsx("div",{className:"text-sm font-medium text-white/80",children:"Subject Mastery"}),F.jsx("div",{className:"space-y-3",children:s.map(e=>{const n=t[e.id]??0;return F.jsxs("div",{className:"space-y-1",children:[F.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[F.jsx("span",{children:e.name}),F.jsxs("span",{children:[n,"%"]})]}),F.jsx("div",{className:"h-2.5 rounded-full bg-surface/60 overflow-hidden",children:F.jsx(hd.div,{initial:{width:0},animate:{width:`${n}%`},transition:{duration:.5},className:"h-full bg-gradient-to-r from-accent to-urgent"})})]},e.id)})})]})}function Jj({summary:s}){return F.jsxs("div",{className:"glass-panel rounded-xl p-4 flex flex-col justify-between",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsxs("div",{children:[F.jsx("div",{className:"text-xs uppercase tracking-[0.25em] text-white/40",children:"Global Power Level"}),F.jsx("div",{className:"text-[11px] text-white/40",children:"Hours vs accuracy across all drills"})]}),F.jsx("div",{className:"relative",children:F.jsx(hd.div,{className:"h-16 w-16 rounded-full border border-accent/40 flex items-center justify-center shadow-neon",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:F.jsx(hd.span,{className:"text-2xl font-semibold text-accent",initial:{scale:.8},animate:{scale:1},children:s.score})})})]}),F.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[11px] text-white/60",children:[F.jsxs("div",{children:[F.jsx("div",{className:"text-white/40 mb-0.5",children:"Study last 30 days"}),F.jsxs("div",{className:"text-sm text-white",children:[(s.totalStudyMinutesLast30Days/60).toFixed(1)," h"]})]}),F.jsxs("div",{children:[F.jsx("div",{className:"text-white/40 mb-0.5",children:"Drill accuracy"}),F.jsxs("div",{className:"text-sm text-white",children:[Math.round(s.averageDrillAccuracy*100),"%"]})]})]})]})}const l_=s=>{let t;const e=new Set,n=(f,p)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(w=>w(t,y))}},i=()=>t,u={setState:n,getState:i,getInitialState:()=>h,subscribe:f=>(e.add(f),()=>e.delete(f))},h=t=s(n,i,u);return u},Zj=(s=>s?l_(s):l_),t3=s=>s;function e3(s,t=t3){const e=Su.useSyncExternalStore(s.subscribe,Su.useCallback(()=>t(s.getState()),[s,t]),Su.useCallback(()=>t(s.getInitialState()),[s,t]));return Su.useDebugValue(e),e}const c_=s=>{const t=Zj(s),e=n=>e3(t,n);return Object.assign(e,t),e},n3=(s=>s?c_(s):c_),Dk=n3((s,t)=>({activeSubject:null,isGrinding:!1,currentSessionStart:null,sessions:[],powerLevel:{score:0,totalStudyMinutesLast30Days:0,averageDrillAccuracy:0},setActiveSubject(e){s({activeSubject:e})},startGrind(e){const n=new Date().toISOString();s({activeSubject:e,isGrinding:!0,currentSessionStart:n})},stopGrind(){const e=t();if(!e.isGrinding||!e.currentSessionStart||!e.activeSubject)return;const n=new Date(e.currentSessionStart),i=new Date,o=Math.max(1,Math.round((i.getTime()-n.getTime())/6e4)),l={id:crypto.randomUUID(),subjectId:e.activeSubject,startedAt:n.toISOString(),endedAt:i.toISOString(),durationMinutes:o},u=[...e.sessions,l],h=u.reduce((f,p)=>f+p.durationMinutes,0);s({isGrinding:!1,currentSessionStart:null,sessions:u,powerLevel:{...e.powerLevel,totalStudyMinutesLast30Days:h,score:Math.min(100,Math.round(h/10))}})}}));function Rk({subjects:s}){const{activeSubject:t,isGrinding:e,startGrind:n,stopGrind:i,setActiveSubject:o}=Dk(),[l,u]=U.useState(0),h=1e3;U.useEffect(()=>{let g;return e&&(g=window.setInterval(()=>{u(y=>y+1)},h)),()=>{g!==void 0&&window.clearInterval(g)}},[e]),U.useEffect(()=>{e||u(0)},[e]);const f=Math.floor(l/60),p=l%60;return F.jsxs("div",{className:"glass-panel rounded-xl p-4 space-y-3",children:[F.jsxs("div",{className:"flex items-center justify-between",children:[F.jsxs("div",{children:[F.jsx("div",{className:"text-sm font-medium text-white/80",children:"Deep Work Grinder"}),F.jsx("div",{className:"text-[11px] text-white/40",children:"Tag each grind to a subject"})]}),F.jsx("div",{className:"text-xs text-white/50",children:e?"Grinding...":"Idle"})]}),F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsx(hd.div,{className:"h-20 w-20 rounded-2xl bg-black/60 flex items-center justify-center border border-accent/40 shadow-neon",animate:{boxShadow:e?"0 0 24px rgba(46, 91, 255, 0.9)":"0 0 8px rgba(46, 91, 255, 0.4)",scale:e?1.03:1},transition:{duration:.25},children:F.jsxs("div",{className:"text-xl font-mono",children:[String(f).padStart(2,"0"),":",String(p).padStart(2,"0")]})}),F.jsxs("div",{className:"flex-1 space-y-2",children:[F.jsxs("select",{value:t??"",onChange:g=>o(g.target.value),className:"w-full bg-surface/80 border border-white/10 rounded-lg px-3 py-2 text-xs focus:outline-none focus:border-accent/70",children:[F.jsx("option",{value:"",children:"Select subject"}),s.map(g=>F.jsx("option",{value:g.id,children:g.name},g.id))]}),F.jsxs("div",{className:"flex gap-2",children:[F.jsx("button",{type:"button",disabled:!t||e,onClick:()=>{t&&n(t)},className:"neon-button px-3 py-2 rounded-lg bg-accent text-xs font-medium disabled:opacity-30 disabled:cursor-not-allowed",children:"Start Grind"}),F.jsx("button",{type:"button",disabled:!e,onClick:()=>i(),className:"neon-button-urgent px-3 py-2 rounded-lg bg-urgent text-xs font-medium disabled:opacity-30 disabled:cursor-not-allowed",children:"Stop"})]})]})]}),F.jsx("div",{className:"text-[11px] text-white/40",children:"Berserk Mode and distraction blocking can be wired to extensions or integrations."})]})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=s=>{const t=s3(s);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=U.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:l,...u},h)=>U.createElement("svg",{ref:h,...r3,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:Lk("lucide",i),...!o&&!o3(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,p])=>U.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=(s,t)=>{const e=U.forwardRef(({className:n,...i},o)=>U.createElement(a3,{ref:o,iconNode:t,className:Lk(`lucide-${i3(u_(s))}`,`lucide-${s}`,n),...i}));return e.displayName=u_(s),e};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],c3=fA("plus",l3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],h3=fA("sparkles",u3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],f3=fA("x",d3),p3="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent",m3="You are a rigorous examiner for elite competitive exams. Focus on application and analysis, not memorization. Given study material, generate exactly 5 difficult MCQs as 'combatDrills' and 10 spaced-repetition flashcards as 'flashcards'. Return only minified JSON with fields { combatDrills: [...], flashcards: [...] } where MCQs include id, question, options, correctOptionId, explanation, subjectId, difficulty='hard' and flashcards include id, front, back, subjectId.",g3=void 0;function y3(){throw new Error("CRITICAL: VITE_GEMINI_API_KEY is missing from environment variables.")}async function v3(s){var f,p,g,y,w;y3();const t=[{text:m3+`

Subject: `+s.subjectId+`

Study material:
`+s.materialText}];s.images&&t.push(...s.images);const n=await fetch(p3,{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":g3},body:JSON.stringify({contents:[{role:"user",parts:t}]})});if(!n.ok)throw new Error(`Failed to contact Gemini API: ${n.status} ${n.statusText}`);const i=await n.json(),o=((w=(y=(g=(p=(f=i==null?void 0:i.candidates)==null?void 0:f[0])==null?void 0:p.content)==null?void 0:g.parts)==null?void 0:y[0])==null?void 0:w.text)??"";if(!o)throw new Error("Gemini API returned an empty response");let l;try{l=JSON.parse(o)}catch{throw console.error("Failed to parse Gemini response:",o),new Error("Received malformed response from AI")}const u=l.combatDrills,h=(l.flashcards??[]).map(A=>({id:A.id??crypto.randomUUID(),front:A.front??"",back:A.back??"",subjectId:A.subjectId??s.subjectId,interval:1,repetition:0,ef:2.5,dueAt:new Date().toISOString()}));return{questions:u,flashcards:h}}const $n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),tx=[.001,0,0,.001,0,0],Eb=1.35,Ii={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Xo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Yf="pdfjs_internal_editor_",Rt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},w3={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ex={TRIANGLES:1,LATTICE:2},Ke={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Cy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},He={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},pu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},s0={ERRORS:0,WARNINGS:1,INFOS:5},qf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},af={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},b3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r0=s0.WARNINGS;function x3(s){Number.isInteger(s)&&(r0=s)}function S3(){return r0}function o0(s){r0>=s0.INFOS&&console.info(`Info: ${s}`)}function kt(s){r0>=s0.WARNINGS&&console.warn(`Warning: ${s}`)}function le(s){throw new Error(s)}function Vt(s,t){s||le(t)}function A3(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ik(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=P3(s)}catch{}}const n=t?URL.parse(s,t):URL.parse(s);return A3(n)?n:null}function Nk(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&Ik(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Mt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Bc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class h_ extends Bc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Cb extends Bc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class nx extends Bc{constructor(t){super(t,"InvalidPDFException")}}class gv extends Bc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class E3 extends Bc{constructor(t){super(t,"FormatError")}}class za extends Bc{constructor(t){super(t,"AbortException")}}function Fk(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&le("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const o=Math.min(i+e,t),l=s.subarray(i,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Xm(s){typeof s!="string"&&le("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function C3(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function T3(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function _3(){try{return new Function(""),!0}catch{return!1}}class en{static get isLittleEndian(){return Mt(this,"isLittleEndian",T3())}static get isEvalSupported(){return Mt(this,"isEvalSupported",_3())}static get isOffscreenCanvasSupported(){return Mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Mt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Mt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Mt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Mt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Mt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Tb=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var go,Ty,ix;class st{static makeHexColor(t,e,n){return`#${Tb[t]}${Tb[e]}${Tb[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],o=t[n+1];t[n]=i*e[0]+o*e[2]+e[4],t[n+1]=i*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const g=t[n+p],y=t[n+p+1];t[n+p]=g*i+y*l+h,t[n+p+1]=g*o+y*u+f}}static applyInverseTransform(t,e){const n=t[0],i=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const i=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5],p=t[0],g=t[1],y=t[2],w=t[3];let A=i*p+h,S=A,C=i*y+h,T=C,M=u*g+f,k=M,D=u*w+f,R=D;if(o!==0||l!==0){const I=o*p,j=o*y,H=l*g,X=l*w;A+=H,T+=H,C+=X,S+=X,M+=I,R+=I,D+=j,k+=j}n[0]=Math.min(n[0],A,C,S,T),n[1]=Math.min(n[1],M,D,k,R),n[2]=Math.max(n[2],A,C,S,T),n[3]=Math.max(n[3],M,D,k,R)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],o=t[2],l=t[3],u=n**2+i**2,h=n*o+i*l,f=o**2+l**2,p=(u+f)/2,g=Math.sqrt(p**2-(u*f-h**2));e[0]=Math.sqrt(p+g||1),e[1]=Math.sqrt(p-g||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,i,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,i),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,i)}static bezierBoundingBox(t,e,n,i,o,l,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),_(this,go,ix).call(this,t,n,o,u,e,i,l,h,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),_(this,go,ix).call(this,t,n,o,u,e,i,l,h,3*(-e+3*(i-l)+h),6*(e-2*i+l),3*(i-e),f)}}go=new WeakSet,Ty=function(t,e,n,i,o,l,u,h,f,p){if(f<=0||f>=1)return;const g=1-f,y=f*f,w=y*f,A=g*(g*(g*t+3*f*e)+3*y*n)+w*i,S=g*(g*(g*o+3*f*l)+3*y*u)+w*h;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],S)},ix=function(t,e,n,i,o,l,u,h,f,p,g,y){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&_(this,go,Ty).call(this,t,e,n,i,o,l,u,h,-g/p,y);return}const w=p**2-4*g*f;if(w<0)return;const A=Math.sqrt(w),S=2*f;_(this,go,Ty).call(this,t,e,n,i,o,l,u,h,(-p+A)/S,y),_(this,go,Ty).call(this,t,e,n,i,o,l,u,h,(-p-A)/S,y)},E(st,go);function P3(s){return decodeURIComponent(escape(s))}let _b=null,d_=null;function k3(s){return _b||(_b=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,d_=new Map([["","t"]])),s.replaceAll(_b,(t,e,n)=>e?e.normalize("NFKC"):d_.get(n))}function Ok(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),Fk(s)}const Pu="pdfjs_internal_id_";function M3(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...o]=e;if(!s(n)&&!Number.isInteger(n)||!t(i))return!1;const l=o.length;let u=!0;switch(i.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Gn(s,t,e){return Math.min(Math.max(s,t),e)}function Bk(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(Fk(s))}function D3(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):Xm(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class Kf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(o){var h;if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Kf.shouldBuildText(u))(h=o==null?void 0:o.attributes)!=null&&h.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const f of o.children)i(f)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class jk{static setupStorage(t,e,n,i,o){const l=i.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{i.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var g,y;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,o=t.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:o,linkService:n});const u=o!=="richText",h=t.div;if(h.append(l),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=w}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const w=document.createTextNode(i.value);l.append(w),u&&Kf.shouldBuildText(i.name)&&f.push(w)}return{textDivs:f}}const p=[[i,-1,l]];for(;p.length>0;){const[w,A,S]=p.at(-1);if(A+1===w.children.length){p.pop();continue}const C=w.children[++p.at(-1)[1]];if(C===null)continue;const{name:T}=C;if(T==="#text"){const k=document.createTextNode(C.value);f.push(k),S.append(k);continue}const M=(g=C==null?void 0:C.attributes)!=null&&g.xmlns?document.createElementNS(C.attributes.xmlns,T):document.createElement(T);if(S.append(M),C.attributes&&this.setAttributes({html:M,element:C,storage:e,intent:o,linkService:n}),((y=C.children)==null?void 0:y.length)>0)p.push([C,-1,M]);else if(C.value){const k=document.createTextNode(C.value);u&&Kf.shouldBuildText(T)&&f.push(k),M.append(k)}}for(const w of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const _r="http://www.w3.org/2000/svg",fl=class fl{};K(fl,"CSS",96),K(fl,"PDF",72),K(fl,"PDF_TO_CSS_UNITS",fl.CSS/fl.PDF);let Ha=fl;async function Ym(s,t="text"){if(mf(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class qm{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=o,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,g,y,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,g=0,y=0,w=1;break;case 90:p=0,g=1,y=1,w=0;break;case 270:p=0,g=-1,y=-1,w=0;break;case 0:p=1,g=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,w=-w);let A,S,C,T;p===0?(A=Math.abs(f-t[1])*n+o,S=Math.abs(h-t[0])*n+l,C=(t[3]-t[1])*n,T=(t[2]-t[0])*n):(A=Math.abs(h-t[0])*n+o,S=Math.abs(f-t[1])*n+l,C=(t[2]-t[0])*n,T=(t[3]-t[1])*n),this.transform=[p*n,g*n,y*n,w*n,A-p*n*h-y*n*f,S-g*n*h-w*n*f],this.width=C,this.height=T}get rawDims(){const t=this.viewBox;return Mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new qm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return st.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];st.applyTransform(e,this.transform);const n=[t[2],t[3]];return st.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return st.applyInverseTransform(n,this.transform),n}}class pA extends Bc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function a0(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function mA(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function R3(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function L3(s,t="document.pdf"){if(typeof s!="string")return t;if(a0(s))return kt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const i=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return i(l);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return i(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return i(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return i(h[0])}return t}class f_{constructor(){K(this,"started",Object.create(null));K(this,"times",[])}time(t){t in this.started&&kt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||kt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-i}ms
`);return t.join("")}}function mf(s,t){const e=t?URL.parse(s,t):URL.parse(s);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function hs(s){s.preventDefault()}function Ne(s){s.preventDefault(),s.stopPropagation()}function I3(s){console.log("Deprecated API usage: "+s)}var Zf;class yv{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;c(this,Zf)||b(this,Zf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,Zf).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=p,u+=g):f==="+"&&(l-=p,u-=g),new Date(Date.UTC(n,i,o,l,u,h))}}Zf=new WeakMap,E(yv,Zf);function N3(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new qm({viewBox:o,userUnit:1,scale:t,rotation:e})}function Km(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(kt(`Not a valid color format: "${s}"`),[0,0,0])}function F3(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,Km(n))}t.remove()}function Ee(s){const{a:t,b:e,c:n,d:i,e:o,f:l}=s.getTransform();return[t,e,n,i,o,l]}function zs(s){const{a:t,b:e,c:n,d:i,e:o,f:l}=s.getTransform().invertSelf();return[t,e,n,i,o,l]}function Lc(s,t,e=!1,n=!0){if(t instanceof qm){const{pageWidth:i,pageHeight:o}=t.rawDims,{style:l}=s,u=en.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=g):(l.width=g,l.height=p)}n&&s.setAttribute("data-main-rotation",t.rotation)}class yr{constructor(){const{pixelRatio:t}=yr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,o=-1){let l=1/0,u=1/0,h=1/0;n=yr.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),i!==-1&&(u=i/t,h=i/e);const f=Math.min(l,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const sx=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class O3{static get isDarkMode(){var t;return Mt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class B3{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Mt(this,"commentForegroundColor",Km(n))}}function j3(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return s=Math.round(s*n+i),t=Math.round(t*n+i),e=Math.round(e*n+i),[s,t,e]}function p_(s,t){const e=s[0]/255,n=s[1]/255,i=s[2]/255,o=Math.max(e,n,i),l=Math.min(e,n,i),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const h=o-l;switch(t[1]=u<.5?h/(o+l):h/(2-o-l),o){case e:t[0]=((n-i)/h+(n<i?6:0))*60;break;case n:t[0]=((i-e)/h+2)*60;break;case i:t[0]=((e-n)/h+4)*60;break}}t[2]=u}function rx(s,t){const e=s[0],n=s[1],i=s[2],o=(1-Math.abs(2*i-1))*n,l=o*(1-Math.abs(e/60%2-1)),u=i-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function m_(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function g_(s,t,e){rx(s,e),e.map(m_);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];rx(t,e),e.map(m_);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const y_=new Map;function V3(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=y_.get(e);if(n)return n;const i=new Float32Array(9),o=i.subarray(0,3),l=i.subarray(3,6);p_(s,l);const u=i.subarray(6,9);p_(t,u);const h=u[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),g_(l,u,o)<f){let p,g;h?(p=l[2],g=1):(p=0,g=l[2]);const y=.005;for(;g-p>y;){const w=l[2]=(p+g)/2;h===g_(l,u,o)<f?p=w:g=w}l[2]=h?g:p}return rx(l,o),n=st.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),y_.set(e,n),n}function Vk({html:s,dir:t,className:e},n){const i=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let u=0,h=l.length;u<h;++u){const f=l[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}i.append(o)}else jk.render({xfaHtml:s,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",e),n.append(i)}function Uk(s){const t=new Path2D;if(!s)return t;for(let e=0,n=s.length;e<n;)switch(s[e++]){case af.moveTo:t.moveTo(s[e++],s[e++]);break;case af.lineTo:t.lineTo(s[e++],s[e++]);break;case af.curveTo:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case af.quadraticCurveTo:t.quadraticCurveTo(s[e++],s[e++],s[e++],s[e++]);break;case af.closePath:t.closePath();break;default:kt(`Unrecognized drawing path operator: ${s[e-1]}`);break}return t}var Yo,qo,Qi,Ji,tp,Ko,Nu,Fu,ep,kv,zk,En,Hk,Wk,mu,gf;const Mr=class Mr{constructor(t){E(this,En);E(this,Yo,null);E(this,qo,null);E(this,Qi);E(this,Ji,null);E(this,tp,null);E(this,Ko,null);E(this,Nu,null);E(this,Fu,null);b(this,Qi,t),c(Mr,ep)||b(Mr,ep,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=b(this,Yo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,Qi)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",hs,{signal:e}),t.addEventListener("pointerdown",_(Mr,kv,zk),{signal:e}));const n=b(this,Ji,document.createElement("div"));n.className="buttons",t.append(n);const i=c(this,Qi).toolbarPosition;if(i){const{style:o}=t,l=c(this,Qi)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return c(this,Yo)}hide(){var t;c(this,Yo).classList.add("hidden"),(t=c(this,qo))==null||t.hideDropdown()}show(){var t,e;c(this,Yo).classList.remove("hidden"),(t=c(this,tp))==null||t.shown(),(e=c(this,Ko))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=c(this,Qi),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(Mr,ep)[t]),_(this,En,mu).call(this,n)&&n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),c(this,Ji).append(n)}async addAltText(t){const e=await t.render();_(this,En,mu).call(this,e),c(this,Ji).append(e,c(this,En,gf)),b(this,tp,t)}addComment(t,e=null){if(c(this,Ko))return;const n=t.renderForToolbar();if(!n)return;_(this,En,mu).call(this,n);const i=b(this,Nu,c(this,En,gf));e?(c(this,Ji).insertBefore(n,e),c(this,Ji).insertBefore(i,e)):c(this,Ji).append(n,i),b(this,Ko,t),t.toolbar=this}addColorPicker(t){if(c(this,qo))return;b(this,qo,t);const e=t.renderButton();_(this,En,mu).call(this,e),c(this,Ji).append(e,c(this,En,gf))}async addEditSignatureButton(t){const e=b(this,Fu,await t.renderEditButton(c(this,Qi)));_(this,En,mu).call(this,e),c(this,Ji).append(e,c(this,En,gf))}removeButton(t){var e,n;switch(t){case"comment":(e=c(this,Ko))==null||e.removeToolbarCommentButton(),b(this,Ko,null),(n=c(this,Nu))==null||n.remove(),b(this,Nu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const i=c(this,Ji).querySelector(n);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){c(this,Fu)&&(c(this,Fu).title=t)}remove(){var t;c(this,Yo).remove(),(t=c(this,qo))==null||t.destroy(),b(this,qo,null)}};Yo=new WeakMap,qo=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,tp=new WeakMap,Ko=new WeakMap,Nu=new WeakMap,Fu=new WeakMap,ep=new WeakMap,kv=new WeakSet,zk=function(t){t.stopPropagation()},En=new WeakSet,Hk=function(t){c(this,Qi)._focusEventsAllowed=!1,Ne(t)},Wk=function(t){c(this,Qi)._focusEventsAllowed=!0,Ne(t)},mu=function(t){const e=c(this,Qi)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",_(this,En,Hk).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",_(this,En,Wk).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",hs,{signal:e}),!0)},gf=function(){const t=document.createElement("div");return t.className="divider",t},E(Mr,kv),E(Mr,ep,null);let ox=Mr;var np,yl,Rr,bo,$k,Gk,ax;class U3{constructor(t){E(this,bo);E(this,np,null);E(this,yl,null);E(this,Rr);b(this,Rr,t)}show(t,e,n){const[i,o]=_(this,bo,Gk).call(this,e,n),{style:l}=c(this,yl)||b(this,yl,_(this,bo,$k).call(this));t.append(c(this,yl)),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,yl).remove()}}np=new WeakMap,yl=new WeakMap,Rr=new WeakMap,bo=new WeakSet,$k=function(){const t=b(this,yl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=c(this,Rr)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",hs,{signal:e});const n=b(this,np,document.createElement("div"));return n.className="buttons",t.append(n),c(this,Rr).hasCommentManager()&&_(this,bo,ax).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Rr).commentSelection("floating_button")}),_(this,bo,ax).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Rr).highlightSelection("floating_button")}),t},Gk=function(t,e){let n=0,i=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const u=o.x+(e?o.width:0);if(l>n){i=u,n=l;continue}e?u>i&&(i=u):u<i&&(i=u)}return[e?1-i:i,n]},ax=function(t,e,n,i){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const u=c(this,Rr)._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",hs,{signal:u}),o.addEventListener("click",i,{signal:u})),c(this,np).append(o)};function Xk(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var vl,wl,Ou,bl;const Zt=class Zt{static initializeAndAddPointerId(t){(c(Zt,wl)||b(Zt,wl,new Set)).add(t)}static setPointer(t,e){c(Zt,vl)||b(Zt,vl,e),c(Zt,bl)??b(Zt,bl,t)}static setTimeStamp(t){b(Zt,Ou,t)}static isSamePointerId(t){return c(Zt,vl)===t}static isSamePointerIdOrRemove(t){var e;return c(Zt,vl)===t?!0:((e=c(Zt,wl))==null||e.delete(t),!1)}static isSamePointerType(t){return c(Zt,bl)===t}static isInitializedAndDifferentPointerType(t){return c(Zt,bl)!==null&&!Zt.isSamePointerType(t)}static isSameTimeStamp(t){return c(Zt,Ou)===t}static isUsingMultiplePointers(){var t;return((t=c(Zt,wl))==null?void 0:t.size)>=1}static clearPointerType(){b(Zt,bl,null)}static clearPointerIds(){b(Zt,vl,NaN),b(Zt,wl,null)}static clearTimeStamp(){b(Zt,Ou,NaN)}};vl=new WeakMap,wl=new WeakMap,Ou=new WeakMap,bl=new WeakMap,E(Zt,vl,NaN),E(Zt,wl,null),E(Zt,Ou,NaN),E(Zt,bl,null);let Mn=Zt;var Mv;class z3{constructor(){E(this,Mv,0)}get id(){return`${Yf}${qe(this,Mv)._++}`}}Mv=new WeakMap;var Bu,ip,Dn,ju,_y;const AA=class AA{constructor(){E(this,ju);E(this,Bu,Ok());E(this,ip,0);E(this,Dn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Mt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:o}=t;return _(this,ju,_y).call(this,`${e}_${n}_${i}_${o}`,t)}async getFromUrl(t){return _(this,ju,_y).call(this,t,t)}async getFromBlob(t,e){const n=await e;return _(this,ju,_y).call(this,t,n)}async getFromId(t){c(this,Dn)||b(this,Dn,new Map);const e=c(this,Dn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,Dn)||b(this,Dn,new Map);let n=c(this,Dn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${c(this,Bu)}_${qe(this,ip)._++}`,refCounter:1,isSvg:!1},c(this,Dn).set(t,n),c(this,Dn).set(n.id,n),n}getSvgUrl(t){const e=c(this,Dn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;c(this,Dn)||b(this,Dn,new Map);const e=c(this,Dn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Bu)}_`)}};Bu=new WeakMap,ip=new WeakMap,Dn=new WeakMap,ju=new WeakSet,_y=async function(t,e){c(this,Dn)||b(this,Dn,new Map);let n=c(this,Dn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Bu)}_${qe(this,ip)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await Ym(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const o=AA._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;u.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=l.onerror=p});l.readAsDataURL(i),await h}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){kt(i),n=null}return c(this,Dn).set(t,n),n&&c(this,Dn).set(n.id,n),n};let lx=AA;var Be,Qo,sp,Ae;class H3{constructor(t=128){E(this,Be,[]);E(this,Qo,!1);E(this,sp);E(this,Ae,-1);b(this,sp,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(i&&t(),c(this,Qo))return;const h={cmd:t,undo:e,post:n,type:o};if(c(this,Ae)===-1){c(this,Be).length>0&&(c(this,Be).length=0),b(this,Ae,0),c(this,Be).push(h);return}if(l&&c(this,Be)[c(this,Ae)].type===o){u&&(h.undo=c(this,Be)[c(this,Ae)].undo),c(this,Be)[c(this,Ae)]=h;return}const f=c(this,Ae)+1;f===c(this,sp)?c(this,Be).splice(0,1):(b(this,Ae,f),f<c(this,Be).length&&c(this,Be).splice(f)),c(this,Be).push(h)}undo(){if(c(this,Ae)===-1)return;b(this,Qo,!0);const{undo:t,post:e}=c(this,Be)[c(this,Ae)];t(),e==null||e(),b(this,Qo,!1),b(this,Ae,c(this,Ae)-1)}redo(){if(c(this,Ae)<c(this,Be).length-1){b(this,Ae,c(this,Ae)+1),b(this,Qo,!0);const{cmd:t,post:e}=c(this,Be)[c(this,Ae)];t(),e==null||e(),b(this,Qo,!1)}}hasSomethingToUndo(){return c(this,Ae)!==-1}hasSomethingToRedo(){return c(this,Ae)<c(this,Be).length-1}cleanType(t){if(c(this,Ae)!==-1){for(let e=c(this,Ae);e>=0;e--)if(c(this,Be)[e].type!==t){c(this,Be).splice(e+1,c(this,Ae)-e),b(this,Ae,e);return}c(this,Be).length=0,b(this,Ae,-1)}}destroy(){b(this,Be,null)}}Be=new WeakMap,Qo=new WeakMap,sp=new WeakMap,Ae=new WeakMap;var Dv,Yk;class Qm{constructor(t){E(this,Dv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=en.platform;for(const[n,i,o={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:i,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:i,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(_(this,Dv,Yk).call(this,e));if(!n)return;const{callback:i,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(i.bind(t,...l,e)(),o||Ne(e))}}Dv=new WeakSet,Yk=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Rv=class Rv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return F3(t),Mt(this,"_colors",t)}convert(t){const e=Km(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((o,l)=>o===e[l]))return Rv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?st.makeHexColor(...e):t}};K(Rv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let cx=Rv;var Vu,mi,Uu,ke,Je,zu,Zi,Hu,ts,Rn,Jo,Zo,Wu,ta,$s,es,xl,rp,op,$u,ap,Gs,ea,Gu,na,Xs,Lv,ia,Xu,lp,sa,Sl,Yu,ra,cp,We,qt,Lr,oa,aa,up,qu,hp,la,Ys,Ir,dp,fp,ns,it,Py,ux,qk,Kk,yf,Qk,Jk,Zk,hx,tM,eM,nM,iM,Vn,Pr,sM,rM,dx,oM,vf,fx;const Mu=class Mu{constructor(t,e,n,i,o,l,u,h,f,p,g,y,w,A,S,C){E(this,it);E(this,Vu,new AbortController);E(this,mi,null);E(this,Uu,null);E(this,ke,new Map);E(this,Je,new Map);E(this,zu,null);E(this,Zi,null);E(this,Hu,null);E(this,ts,new H3);E(this,Rn,null);E(this,Jo,null);E(this,Zo,null);E(this,Wu,0);E(this,ta,new Set);E(this,$s,null);E(this,es,null);E(this,xl,new Set);K(this,"_editorUndoBar",null);E(this,rp,!1);E(this,op,!1);E(this,$u,!1);E(this,ap,null);E(this,Gs,null);E(this,ea,null);E(this,Gu,null);E(this,na,!1);E(this,Xs,null);E(this,Lv,new z3);E(this,ia,!1);E(this,Xu,!1);E(this,lp,!1);E(this,sa,null);E(this,Sl,null);E(this,Yu,null);E(this,ra,null);E(this,cp,null);E(this,We,Rt.NONE);E(this,qt,new Set);E(this,Lr,null);E(this,oa,null);E(this,aa,null);E(this,up,null);E(this,qu,null);E(this,hp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,la,[0,0]);E(this,Ys,null);E(this,Ir,null);E(this,dp,null);E(this,fp,null);E(this,ns,null);const T=this._signal=c(this,Vu).signal;b(this,Ir,t),b(this,dp,e),b(this,fp,n),b(this,zu,i),b(this,Rn,o),b(this,oa,l),b(this,qu,h),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:T}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),u._on("setpreference",this.onSetPreference.bind(this),{signal:T}),u._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:T}),window.addEventListener("pointerdown",()=>{b(this,Xu,!0)},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{b(this,Xu,!1)},{capture:!0,signal:T}),_(this,it,Qk).call(this),_(this,it,iM).call(this),_(this,it,hx).call(this),b(this,Zi,h.annotationStorage),b(this,ap,h.filterFactory),b(this,aa,f),b(this,Gu,p||null),b(this,rp,g),b(this,op,y),b(this,$u,w),b(this,cp,A||null),this.viewParameters={realScale:Ha.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=C!==!1,o==null||o.setSidebarUiManager(this)}static get _keyboardManager(){const t=Mu.prototype,e=l=>c(l,Ir).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new Qm([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&c(l,Ir).contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&c(l,Ir).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,i,o,l,u,h,f;(t=c(this,ns))==null||t.resolve(),b(this,ns,null),(e=c(this,Vu))==null||e.abort(),b(this,Vu,null),this._signal=null;for(const p of c(this,Je).values())p.destroy();c(this,Je).clear(),c(this,ke).clear(),c(this,xl).clear(),(n=c(this,ra))==null||n.clear(),b(this,mi,null),c(this,qt).clear(),c(this,ts).destroy(),(i=c(this,zu))==null||i.destroy(),(o=c(this,Rn))==null||o.destroy(),(l=c(this,oa))==null||l.destroy(),(u=c(this,Xs))==null||u.hide(),b(this,Xs,null),(h=c(this,Yu))==null||h.destroy(),b(this,Yu,null),b(this,Uu,null),c(this,Gs)&&(clearTimeout(c(this,Gs)),b(this,Gs,null)),c(this,Ys)&&(clearTimeout(c(this,Ys)),b(this,Ys,null)),(f=this._editorUndoBar)==null||f.destroy(),b(this,qu,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,cp)}get useNewAltTextFlow(){return c(this,op)}get useNewAltTextWhenAddingImage(){return c(this,$u)}get hcmFilter(){return Mt(this,"hcmFilter",c(this,aa)?c(this,ap).addHCMFilter(c(this,aa).foreground,c(this,aa).background):"none")}get direction(){return Mt(this,"direction",getComputedStyle(c(this,Ir)).direction)}get _highlightColors(){return Mt(this,"_highlightColors",c(this,Gu)?new Map(c(this,Gu).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Mt(this,"highlightColors",null);const e=new Map,n=!!c(this,aa);for(const[i,o]of t){const l=i.endsWith("_HCM");if(n&&l){e.set(i.replace("_HCM",""),o);continue}!n&&!l&&e.set(i,o)}return Mt(this,"highlightColors",e)}get highlightColorNames(){return Mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,Zo,t)}setMainHighlightColorPicker(t){b(this,Yu,t)}editAltText(t,e=!1){var n;(n=c(this,zu))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!c(this,Rn)}editComment(t,e,n,i){var o;(o=c(this,Rn))==null||o.showDialog(this,t,e,n,i)}selectComment(t,e){const n=c(this,Je).get(t),i=n==null?void 0:n.getEditorByUID(e);i==null||i.toggleComment(!0,!0)}updateComment(t){var e;(e=c(this,Rn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=c(this,Rn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=c(this,Rn))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var i;(i=c(this,Rn))==null||i.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=c(this,Rn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=c(this,Rn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(c(this,Je).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){var e;(e=c(this,oa))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,oa)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,$u,e);break}}onPageChanging({pageNumber:t}){b(this,Wu,t-1)}focusMainContainer(){c(this,Ir).focus()}findParent(t,e){for(const n of c(this,Je).values()){const{x:i,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(t>=i&&t<=i+l&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){c(this,dp).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,xl).add(t)}removeShouldRescale(t){c(this,xl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Ha.PDF_TO_CSS_UNITS;for(const n of c(this,xl))n.onScaleChanging();(e=c(this,Zo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:o,focusNode:l,focusOffset:u}=n,h=n.toString(),p=_(this,it,Py).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;n.empty();const y=_(this,it,ux).call(this,p),w=c(this,We)===Rt.NONE,A=()=>{const S=y==null?void 0:y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:i,anchorOffset:o,focusNode:l,focusOffset:u,text:h});w&&this.showAllEditors("highlight",!0,!0),e&&(S==null||S.editComment())};if(w){this.switchToMode(Rt.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!c(this,Zi))return null;const e=`${Yf}${t}`,n=c(this,Zi).getRawValue(e);return n&&c(this,Zi).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Zi)&&!c(this,Zi).has(t.id)&&c(this,Zi).setValue(t.id,t)}a11yAlert(t,e=null){const n=c(this,fp);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,na)&&(b(this,na,!1),_(this,it,yf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,qt))if(e.div.contains(t)){b(this,Sl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,Sl))return;const[t,e]=c(this,Sl);b(this,Sl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){_(this,it,hx).call(this),this.setEditingState(!0)}removeEditListeners(){_(this,it,tM).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of c(this,es))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of c(this,es))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=c(this,mi))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of c(this,qt)){const o=i.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of c(this,es))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){kt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const o=[];for(const h of n){const f=await i.deserialize(h);if(!f)return;o.push(f)}const l=()=>{for(const h of o)_(this,it,dx).call(this,h);_(this,it,fx).call(this,o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){kt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,We)!==Rt.NONE&&!this.isEditorHandlingKeyboard&&Mu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,na)&&(b(this,na,!1),_(this,it,yf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(_(this,it,Jk).call(this),_(this,it,eM).call(this),_(this,it,Vn).call(this,{isEditing:c(this,We)!==Rt.NONE,isEmpty:_(this,it,vf).call(this),hasSomethingToUndo:c(this,ts).hasSomethingToUndo(),hasSomethingToRedo:c(this,ts).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,it,Zk).call(this),_(this,it,nM).call(this),_(this,it,Vn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,es)){b(this,es,t);for(const e of c(this,es))_(this,it,Pr).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,Lv).id}get currentLayer(){return c(this,Je).get(c(this,Wu))}getLayer(t){return c(this,Je).get(t)}get currentPageIndex(){return c(this,Wu)}addLayer(t){c(this,Je).set(t.pageIndex,t),c(this,ia)?t.enable():t.disable()}removeLayer(t){c(this,Je).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,o=!1,l=!1){var u,h,f,p,g,y;if(c(this,We)!==t&&!(c(this,ns)&&(await c(this,ns).promise,!c(this,ns)))){if(b(this,ns,Promise.withResolvers()),(u=c(this,Zo))==null||u.commitOrRemove(),c(this,We)===Rt.POPUP&&((h=c(this,Rn))==null||h.hideSidebar()),(f=c(this,Rn))==null||f.destroyPopup(),b(this,We,t),t===Rt.NONE){this.setEditingState(!1),_(this,it,rM).call(this);for(const w of c(this,ke).values())w.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),c(this,ns).resolve();return}for(const w of c(this,ke).values())w.addStandaloneCommentButton();t===Rt.SIGNATURE&&await((g=c(this,oa))==null?void 0:g.loadSignatures()),n&&Mn.clearPointerType(),this.setEditingState(!0),await _(this,it,sM).call(this),this.unselectAll();for(const w of c(this,Je).values())w.updateMode(t);if(t===Rt.POPUP){c(this,Uu)||b(this,Uu,await c(this,qu).getAnnotationsByType(new Set(c(this,es).map(S=>S._editorType))));const w=new Set,A=[];for(const S of c(this,ke).values()){const{annotationElementId:C,hasComment:T,deleted:M}=S;C&&w.add(C),T&&!M&&A.push(S.getData())}for(const S of c(this,Uu)){const{id:C,popupRef:T,contentsObj:M}=S;T&&(M!=null&&M.str)&&!w.has(C)&&!c(this,ta).has(C)&&A.push(S)}(y=c(this,Rn))==null||y.showSidebar(A)}if(!e){i&&this.addNewEditorFromKeyboard(),c(this,ns).resolve();return}for(const w of c(this,ke).values())w.uid===e?(this.setSelected(w),l?w.editComment():o?w.enterInEditMode():w.focus()):w.unselect();c(this,ns).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==c(this,We)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(c(this,es)){switch(t){case jt.CREATE:this.currentLayer.addNewEditor(e);return;case jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,up)||b(this,up,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of c(this,qt))n.updateParams(t,e);else for(const n of c(this,es))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const l of c(this,ke).values())l.editorType===t&&l.show(e);(((o=c(this,up))==null?void 0:o.get(jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&_(this,it,Pr).call(this,[[jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,lp)!==t){b(this,lp,t);for(const e of c(this,Je).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of c(this,ke).values())e.pageIndex===t&&(yield e)}getEditor(t){return c(this,ke).get(t)}addEditor(t){c(this,ke).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(c(this,Gs)&&clearTimeout(c(this,Gs)),b(this,Gs,setTimeout(()=>{this.focusMainContainer(),b(this,Gs,null)},0))),c(this,ke).delete(t.id),t.annotationElementId&&((e=c(this,ra))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,ta).has(t.annotationElementId))&&((n=c(this,Zi))==null||n.remove(t.id))}addDeletedAnnotationElement(t){c(this,ta).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,ta).has(t)}removeDeletedAnnotationElement(t){c(this,ta).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,mi)!==t&&(b(this,mi,t),t&&_(this,it,Pr).call(this,t.propertiesToUpdate))}updateUI(t){c(this,it,oM)===t&&_(this,it,Pr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){_(this,it,Pr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,qt).has(t)){c(this,qt).delete(t),t.unselect(),_(this,it,Vn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,qt).add(t),t.select(),_(this,it,Pr).call(this,t.propertiesToUpdate),_(this,it,Vn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=c(this,Zo))==null||e.commitOrRemove();for(const n of c(this,qt))n!==t&&n.unselect();c(this,qt).clear(),c(this,qt).add(t),t.select(),_(this,it,Pr).call(this,t.propertiesToUpdate),_(this,it,Vn).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,qt).has(t)}get firstSelectedEditor(){return c(this,qt).values().next().value}unselect(t){t.unselect(),c(this,qt).delete(t),_(this,it,Vn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,qt).size!==0}get isEnterHandled(){return c(this,qt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,ts).undo(),_(this,it,Vn).call(this,{hasSomethingToUndo:c(this,ts).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,it,vf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,ts).redo(),_(this,it,Vn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,ts).hasSomethingToRedo(),isEmpty:_(this,it,vf).call(this)})}addCommands(t){c(this,ts).add(t),_(this,it,Vn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,it,vf).call(this)})}cleanUndoStack(t){c(this,ts).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,qt)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(i,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},i=()=>{for(const l of e)_(this,it,dx).call(this,l)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=c(this,mi))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,mi)||this.hasSelection}selectAll(){for(const t of c(this,qt))t.commit();_(this,it,fx).call(this,c(this,ke).values())}unselectAll(){var t;if(!(c(this,mi)&&(c(this,mi).commitOrRemove(),c(this,We)!==Rt.NONE))&&!((t=c(this,Zo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,qt))e.unselect();c(this,qt).clear(),_(this,it,Vn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,la)[0]+=t,c(this,la)[1]+=e;const[i,o]=c(this,la),l=[...c(this,qt)],u=1e3;c(this,Ys)&&clearTimeout(c(this,Ys)),b(this,Ys,setTimeout(()=>{b(this,Ys,null),c(this,la)[0]=c(this,la)[1]=0,this.addCommands({cmd:()=>{for(const h of l)c(this,ke).has(h.id)&&(h.translateInPage(i,o),h.translationDone())},undo:()=>{for(const h of l)c(this,ke).has(h.id)&&(h.translateInPage(-i,-o),h.translationDone())},mustExec:!1})},u));for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,$s,new Map);for(const t of c(this,qt))c(this,$s).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,$s))return!1;this.disableUserSelect(!1);const t=c(this,$s);b(this,$s,null);let e=!1;for(const[{x:i,y:o,pageIndex:l},u]of t)u.newX=i,u.newY=o,u.newPageIndex=l,e||(e=i!==u.savedX||o!==u.savedY||l!==u.savedPageIndex);if(!e)return!1;const n=(i,o,l,u)=>{if(c(this,ke).has(i.id)){const h=c(this,Je).get(u);h?i._setParentAndPosition(h,o,l):(i.pageIndex=u,i.x=o,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:o,newY:l,newPageIndex:u}]of t)n(i,o,l,u)},undo:()=>{for(const[i,{savedX:o,savedY:l,savedPageIndex:u}]of t)n(i,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,$s))for(const n of c(this,$s).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,qt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,mi)===t}getActive(){return c(this,mi)}getMode(){return c(this,We)}isEditingMode(){return c(this,We)!==Rt.NONE}get imageManager(){return Mt(this,"imageManager",new lx)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,g,y)=>({x:(p-i)/l,y:1-(f+g-n)/o,width:y/l,height:g/o});break;case"180":u=(f,p,g,y)=>({x:1-(f+g-n)/o,y:1-(p+y-i)/l,width:g/o,height:y/l});break;case"270":u=(f,p,g,y)=>({x:1-(p+y-i)/l,y:(f-n)/o,width:y/l,height:g/o});break;default:u=(f,p,g,y)=>({x:(f-n)/o,y:(p-i)/l,width:g/o,height:y/l});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:y,y:w,width:A,height:S}of g.getClientRects())A===0||S===0||h.push(u(y,w,A,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,Hu)||b(this,Hu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,Hu))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=c(this,Hu))==null?void 0:i.get(t.data.id);if(!e)return;const n=c(this,Zi).getRawValue(e);n&&(c(this,We)===Rt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var o;const i=(o=c(this,ra))==null?void 0:o.get(t);i&&(i.setCanvas(e,n),c(this,ra).delete(t))}addMissingCanvas(t,e){(c(this,ra)||b(this,ra,new Map)).set(t,e)}};Vu=new WeakMap,mi=new WeakMap,Uu=new WeakMap,ke=new WeakMap,Je=new WeakMap,zu=new WeakMap,Zi=new WeakMap,Hu=new WeakMap,ts=new WeakMap,Rn=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Wu=new WeakMap,ta=new WeakMap,$s=new WeakMap,es=new WeakMap,xl=new WeakMap,rp=new WeakMap,op=new WeakMap,$u=new WeakMap,ap=new WeakMap,Gs=new WeakMap,ea=new WeakMap,Gu=new WeakMap,na=new WeakMap,Xs=new WeakMap,Lv=new WeakMap,ia=new WeakMap,Xu=new WeakMap,lp=new WeakMap,sa=new WeakMap,Sl=new WeakMap,Yu=new WeakMap,ra=new WeakMap,cp=new WeakMap,We=new WeakMap,qt=new WeakMap,Lr=new WeakMap,oa=new WeakMap,aa=new WeakMap,up=new WeakMap,qu=new WeakMap,hp=new WeakMap,la=new WeakMap,Ys=new WeakMap,Ir=new WeakMap,dp=new WeakMap,fp=new WeakMap,ns=new WeakMap,it=new WeakSet,Py=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},ux=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of c(this,Je).values())if(n.hasTextLayer(t))return n;return null},qk=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=_(this,it,Py).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(c(this,Xs)||b(this,Xs,new U3(this)),c(this,Xs).show(n,i,this.direction==="ltr"))},Kk=function(){var o,l,u;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Lr)&&((o=c(this,Xs))==null||o.hide(),b(this,Lr,null),_(this,it,Vn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Lr))return;const i=_(this,it,Py).call(this,t).closest(".textLayer");if(!i){c(this,Lr)&&((l=c(this,Xs))==null||l.hide(),b(this,Lr,null),_(this,it,Vn).call(this,{hasSelectedText:!1}));return}if((u=c(this,Xs))==null||u.hide(),b(this,Lr,e),_(this,it,Vn).call(this,{hasSelectedText:!0}),!(c(this,We)!==Rt.HIGHLIGHT&&c(this,We)!==Rt.NONE)&&(c(this,We)===Rt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,na,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=c(this,We)===Rt.HIGHLIGHT?_(this,it,ux).call(this,i):null;if(h==null||h.toggleDrawing(),c(this,Xu)){const f=new AbortController,p=this.combinedSignal(f),g=y=>{y.type==="pointerup"&&y.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),y.type==="pointerup"&&_(this,it,yf).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("blur",g,{signal:p})}else h==null||h.toggleDrawing(!0),_(this,it,yf).call(this,"main_toolbar")}},yf=function(t=""){c(this,We)===Rt.HIGHLIGHT?this.highlightSelection(t):c(this,rp)&&_(this,it,qk).call(this)},Qk=function(){document.addEventListener("selectionchange",_(this,it,Kk).bind(this),{signal:this._signal})},Jk=function(){if(c(this,ea))return;b(this,ea,new AbortController);const t=this.combinedSignal(c(this,ea));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Zk=function(){var t;(t=c(this,ea))==null||t.abort(),b(this,ea,null)},hx=function(){if(c(this,sa))return;b(this,sa,new AbortController);const t=this.combinedSignal(c(this,sa));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},tM=function(){var t;(t=c(this,sa))==null||t.abort(),b(this,sa,null)},eM=function(){if(c(this,Jo))return;b(this,Jo,new AbortController);const t=this.combinedSignal(c(this,Jo));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},nM=function(){var t;(t=c(this,Jo))==null||t.abort(),b(this,Jo,null)},iM=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Vn=function(t){Object.entries(t).some(([n,i])=>c(this,hp)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,hp),t)}),c(this,We)===Rt.HIGHLIGHT&&t.hasSelectedEditor===!1&&_(this,it,Pr).call(this,[[jt.HIGHLIGHT_FREE,!0]]))},Pr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},sM=async function(){if(!c(this,ia)){b(this,ia,!0);const t=[];for(const e of c(this,Je).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,ke).values())e.enable()}},rM=function(){if(this.unselectAll(),c(this,ia)){b(this,ia,!1);for(const t of c(this,Je).values())t.disable();for(const t of c(this,ke).values())t.disable()}},dx=function(t){const e=c(this,Je).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},oM=function(){let t=null;for(t of c(this,qt));return t},vf=function(){if(c(this,ke).size===0)return!0;if(c(this,ke).size===1)for(const t of c(this,ke).values())return t.isEmpty();return!1},fx=function(t){for(const e of c(this,qt))e.unselect();c(this,qt).clear();for(const e of t)e.isEmpty()||(c(this,qt).add(e),e.select());_(this,it,Vn).call(this,{hasSelectedEditor:this.hasSelection})},K(Mu,"TRANSLATE_SMALL",1),K(Mu,"TRANSLATE_BIG",10);let Ic=Mu;var on,qs,As,Ku,Ks,gi,Qu,Qs,ii,Nr,Al,Js,ca,Ns,wf,ky;const Un=class Un{constructor(t){E(this,Ns);E(this,on,null);E(this,qs,!1);E(this,As,null);E(this,Ku,null);E(this,Ks,null);E(this,gi,null);E(this,Qu,!1);E(this,Qs,null);E(this,ii,null);E(this,Nr,null);E(this,Al,null);E(this,Js,!1);b(this,ii,t),b(this,Js,t._uiManager.useNewAltTextFlow),c(Un,ca)||b(Un,ca,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Un._l10n??(Un._l10n=t)}async render(){const t=b(this,As,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,Ku,document.createElement("span"));t.append(e),c(this,Js)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(Un,ca).missing),e.setAttribute("data-l10n-id",c(Un,ca)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,ii)._uiManager._signal;t.addEventListener("contextmenu",hs,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),c(this,ii)._uiManager.editAltText(c(this,ii)),c(this,Js)&&c(this,ii)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Ns,wf)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(b(this,Qu,!0),i(o))},{signal:n}),await _(this,Ns,ky).call(this),t}finish(){c(this,As)&&(c(this,As).focus({focusVisible:c(this,Qu)}),b(this,Qu,!1))}isEmpty(){return c(this,Js)?c(this,on)===null:!c(this,on)&&!c(this,qs)}hasData(){return c(this,Js)?c(this,on)!==null||!!c(this,Nr):this.isEmpty()}get guessedText(){return c(this,Nr)}async setGuessedText(t){c(this,on)===null&&(b(this,Nr,t),b(this,Al,await Un._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),_(this,Ns,ky).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,Js)||c(this,on)){(e=c(this,Qs))==null||e.remove(),b(this,Qs,null);return}if(!c(this,Qs)){const n=b(this,Qs,document.createElement("div"));n.className="noAltTextBadge",c(this,ii).div.append(n)}c(this,Qs).classList.toggle("hidden",!t)}serialize(t){let e=c(this,on);return!t&&c(this,Nr)===e&&(e=c(this,Al)),{altText:e,decorative:c(this,qs),guessedText:c(this,Nr),textWithDisclaimer:c(this,Al)}}get data(){return{altText:c(this,on),decorative:c(this,qs)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(b(this,Nr,n),b(this,Al,i)),!(c(this,on)===t&&c(this,qs)===e)&&(o||(b(this,on,t),b(this,qs,e)),_(this,Ns,ky).call(this))}toggle(t=!1){c(this,As)&&(!t&&c(this,gi)&&(clearTimeout(c(this,gi)),b(this,gi,null)),c(this,As).disabled=!t)}shown(){c(this,ii)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Ns,wf)}})}destroy(){var t,e;(t=c(this,As))==null||t.remove(),b(this,As,null),b(this,Ku,null),b(this,Ks,null),(e=c(this,Qs))==null||e.remove(),b(this,Qs,null)}};on=new WeakMap,qs=new WeakMap,As=new WeakMap,Ku=new WeakMap,Ks=new WeakMap,gi=new WeakMap,Qu=new WeakMap,Qs=new WeakMap,ii=new WeakMap,Nr=new WeakMap,Al=new WeakMap,Js=new WeakMap,ca=new WeakMap,Ns=new WeakSet,wf=function(){return c(this,on)&&"added"||c(this,on)===null&&this.guessedText&&"review"||"missing"},ky=async function(){var i,o,l;const t=c(this,As);if(!t)return;if(c(this,Js)){if(t.classList.toggle("done",!!c(this,on)),t.setAttribute("data-l10n-id",c(Un,ca)[c(this,Ns,wf)]),(i=c(this,Ku))==null||i.setAttribute("data-l10n-id",c(Un,ca)[`${c(this,Ns,wf)}-label`]),!c(this,on)){(o=c(this,Ks))==null||o.remove();return}}else{if(!c(this,on)&&!c(this,qs)){t.classList.remove("done"),(l=c(this,Ks))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,Ks);if(!e){b(this,Ks,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,ii).id}`;const u=100,h=c(this,ii)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(c(this,gi)),b(this,gi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,gi,setTimeout(()=>{b(this,gi,null),c(this,Ks).classList.add("show"),c(this,ii)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:h}),t.addEventListener("mouseleave",()=>{var f;c(this,gi)&&(clearTimeout(c(this,gi)),b(this,gi,null)),(f=c(this,Ks))==null||f.classList.remove("show")},{signal:h})}c(this,qs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,on)),e.parentNode||t.append(e);const n=c(this,ii).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},E(Un,ca,null),K(Un,"_l10n",null);let vv=Un;var gn,is,El,he,pp,Cl,Es,Tl,_l,Pl,mp,px;class fy{constructor(t){E(this,mp);E(this,gn,null);E(this,is,null);E(this,El,!1);E(this,he,null);E(this,pp,null);E(this,Cl,null);E(this,Es,null);E(this,Tl,null);E(this,_l,!1);E(this,Pl,null);b(this,he,t)}renderForToolbar(){const t=b(this,is,document.createElement("button"));return t.className="comment",_(this,mp,px).call(this,t,!1)}renderForStandalone(){const t=b(this,gn,document.createElement("button"));t.className="annotationCommentButton";const e=c(this,he).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(c(this,he)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=c(this,he).commentButtonColor;i&&(n.backgroundColor=i)}return _(this,mp,px).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=c(this,gn)??c(this,is))==null||t.focus()},0)}onUpdatedColor(){if(!c(this,gn))return;const t=c(this,he).commentButtonColor;t&&(c(this,gn).style.backgroundColor=t),c(this,he)._uiManager.updatePopupColor(c(this,he))}get commentButtonWidth(){var t;return(((t=c(this,gn))==null?void 0:t.getBoundingClientRect().width)??0)/c(this,he).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,Pl))return c(this,Pl);if(!c(this,gn))return null;const{x:t,y:e,height:n}=c(this,gn).getBoundingClientRect(),{x:i,y:o,width:l,height:u}=c(this,he).parent.boundingClientRect;return[(t-i)/l,(e+n-o)/u]}set commentPopupPositionInLayer(t){b(this,Pl,t)}hasDefaultPopupPosition(){return c(this,Pl)===null}removeStandaloneCommentButton(){var t;(t=c(this,gn))==null||t.remove(),b(this,gn,null)}removeToolbarCommentButton(){var t;(t=c(this,is))==null||t.remove(),b(this,is,null)}setCommentButtonStates({selected:t,hasPopup:e}){c(this,gn)&&(c(this,gn).classList.toggle("selected",t),c(this,gn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=c(this,he).commentButtonPosition;const{width:p,height:g,x:y,y:w}=c(this,he);n=y+n*p,i=w+i*g}const o=c(this,he).parent.boundingClientRect,{x:l,y:u,width:h,height:f}=o;c(this,he)._uiManager.editComment(c(this,he),l+n*h,u+i*f,{...t,parentDimensions:o})}finish(){c(this,is)&&(c(this,is).focus({focusVisible:c(this,El)}),b(this,El,!1))}isDeleted(){return c(this,_l)||c(this,Es)===""}isEmpty(){return c(this,Es)===null}hasBeenEdited(){return this.isDeleted()||c(this,Es)!==c(this,pp)}serialize(){return this.data}get data(){return{text:c(this,Es),richText:c(this,Cl),date:c(this,Tl),deleted:this.isDeleted()}}set data(t){if(t!==c(this,Es)&&b(this,Cl,null),t===null){b(this,Es,""),b(this,_l,!0);return}b(this,Es,t),b(this,Tl,new Date),b(this,_l,!1)}setInitialText(t,e=null){b(this,pp,t),this.data=t,b(this,Tl,null),b(this,Cl,e)}shown(){}destroy(){var t,e;(t=c(this,is))==null||t.remove(),b(this,is,null),(e=c(this,gn))==null||e.remove(),b(this,gn,null),b(this,Es,""),b(this,Cl,null),b(this,Tl,null),b(this,he,null),b(this,El,!1),b(this,_l,!1)}}gn=new WeakMap,is=new WeakMap,El=new WeakMap,he=new WeakMap,pp=new WeakMap,Cl=new WeakMap,Es=new WeakMap,Tl=new WeakMap,_l=new WeakMap,Pl=new WeakMap,mp=new WeakSet,px=function(t,e){if(!c(this,he)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[c(this,he)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,he)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",hs,{signal:n}),e&&(t.addEventListener("focusin",o=>{c(this,he)._focusEventsAllowed=!1,Ne(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{c(this,he)._focusEventsAllowed=!0,Ne(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),t===c(this,is)?this.edit():c(this,he).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(b(this,El,!0),i(o))},{signal:n}),t.addEventListener("pointerenter",()=>{c(this,he).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{c(this,he).toggleComment(!1,!1)},{signal:n}),t};var Ju,kl,gp,yp,vp,wp,bp,Fr,Ml,Or,Dl,Br,Wa,aM,lM,cM;const EA=class EA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){E(this,Wa);E(this,Ju);E(this,kl,!1);E(this,gp,null);E(this,yp);E(this,vp);E(this,wp);E(this,bp);E(this,Fr,null);E(this,Ml);E(this,Or,null);E(this,Dl);E(this,Br,null);b(this,Ju,t),b(this,gp,n),b(this,yp,e),b(this,vp,i),b(this,wp,o),b(this,bp,l),b(this,Dl,new AbortController),b(this,Ml,AbortSignal.any([u,c(this,Dl).signal])),t.addEventListener("touchstart",_(this,Wa,aM).bind(this),{passive:!1,signal:c(this,Ml)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/yr.pixelRatio}destroy(){var t,e;(t=c(this,Dl))==null||t.abort(),b(this,Dl,null),(e=c(this,Fr))==null||e.abort(),b(this,Fr,null)}};Ju=new WeakMap,kl=new WeakMap,gp=new WeakMap,yp=new WeakMap,vp=new WeakMap,wp=new WeakMap,bp=new WeakMap,Fr=new WeakMap,Ml=new WeakMap,Or=new WeakMap,Dl=new WeakMap,Br=new WeakMap,Wa=new WeakSet,aM=function(t){var i,o,l;if((i=c(this,yp))!=null&&i.call(this))return;if(t.touches.length===1){if(c(this,Fr))return;const u=b(this,Fr,new AbortController),h=AbortSignal.any([c(this,Ml),u.signal]),f=c(this,Ju),p={capture:!0,signal:h,passive:!1},g=y=>{var w;y.pointerType==="touch"&&((w=c(this,Fr))==null||w.abort(),b(this,Fr,null))};f.addEventListener("pointerdown",y=>{y.pointerType==="touch"&&(Ne(y),g(y))},p),f.addEventListener("pointerup",g,p),f.addEventListener("pointercancel",g,p);return}if(!c(this,Br)){b(this,Br,new AbortController);const u=AbortSignal.any([c(this,Ml),c(this,Br).signal]),h=c(this,Ju),f={signal:u,capture:!1,passive:!1};h.addEventListener("touchmove",_(this,Wa,lM).bind(this),f);const p=_(this,Wa,cM).bind(this);h.addEventListener("touchend",p,f),h.addEventListener("touchcancel",p,f),f.capture=!0,h.addEventListener("pointerdown",Ne,f),h.addEventListener("pointermove",Ne,f),h.addEventListener("pointercancel",Ne,f),h.addEventListener("pointerup",Ne,f),(o=c(this,vp))==null||o.call(this)}if(Ne(t),t.touches.length!==2||(l=c(this,gp))!=null&&l.call(this)){b(this,Or,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),b(this,Or,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},lM=function(t){var D;if(!c(this,Or)||t.touches.length!==2)return;Ne(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:o}=e,{screenX:l,screenY:u}=n,h=c(this,Or),{touch0X:f,touch0Y:p,touch1X:g,touch1Y:y}=h,w=g-f,A=y-p,S=l-i,C=u-o,T=Math.hypot(S,C)||1,M=Math.hypot(w,A)||1;if(!c(this,kl)&&Math.abs(M-T)<=EA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!c(this,kl)){b(this,kl,!0);return}const k=[(i+l)/2,(o+u)/2];(D=c(this,wp))==null||D.call(this,k,M,T)},cM=function(t){var e;t.touches.length>=2||(c(this,Br)&&(c(this,Br).abort(),b(this,Br,null),(e=c(this,bp))==null||e.call(this)),c(this,Or)&&(Ne(t),b(this,Or,null),b(this,kl,!1)))};let wv=EA;var Rl,Cs,we,re,jr,Zu,ua,xp,yn,Ll,Vr,ss,ha,Sp,Il,yi,Ap,Nl,Ur,Zs,th,eh,rs,Fl,Ep,Iv,At,mx,Cp,gx,My,uM,hM,yx,Dy,vx,dM,fM,pM,wx,mM,bx,gM,yM,vM,xx,bf;const Dt=class Dt{constructor(t){E(this,At);E(this,Rl,null);E(this,Cs,null);E(this,we,null);E(this,re,null);E(this,jr,null);E(this,Zu,!1);E(this,ua,null);E(this,xp,"");E(this,yn,null);E(this,Ll,null);E(this,Vr,null);E(this,ss,null);E(this,ha,null);E(this,Sp,"");E(this,Il,!1);E(this,yi,null);E(this,Ap,!1);E(this,Nl,!1);E(this,Ur,!1);E(this,Zs,null);E(this,th,0);E(this,eh,0);E(this,rs,null);E(this,Fl,null);K(this,"isSelected",!1);K(this,"_isCopy",!1);K(this,"_editToolbar",null);K(this,"_initialOptions",Object.create(null));K(this,"_initialData",null);K(this,"_isVisible",!0);K(this,"_uiManager",null);K(this,"_focusEventsAllowed",!0);E(this,Ep,!1);E(this,Iv,Dt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Dt.prototype._resizeWithKeyboard,e=Ic.TRANSLATE_SMALL,n=Ic.TRANSLATE_BIG;return Mt(this,"_resizerKeyboardManager",new Qm([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Dt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new W3({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Dt._l10n??(Dt._l10n=t),Dt._l10nResizer||(Dt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Dt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Dt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){le("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Ep)}set _isDraggable(t){var e;b(this,Ep,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Iv)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(_(this,At,bf).call(this),(e=c(this,ss))==null||e.remove(),b(this,ss,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Il)?b(this,Il,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[o,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/o,this.y=(e+i)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){_(this,At,mx).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,yi)||b(this,yi,[this.x,this.y,this.width,this.height]),_(this,At,mx).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,yi)||b(this,yi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,o]}=this;if(this.x+=t/i,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,f]=this.getBaseTranslation();l+=h,u+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,yi)&&(c(this,yi)[0]!==this.x||c(this,yi)[1]!==this.y)}get _hasBeenResized(){return!!c(this,yi)&&(c(this,yi)[2]!==this.width||c(this,yi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Dt,i=n/t,o=n/e;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=n,h*=i,o*=n,l*=i,this._mustFixPosition)switch(t){case 0:o=Gn(o,0,n-u),l=Gn(l,0,i-h);break;case 90:o=Gn(o,0,n-h),l=Gn(l,u,i);break;case 180:o=Gn(o,u,n),l=Gn(l,h,i);break;case 270:o=Gn(o,h,n),l=Gn(l,0,i-u);break}this.x=o/=n,this.y=l/=i;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return _(n=Dt,Cp,gx).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return _(n=Dt,Cp,gx).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,we))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Nl))return this._editToolbar;this._editToolbar=new ox(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=c(this,we))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,we)||(vv.initialize(Dt._l10n),b(this,we,new vv(this)),c(this,Rl)&&(c(this,we).data=c(this,Rl),b(this,Rl,null))),c(this,we)}get altTextData(){var t;return(t=c(this,we))==null?void 0:t.data}set altTextData(t){c(this,we)&&(c(this,we).data=t)}get guessedAltText(){var t;return(t=c(this,we))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,we))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,we))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,we)&&!c(this,we).isEmpty()}hasAltTextData(){var t;return((t=c(this,we))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=c(this,re))==null||t.focusButton()}addCommentButton(){return this.canAddComment?c(this,re)||b(this,re,new fy(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,jr)){this._uiManager.isEditingMode()&&c(this,jr).classList.remove("hidden");return}this.hasComment&&(b(this,jr,c(this,re).renderForStandalone()),this.div.append(c(this,jr)))}}removeStandaloneCommentButton(){c(this,re).removeStandaloneCommentButton(),b(this,jr,null)}hideStandaloneCommentButton(){var t;(t=c(this,jr))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:i}}=c(this,re);return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){c(this,re)||b(this,re,new fy(this)),c(this,re).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(c(this,re)||b(this,re,new fy(this)),c(this,re).setInitialText(t,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var t;return(t=c(this,re))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=c(this,re))==null?void 0:t.isDeleted()}get hasComment(){return!!c(this,re)&&!c(this,re).isEmpty()&&!c(this,re).isDeleted()}async editComment(t){c(this,re)||b(this,re,new fy(this)),c(this,re).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){c(this,re).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=i-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){c(this,re).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var l;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,Zu)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),_(this,At,bx).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,o]=this.getInitialTranslation();return this.translate(i,o),Xk(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Fl)||b(this,Fl,new wv({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:_(this,At,dM).bind(this),onPinching:_(this,At,fM).bind(this),onPinchEnd:_(this,At,pM).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(l=this._uiManager._editorUndoBar)==null||l.hide(),t}pointerdown(t){const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,Il,!0),this._isDraggable){_(this,At,mM).call(this,t);return}_(this,At,wx).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Zs)&&clearTimeout(c(this,Zs)),b(this,Zs,setTimeout(()=>{var t;b(this,Zs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/i,p=e/i,g=this.x*o,y=this.y*l,w=this.width*o,A=this.height*l;switch(n){case 0:return[g+f+u,l-y-p-A+h,g+f+w+u,l-y-p+h];case 90:return[g+p+u,l-y+f+h,g+p+A+u,l-y+f+w+h];case 180:return[g-f-w+u,l-y+p+h,g-f+u,l-y+p+A+h];case 270:return[g-p-A+u,l-y-f-w+h,g-p+u,l-y-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,o,l]=t,u=o-n,h=l-i;switch(this.rotation){case 0:return[n,e-l,u,h];case 90:return[n,e-i,h,u];case 180:return[o,e-i,u,h];case 270:return[o,e-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=c(this,re))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:o,richText:l},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,Nl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,Nl,!1),!0):!1}isInEditMode(){return c(this,Nl)}shouldGetKeyboardEvents(){return c(this,Ur)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&i>0&&t<o&&n>0}rebuild(){_(this,At,bx).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,b(i,Rl,t.accessibilityData),i._isCopy=t.isCopy||!1;const[o,l]=i.pageDimensions,[u,h,f,p]=i.getRectInCurrentCoords(t.rect,l);return i.x=u/o,i.y=h/l,i.width=f/o,i.height=p/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=c(this,ha))==null||t.abort(),b(this,ha,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,Zs)&&(clearTimeout(c(this,Zs)),b(this,Zs,null)),_(this,At,bf).call(this),this.removeEditToolbar(),c(this,rs)){for(const i of c(this,rs).values())clearTimeout(i);b(this,rs,null)}this.parent=null,(e=c(this,Fl))==null||e.destroy(),b(this,Fl,null),(n=c(this,ss))==null||n.remove(),b(this,ss,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,At,uM).call(this),c(this,yn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,o,l]=this.getPDFRect();return[Dt._round(n+(o-n)*t),Dt._round(i+(l-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,re).commentPopupPositionInLayer}set commentPopupPosition(t){c(this,re).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return c(this,re).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,re).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=c(this,re))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Vr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,yn).children;if(!c(this,Cs)){b(this,Cs,Array.from(e));const l=_(this,At,gM).bind(this),u=_(this,At,yM).bind(this),h=this._uiManager._signal;for(const f of c(this,Cs)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",_(this,At,vM).bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",Dt._l10nResizer[p])}}const n=c(this,Cs)[0];let i=0;for(const l of e){if(l===n)break;i++}const o=(360-this.rotation+this.parentRotation)%360/90*(c(this,Cs).length/4);if(o!==i){if(o<i)for(let u=0;u<i-o;u++)c(this,yn).append(c(this,yn).firstElementChild);else if(o>i)for(let u=0;u<o-i;u++)c(this,yn).firstElementChild.before(c(this,yn).lastElementChild);let l=0;for(const u of e){const f=c(this,Cs)[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Dt._l10nResizer[f])}}_(this,At,xx).call(this,0),b(this,Ur,!0),c(this,yn).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Ur)&&_(this,At,vx).call(this,c(this,Sp),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){_(this,At,bf).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,o;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=c(this,we))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,i,o;this.isSelected&&(this.isSelected=!1,(t=c(this,yn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(o=c(this,we))==null||o.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Ap)}set isEditing(t){b(this,Ap,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,rs)||b(this,rs,new Map);const{action:n}=t;let i=c(this,rs).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),c(this,rs).delete(n),c(this,rs).size===0&&b(this,rs,null)},Dt._telemetryTimeout),c(this,rs).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,Zu,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Zu,!0)}updateFakeAnnotationElement(t){if(!c(this,ss)&&!this.deleted){b(this,ss,t.addFakeAnnotation(this));return}if(this.deleted){c(this,ss).remove(),b(this,ss,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,ss).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Rl=new WeakMap,Cs=new WeakMap,we=new WeakMap,re=new WeakMap,jr=new WeakMap,Zu=new WeakMap,ua=new WeakMap,xp=new WeakMap,yn=new WeakMap,Ll=new WeakMap,Vr=new WeakMap,ss=new WeakMap,ha=new WeakMap,Sp=new WeakMap,Il=new WeakMap,yi=new WeakMap,Ap=new WeakMap,Nl=new WeakMap,Ur=new WeakMap,Zs=new WeakMap,th=new WeakMap,eh=new WeakMap,rs=new WeakMap,Fl=new WeakMap,Ep=new WeakMap,Iv=new WeakMap,At=new WeakSet,mx=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Cp=new WeakSet,gx=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},My=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},uM=function(){if(c(this,yn))return;b(this,yn,document.createElement("div")),c(this,yn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");c(this,yn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",_(this,At,hM).bind(this,n),{signal:e}),i.addEventListener("contextmenu",hs,{signal:e}),i.tabIndex=-1}this.div.prepend(c(this,yn))},hM=function(t,e){var p;e.preventDefault();const{isMac:n}=en.platform;if(e.button!==0||e.ctrlKey&&n)return;(p=c(this,we))==null||p.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,b(this,Ll,[e.screenX,e.screenY]);const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_(this,At,vx).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ne,{passive:!1,signal:l}),window.addEventListener("contextmenu",hs,{signal:l}),b(this,Vr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var g;o.abort(),this.parent.togglePointerEvents(!0),(g=c(this,we))==null||g.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=h,_(this,At,Dy).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},yx=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Dy=function(){if(!c(this,Vr))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=c(this,Vr);b(this,Vr,null);const o=this.x,l=this.y,u=this.width,h=this.height;o===t&&l===e&&u===n&&h===i||this.addCommands({cmd:_(this,At,yx).bind(this,o,l,u,h),undo:_(this,At,yx).bind(this,t,e,n,i),mustExec:!0})},vx=function(t,e){const[n,i]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,f=Dt.MIN_SIZE/n,p=Dt.MIN_SIZE/i,g=_(this,At,My).call(this,this.rotation),y=(rt,tt)=>[g[0]*rt+g[2]*tt,g[1]*rt+g[3]*tt],w=_(this,At,My).call(this,360-this.rotation),A=(rt,tt)=>[w[0]*rt+w[2]*tt,w[1]*rt+w[3]*tt];let S,C,T=!1,M=!1;switch(t){case"topLeft":T=!0,S=(rt,tt)=>[0,0],C=(rt,tt)=>[rt,tt];break;case"topMiddle":S=(rt,tt)=>[rt/2,0],C=(rt,tt)=>[rt/2,tt];break;case"topRight":T=!0,S=(rt,tt)=>[rt,0],C=(rt,tt)=>[0,tt];break;case"middleRight":M=!0,S=(rt,tt)=>[rt,tt/2],C=(rt,tt)=>[0,tt/2];break;case"bottomRight":T=!0,S=(rt,tt)=>[rt,tt],C=(rt,tt)=>[0,0];break;case"bottomMiddle":S=(rt,tt)=>[rt/2,tt],C=(rt,tt)=>[rt/2,0];break;case"bottomLeft":T=!0,S=(rt,tt)=>[0,tt],C=(rt,tt)=>[rt,0];break;case"middleLeft":M=!0,S=(rt,tt)=>[0,tt/2],C=(rt,tt)=>[rt,tt/2];break}const k=S(u,h),D=C(u,h);let R=y(...D);const I=Dt._round(o+R[0]),j=Dt._round(l+R[1]);let H=1,X=1,Q,Z;if(e.fromKeyboard)({deltaX:Q,deltaY:Z}=e);else{const{screenX:rt,screenY:tt}=e,[G,at]=c(this,Ll);[Q,Z]=this.screenToPageTranslation(rt-G,tt-at),c(this,Ll)[0]=rt,c(this,Ll)[1]=tt}if([Q,Z]=A(Q/n,Z/i),T){const rt=Math.hypot(u,h);H=X=Math.max(Math.min(Math.hypot(D[0]-k[0]-Q,D[1]-k[1]-Z)/rt,1/u,1/h),f/u,p/h)}else M?H=Gn(Math.abs(D[0]-k[0]-Q),f,1)/u:X=Gn(Math.abs(D[1]-k[1]-Z),p,1)/h;const vt=Dt._round(u*H),wt=Dt._round(h*X);R=y(...C(vt,wt));const gt=I-R[0],St=j-R[1];c(this,yi)||b(this,yi,[this.x,this.y,this.width,this.height]),this.width=vt,this.height=wt,this.x=gt,this.y=St,this.setDims(),this.fixAndSetPosition(),this._onResizing()},dM=function(){var t;b(this,Vr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,we))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},fM=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=_(this,At,My).call(this,this.rotation),u=(I,j)=>[l[0]*I+l[2]*j,l[1]*I+l[3]*j],[h,f]=this.parentDimensions,p=this.x,g=this.y,y=this.width,w=this.height,A=Dt.MIN_SIZE/h,S=Dt.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/w),A/y,S/w);const C=Dt._round(y*o),T=Dt._round(w*o);if(C===y&&T===w)return;c(this,yi)||b(this,yi,[p,g,y,w]);const M=u(y/2,w/2),k=Dt._round(p+M[0]),D=Dt._round(g+M[1]),R=u(C/2,T/2);this.x=k-R[0],this.y=D-R[1],this.width=C,this.height=T,this.setDims(),this.fixAndSetPosition(),this._onResizing()},pM=function(){var t;(t=c(this,we))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),_(this,At,Dy).call(this)},wx=function(t){const{isMac:e}=en.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},mM=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,o=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:o},u=f=>{i.abort(),b(this,ua,null),b(this,Il,!1),this._uiManager.endDragSession()||_(this,At,wx).call(this,f),n&&this._onStopDragging()};e&&(b(this,th,t.clientX),b(this,eh,t.clientY),b(this,ua,t.pointerId),b(this,xp,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:y}=f;if(y!==c(this,ua)){Ne(f);return}const[w,A]=this.screenToPageTranslation(p-c(this,th),g-c(this,eh));b(this,th,p),b(this,eh,g),this._uiManager.dragSelectedEditors(w,A)},l),window.addEventListener("touchmove",Ne,l),window.addEventListener("pointerdown",f=>{f.pointerType===c(this,xp)&&(c(this,Fl)||f.isPrimary)&&u(f),Ne(f)},l));const h=f=>{if(!c(this,ua)||c(this,ua)===f.pointerId){u(f);return}Ne(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},bx=function(){if(c(this,ha)||!this.div)return;b(this,ha,new AbortController);const t=this._uiManager.combinedSignal(c(this,ha));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},gM=function(t){Dt._resizerKeyboardManager.exec(this,t)},yM=function(t){var e;c(this,Ur)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,yn)&&_(this,At,bf).call(this)},vM=function(t){b(this,Sp,c(this,Ur)?t:"")},xx=function(t){if(c(this,Cs))for(const e of c(this,Cs))e.tabIndex=t},bf=function(){b(this,Ur,!1),_(this,At,xx).call(this,-1),_(this,At,Dy).call(this)},E(Dt,Cp),K(Dt,"_l10n",null),K(Dt,"_l10nResizer",null),K(Dt,"_borderLineWidth",-1),K(Dt,"_colorManager",new cx),K(Dt,"_zIndex",1),K(Dt,"_telemetryTimeout",1e3);let de=Dt;class W3 extends de{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const v_=3285377520,Yi=4294901760,Hs=65535;class wM{constructor(t){this.h1=t?t&4294967295:v_,this.h2=t?t&4294967295:v_}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,C=t.length;S<C;S++){const T=t.charCodeAt(S);T<=255?e[n++]=T:(e[n++]=T>>>8,e[n++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,o=n-i*4,l=new Uint32Array(e.buffer,0,i);let u=0,h=0,f=this.h1,p=this.h2;const g=3432918353,y=461845907,w=g&Hs,A=y&Hs;for(let S=0;S<i;S++)S&1?(u=l[S],u=u*g&Yi|u*w&Hs,u=u<<15|u>>>17,u=u*y&Yi|u*A&Hs,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[S],h=h*g&Yi|h*w&Hs,h=h<<15|h>>>17,h=h*y&Yi|h*A&Hs,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[i*4+2]<<16;case 2:u^=e[i*4+1]<<8;case 1:u^=e[i*4],u=u*g&Yi|u*w&Hs,u=u<<15|u>>>17,u=u*y&Yi|u*A&Hs,i&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Yi|t*36045&Hs,e=e*4283543511&Yi|((e<<16|t>>>16)*2950163797&Yi)>>>16,t^=e>>>1,t=t*444984403&Yi|t*60499&Hs,e=e*3301882366&Yi|((e<<16|t>>>16)*3120437893&Yi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Sx=Object.freeze({map:null,hash:"",transfer:void 0});var Ol,Bl,zr,vn,Nv,bM;class gA{constructor(){E(this,Nv);E(this,Ol,!1);E(this,Bl,null);E(this,zr,null);E(this,vn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=c(this,vn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return c(this,vn).get(t)}remove(t){const e=c(this,vn).get(t);if(e!==void 0&&(e instanceof de&&c(this,zr).delete(e.annotationElementId),c(this,vn).delete(t),c(this,vn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,vn).values())if(n instanceof de)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=c(this,vn).get(t);let i=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(i=!0,n[o]=l);else i=!0,c(this,vn).set(t,e);i&&_(this,Nv,bM).call(this),e instanceof de&&((c(this,zr)||b(this,zr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return c(this,vn).has(t)}get size(){return c(this,vn).size}resetModified(){c(this,Ol)&&(b(this,Ol,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new xM(this)}get serializable(){if(c(this,vn).size===0)return Sx;const t=new Map,e=new wM,n=[],i=Object.create(null);let o=!1;for(const[l,u]of c(this,vn)){const h=u instanceof de?u.serialize(!1,i):u;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),o||(o=!!h.bitmap))}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Sx}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const o of c(this,vn).values()){if(!(o instanceof de)){o.popup&&(o.popup.deleted?i+=1:n+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const h=t[u]||(t[u]=new Map);for(const[f,p]of Object.entries(l)){if(f==="type")continue;let g=h.get(f);g||(g=new Map,h.set(f,g));const y=g.get(p)??0;g.set(p,y+1)}}if((i>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){b(this,Bl,null)}updateEditor(t,e){var i;const n=(i=c(this,zr))==null?void 0:i.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=c(this,zr))==null?void 0:e.get(t))||null}get modifiedIds(){if(c(this,Bl))return c(this,Bl);const t=[];if(c(this,zr))for(const e of c(this,zr).values())e.serialize()&&t.push(e.annotationElementId);return b(this,Bl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return c(this,vn).entries()}}Ol=new WeakMap,Bl=new WeakMap,zr=new WeakMap,vn=new WeakMap,Nv=new WeakSet,bM=function(){c(this,Ol)||(b(this,Ol,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Tp;class xM extends gA{constructor(e){super();E(this,Tp);const{map:n,hash:i,transfer:o}=e.serializable,l=structuredClone(n,o?{transfer:o}:null);b(this,Tp,{map:l,hash:i,transfer:o})}get print(){le("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Tp)}get modifiedIds(){return Mt(this,"modifiedIds",{ids:new Set,hash:""})}}Tp=new WeakMap;var nh;class $3{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){E(this,nh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,nh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||c(this,nh).has(t.loadedName))){if(Vt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:o,style:l}=t,u=new FontFace(i,o,l);this.addNativeFontFace(u);try{await u.load(),c(this,nh).add(i),n==null||n(t)}catch{kt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}le("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw kt(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Mt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Mt(this,"isSyncFontLoadingSupported",$n||en.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Vt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Mt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(D,R){return D.charCodeAt(R)<<24|D.charCodeAt(R+1)<<16|D.charCodeAt(R+2)<<8|D.charCodeAt(R+3)&255}function i(D,R,I,j){const H=D.substring(0,R),X=D.substring(R+I);return H+j+X}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(D,R){if(++f>30){kt("Load test font never loaded."),R();return}if(h.font="30px "+D,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(p.bind(null,D,R))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=i(y,976,g.length,g);const A=16,S=1482184792;let C=n(y,A);for(o=0,l=g.length-3;o<l;o+=4)C=C-S+n(g,o)|0;o<g.length&&(C=C-S+n(g+"XXX",o)|0),y=i(y,A,4,C3(C));const T=`url(data:font/opentype;base64,${btoa(y)});`,M=`@font-face {font-family:"${g}";src:${T}}`;this.insertRule(M);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const D of[t.loadedName,g]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=D,k.append(R)}this._document.body.append(k),p(g,()=>{k.remove(),e.complete()})}}nh=new WeakMap;var te;class G3{constructor(t,e=null,n,i){E(this,te);this.compiledGlyphs=Object.create(null),b(this,te,t),this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Bk(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(l){kt(`getPathGenerator - ignoring character: "${l}".`)}const o=Uk(i==null?void 0:i.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return c(this,te).black}get bold(){return c(this,te).bold}get disableFontFace(){return c(this,te).disableFontFace??!1}set disableFontFace(t){Mt(this,"disableFontFace",!!t)}get fontExtraProperties(){return c(this,te).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,te).isInvalidPDFjsFont}get isType3Font(){return c(this,te).isType3Font}get italic(){return c(this,te).italic}get missingFile(){return c(this,te).missingFile}get remeasure(){return c(this,te).remeasure}get vertical(){return c(this,te).vertical}get ascent(){return c(this,te).ascent}get defaultWidth(){return c(this,te).defaultWidth}get descent(){return c(this,te).descent}get bbox(){return c(this,te).bbox}set bbox(t){Mt(this,"bbox",t)}get fontMatrix(){return c(this,te).fontMatrix}get fallbackName(){return c(this,te).fallbackName}get loadedName(){return c(this,te).loadedName}get mimetype(){return c(this,te).mimetype}get name(){return c(this,te).name}get data(){return c(this,te).data}clearData(){c(this,te).clearData()}get cssFontInfo(){return c(this,te).cssFontInfo}get systemFontInfo(){return c(this,te).systemFontInfo}get defaultVMetrics(){return c(this,te).defaultVMetrics}}te=new WeakMap;var ih,sh,_p,rh,Ry;const Du=class Du{constructor(t){E(this,rh);E(this,ih);E(this,sh);E(this,_p);b(this,ih,t),b(this,sh,new DataView(c(this,ih))),b(this,_p,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const f of Du.strings){const p=e.encode(t[f]);n[f]=p,i+=4+p.length}const o=new ArrayBuffer(i),l=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of Du.strings){const p=n[f],g=p.length;u.setUint32(h,g),l.set(p,h+4),h+=4+g}return Vt(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return _(this,rh,Ry).call(this,0)}get fontWeight(){return _(this,rh,Ry).call(this,1)}get italicAngle(){return _(this,rh,Ry).call(this,2)}};ih=new WeakMap,sh=new WeakMap,_p=new WeakMap,rh=new WeakSet,Ry=function(t){Vt(t<Du.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=c(this,sh).getUint32(e)+4;const n=c(this,sh).getUint32(e);return c(this,_p).decode(new Uint8Array(c(this,ih),e+4,n))},K(Du,"strings",["fontFamily","fontWeight","italicAngle"]);let bv=Du;var da,tr,jl,Vl,xf;const Ru=class Ru{constructor(t){E(this,Vl);E(this,da);E(this,tr);E(this,jl);b(this,da,t),b(this,tr,new DataView(c(this,da))),b(this,jl,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const y of Ru.strings){const w=e.encode(t[y]);n[y]=w,i+=4+w.length}i+=4;let o,l,u=1+i;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let g=0;p.setUint8(g++,t.guessFallback?1:0),p.setUint32(g,0),g+=4,i=0;for(const y of Ru.strings){const w=n[y],A=w.length;i+=4+A,p.setUint32(g,A),f.set(w,g+4),g+=4+A}return p.setUint32(g-i-4,i),t.style&&(p.setUint32(g,o.length),f.set(o,g+4),g+=4+o.length,p.setUint32(g,l.length),f.set(l,g+4),g+=4+l.length),Vt(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}get guessFallback(){return c(this,tr).getUint8(0)!==0}get css(){return _(this,Vl,xf).call(this,0)}get loadedName(){return _(this,Vl,xf).call(this,1)}get baseFontName(){return _(this,Vl,xf).call(this,2)}get src(){return _(this,Vl,xf).call(this,3)}get style(){let t=1;t+=4+c(this,tr).getUint32(t);const e=c(this,tr).getUint32(t),n=c(this,jl).decode(new Uint8Array(c(this,da),t+4,e));t+=4+e;const i=c(this,tr).getUint32(t),o=c(this,jl).decode(new Uint8Array(c(this,da),t+4,i));return{style:n,weight:o}}};da=new WeakMap,tr=new WeakMap,jl=new WeakMap,Vl=new WeakSet,xf=function(t){Vt(t<Ru.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=c(this,tr).getUint32(e)+4;const n=c(this,tr).getUint32(e);return c(this,jl).decode(new Uint8Array(c(this,da),e+4,n))},K(Ru,"strings",["css","loadedName","baseFontName","src"]);let xv=Ru;var oh,ah,lh,ch,vi,er,Pp,ee,Ie,bs,Ly,Sf;const Lt=class Lt{constructor({data:t,extra:e}){E(this,Ie);E(this,er);E(this,Pp);E(this,ee);b(this,er,t),b(this,Pp,new TextDecoder),b(this,ee,new DataView(c(this,er))),e&&Object.assign(this,e)}get black(){return _(this,Ie,bs).call(this,0)}get bold(){return _(this,Ie,bs).call(this,1)}get disableFontFace(){return _(this,Ie,bs).call(this,2)}get fontExtraProperties(){return _(this,Ie,bs).call(this,3)}get isInvalidPDFjsFont(){return _(this,Ie,bs).call(this,4)}get isType3Font(){return _(this,Ie,bs).call(this,5)}get italic(){return _(this,Ie,bs).call(this,6)}get missingFile(){return _(this,Ie,bs).call(this,7)}get remeasure(){return _(this,Ie,bs).call(this,8)}get vertical(){return _(this,Ie,bs).call(this,9)}get ascent(){return _(this,Ie,Ly).call(this,0)}get defaultWidth(){return _(this,Ie,Ly).call(this,1)}get descent(){return _(this,Ie,Ly).call(this,2)}get bbox(){let t=c(Lt,ah);if(c(this,ee).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<4;i++)n.push(c(this,ee).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=c(Lt,lh);if(c(this,ee).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<6;i++)n.push(c(this,ee).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=c(Lt,ch);if(c(this,ee).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<3;i++)n.push(c(this,ee).getInt16(t,!0)),t+=2;return n}get fallbackName(){return _(this,Ie,Sf).call(this,0)}get loadedName(){return _(this,Ie,Sf).call(this,1)}get mimetype(){return _(this,Ie,Sf).call(this,2)}get name(){return _(this,Ie,Sf).call(this,3)}get data(){let t=c(Lt,vi);const e=c(this,ee).getUint32(t);t+=4+e;const n=c(this,ee).getUint32(t);t+=4+n;const i=c(this,ee).getUint32(t);t+=4+i;const o=c(this,ee).getUint32(t);if(o!==0)return new Uint8Array(c(this,er),t+4,o)}clearData(){let t=c(Lt,vi);const e=c(this,ee).getUint32(t);t+=4+e;const n=c(this,ee).getUint32(t);t+=4+n;const i=c(this,ee).getUint32(t);t+=4+i;const o=c(this,ee).getUint32(t);new Uint8Array(c(this,er),t+4,o).fill(0),c(this,ee).setUint32(t,0)}get cssFontInfo(){let t=c(Lt,vi);const e=c(this,ee).getUint32(t);t+=4+e;const n=c(this,ee).getUint32(t);t+=4+n;const i=c(this,ee).getUint32(t);if(i===0)return null;const o=new Uint8Array(i);return o.set(new Uint8Array(c(this,er),t+4,i)),new bv(o.buffer)}get systemFontInfo(){let t=c(Lt,vi);const e=c(this,ee).getUint32(t);t+=4+e;const n=c(this,ee).getUint32(t);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(c(this,er),t+4,n)),new xv(i.buffer)}static write(t){const e=t.systemFontInfo?xv.write(t.systemFontInfo):null,n=t.cssFontInfo?bv.write(t.cssFontInfo):null,i=new TextEncoder,o={};let l=0;for(const S of Lt.strings)o[S]=i.encode(t[S]),l+=4+o[S].length;const u=c(Lt,vi)+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let g=0;const y=Lt.bools.length;let w=0,A=0;for(let S=0;S<y;S++){const C=t[Lt.bools[S]];w|=(C===void 0?0:C?2:1)<<A,A+=2,(A===8||S===y-1)&&(p.setUint8(g++,w),w=0,A=0)}Vt(g===c(Lt,oh),"FontInfo.write: Boolean properties offset mismatch");for(const S of Lt.numbers)p.setFloat64(g,t[S]),g+=8;if(Vt(g===c(Lt,ah),"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(g++,4);for(const S of t.bbox)p.setInt16(g,S,!0),g+=2}else p.setUint8(g++,0),g+=8;if(Vt(g===c(Lt,lh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(g++,6);for(const S of t.fontMatrix)p.setFloat64(g,S,!0),g+=8}else p.setUint8(g++,0),g+=48;if(Vt(g===c(Lt,ch),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(g++,1);for(const S of t.defaultVMetrics)p.setInt16(g,S,!0),g+=2}else p.setUint8(g++,0),g+=6;Vt(g===c(Lt,vi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(c(Lt,vi),0),g+=4;for(const S of Lt.strings){const C=o[S],T=C.length;p.setUint32(g,T),f.set(C,g+4),g+=4+T}if(p.setUint32(c(Lt,vi),g-c(Lt,vi)-4),!e)p.setUint32(g,0),g+=4;else{const S=e.byteLength;p.setUint32(g,S),Vt(g+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),g+4),g+=4+S}if(!n)p.setUint32(g,0),g+=4;else{const S=n.byteLength;p.setUint32(g,S),Vt(g+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),g+4),g+=4+S}return t.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,t.data.length),f.set(t.data,g+4),g+=4+t.data.length),Vt(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}};oh=new WeakMap,ah=new WeakMap,lh=new WeakMap,ch=new WeakMap,vi=new WeakMap,er=new WeakMap,Pp=new WeakMap,ee=new WeakMap,Ie=new WeakSet,bs=function(t){Vt(t<Lt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,i=c(this,ee).getUint8(e)>>n&3;return i===0?void 0:i===2},Ly=function(t){return Vt(t<Lt.numbers.length,"Invalid number index"),c(this,ee).getFloat64(c(Lt,oh)+t*8)},Sf=function(t){Vt(t<Lt.strings.length,"Invalid string index");let e=c(Lt,vi)+4;for(let o=0;o<t;o++)e+=c(this,ee).getUint32(e)+4;const n=c(this,ee).getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(c(this,er),e+4,n)),c(this,Pp).decode(i)},K(Lt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),K(Lt,"numbers",["ascent","defaultWidth","descent"]),K(Lt,"strings",["fallbackName","loadedName","mimetype","name"]),E(Lt,oh,Math.ceil(Lt.bools.length*2/8)),E(Lt,ah,c(Lt,oh)+Lt.numbers.length*8),E(Lt,lh,c(Lt,ah)+1+8),E(Lt,ch,c(Lt,lh)+1+48),E(Lt,vi,c(Lt,ch)+1+6);let Ax=Lt;var kp,Mp,Dp,Rp,Lp,Ip,Np,Fp;const ue=class ue{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,i=[],o=[],l=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],i=t[2],o=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(i.length/2),g=Math.floor(o.length/3),y=l.length,w=u.length;let A=0;for(const R of u)A+=1,A=Math.ceil(A/4)*4,A+=4+R.coords.length*4,A+=4+R.colors.length*4,R.verticesPerRow!==void 0&&(A+=4);const S=20+p*8+g*3+y*8+(n?16:0)+(f?3:0)+A,C=new ArrayBuffer(S),T=new DataView(C),M=new Uint8Array(C);T.setUint8(c(ue,kp),e),T.setUint8(c(ue,Mp),n?1:0),T.setUint8(c(ue,Dp),f?1:0),T.setUint8(c(ue,Rp),h),T.setUint32(c(ue,Lp),p,!0),T.setUint32(c(ue,Ip),g,!0),T.setUint32(c(ue,Np),y,!0),T.setUint32(c(ue,Fp),w,!0);let k=20;new Float32Array(C,k,p*2).set(i),k+=p*8,M.set(o,k),k+=g*3;for(const[R,I]of l)T.setFloat32(k,R,!0),k+=4,T.setUint32(k,parseInt(I.slice(1),16),!0),k+=4;if(n)for(const R of n)T.setFloat32(k,R,!0),k+=4;f&&(M.set(f,k),k+=3);for(let R=0;R<u.length;R++){const I=u[R];T.setUint8(k,I.type),k+=1,k=Math.ceil(k/4)*4,T.setUint32(k,I.coords.length,!0),k+=4,new Int32Array(C,k,I.coords.length).set(I.coords),k+=I.coords.length*4,T.setUint32(k,I.colors.length,!0),k+=4,new Int32Array(C,k,I.colors.length).set(I.colors),k+=I.colors.length*4,I.verticesPerRow!==void 0&&(T.setUint32(k,I.verticesPerRow,!0),k+=4)}return C}getIR(){const t=this.view,e=this.data[c(ue,kp)],n=!!this.data[c(ue,Mp)],i=!!this.data[c(ue,Dp)],o=t.getUint32(c(ue,Lp),!0),l=t.getUint32(c(ue,Ip),!0),u=t.getUint32(c(ue,Np),!0),h=t.getUint32(c(ue,Fp),!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const g=new Uint8Array(this.buffer,f,l*3);f+=l*3;const y=[];for(let C=0;C<u;++C){const T=t.getFloat32(f,!0);f+=4;const M=t.getUint32(f,!0);f+=4,y.push([T,`#${M.toString(16).padStart(6,"0")}`])}let w=null;if(n){w=[];for(let C=0;C<4;++C)w.push(t.getFloat32(f,!0)),f+=4}let A=null;i&&(A=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let C=0;C<h;++C){const T=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const M=t.getUint32(f,!0);f+=4;const k=new Int32Array(this.buffer,f,M);f+=M*4;const D=t.getUint32(f,!0);f+=4;const R=new Int32Array(this.buffer,f,D);f+=D*4;const I={type:T,coords:k,colors:R};T===ex.LATTICE&&(I.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(I)}if(e===1)return["RadialAxial","axial",w,y,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",w,y,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const C=this.data[c(ue,Rp)];let T=null;if(p.length>0){let M=p[0],k=p[0],D=p[1],R=p[1];for(let I=0;I<p.length;I+=2){const j=p[I],H=p[I+1];M=M>j?j:M,D=D>H?H:D,k=k<j?j:k,R=R<H?H:R}T=[M,D,k,R]}return["Mesh",C,p,g,S,T,w,A]}throw new Error(`Unsupported pattern kind: ${e}`)}};kp=new WeakMap,Mp=new WeakMap,Dp=new WeakMap,Rp=new WeakMap,Lp=new WeakMap,Ip=new WeakMap,Np=new WeakMap,Fp=new WeakMap,E(ue,kp,0),E(ue,Mp,1),E(ue,Dp,2),E(ue,Rp,3),E(ue,Lp,4),E(ue,Ip,8),E(ue,Np,12),E(ue,Fp,16);let Ex=ue;var uh;class X3{constructor(t){E(this,uh);b(this,uh,t)}static write(t){let e,n;return en.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return en.isFloat16ArraySupported?new Float16Array(c(this,uh)):new Float32Array(c(this,uh))}}uh=new WeakMap;function Y3(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if($n)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function q3(s){if($n&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Xm(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function py(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Cx=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,K3=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",Q3=M3.bind(null,Cx,K3);var Hr,Fv;class J3{constructor(){E(this,Hr,new Map);E(this,Fv,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};c(this,Fv).then(()=>{for(const[i]of c(this,Hr))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){kt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);i=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}c(this,Hr).set(e,i)}removeEventListener(t,e){const n=c(this,Hr).get(e);n==null||n(),c(this,Hr).delete(e)}terminate(){for(const[,t]of c(this,Hr))t==null||t();c(this,Hr).clear()}}Hr=new WeakMap,Fv=new WeakMap;const my={DATA:1,ERROR:2},ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function w_(){}function ei(s){if(s instanceof za||s instanceof nx||s instanceof h_||s instanceof gv||s instanceof Cb)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||le('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new za(s.message);case"InvalidPDFException":return new nx(s.message);case"PasswordException":return new h_(s.message,s.code);case"ResponseException":return new gv(s.message,s.status,s.missing);case"UnknownErrorException":return new Cb(s.message,s.details)}return new Cb(s.message,s.toString())}var hh,us,SM,AM,EM,Iy;class Af{constructor(t,e,n){E(this,us);E(this,hh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",_(this,us,SM).bind(this),{signal:c(this,hh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,i){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},i),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:ze.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Vt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:ze.CANCEL,streamId:o,reason:ei(f)}),p.promise}},n)}destroy(){var t;(t=c(this,hh))==null||t.abort(),b(this,hh,null)}}hh=new WeakMap,us=new WeakSet,SM=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){_(this,us,EM).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===my.DATA)i.resolve(t.data);else if(t.callback===my.ERROR)i.reject(ei(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:i,callback:my.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:i,callback:my.ERROR,callbackId:t.callbackId,reason:ei(l)})});return}if(t.streamId){_(this,us,AM).call(this,t);return}e(t.data)},AM=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,g){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:ze.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:ze.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){Vt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:ze.ERROR,streamId:e,reason:ei(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:n,targetName:i,stream:ze.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:ze.START_COMPLETE,streamId:e,reason:ei(f)})})},EM=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case ze.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(ei(t.reason));break;case ze.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(ei(t.reason));break;case ze.PULL:if(!u){o.postMessage({sourceName:n,targetName:i,stream:ze.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||w_).then(function(){o.postMessage({sourceName:n,targetName:i,stream:ze.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:ze.PULL_COMPLETE,streamId:e,reason:ei(f)})});break;case ze.ENQUEUE:if(Vt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ze.CLOSE:if(Vt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),_(this,us,Iy).call(this,l,e);break;case ze.ERROR:Vt(l,"error should have stream controller"),l.controller.error(ei(t.reason)),_(this,us,Iy).call(this,l,e);break;case ze.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(ei(t.reason)),_(this,us,Iy).call(this,l,e);break;case ze.CANCEL:if(!u)break;const h=ei(t.reason);Promise.try(u.onCancel||w_,h).then(function(){o.postMessage({sourceName:n,targetName:i,stream:ze.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:ze.CANCEL_COMPLETE,streamId:e,reason:ei(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Iy=async function(t,e){var n,i,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Op;class CM{constructor({enableHWA:t=!1}){E(this,Op,!1);b(this,Op,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Op)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){le("Abstract method `_createCanvas` called.")}}Op=new WeakMap;class Z3 extends CM{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class TM{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){le("Abstract method `_fetch` called.")}}class b_ extends TM{async _fetch(t){const e=await Ym(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Xm(e)}}class _M{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,o){return"none"}destroy(t=!1){}}var Ul,dh,Wr,$r,Ln,zl,Hl,lt,kn,Ef,gu,Ny,yu,PM,Tx,vu,Cf,Tf,_x,_f;class tV extends _M{constructor({docId:e,ownerDocument:n=globalThis.document}){super();E(this,lt);E(this,Ul);E(this,dh);E(this,Wr);E(this,$r);E(this,Ln);E(this,zl);E(this,Hl,0);b(this,$r,e),b(this,Ln,n)}addFilter(e){if(!e)return"none";let n=c(this,lt,kn).get(e);if(n)return n;const[i,o,l]=_(this,lt,Ny).call(this,e),u=e.length===1?i:`${i}${o}${l}`;if(n=c(this,lt,kn).get(u),n)return c(this,lt,kn).set(e,n),n;const h=`g_${c(this,$r)}_transfer_map_${qe(this,Hl)._++}`,f=_(this,lt,yu).call(this,h);c(this,lt,kn).set(e,f),c(this,lt,kn).set(u,f);const p=_(this,lt,vu).call(this,h);return _(this,lt,Tf).call(this,i,o,l,p),f}addHCMFilter(e,n){var A;const i=`${e}-${n}`,o="base";let l=c(this,lt,Ef).get(o);if((l==null?void 0:l.key)===i||(l?((A=l.filter)==null||A.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},c(this,lt,Ef).set(o,l)),!e||!n))return l.url;const u=_(this,lt,_f).call(this,e);e=st.makeHexColor(...u);const h=_(this,lt,_f).call(this,n);if(n=st.makeHexColor(...h),c(this,lt,gu).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const f=new Array(256);for(let S=0;S<=255;S++){const C=S/255;f[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const p=f.join(","),g=`g_${c(this,$r)}_hcm_filter`,y=l.filter=_(this,lt,vu).call(this,g);_(this,lt,Tf).call(this,p,p,p,y),_(this,lt,Tx).call(this,y);const w=(S,C)=>{const T=u[S]/255,M=h[S]/255,k=new Array(C+1);for(let D=0;D<=C;D++)k[D]=T+D/C*(M-T);return k.join(",")};return _(this,lt,Tf).call(this,w(0,5),w(1,5),w(2,5),y),l.url=_(this,lt,yu).call(this,g),l.url}addAlphaFilter(e){let n=c(this,lt,kn).get(e);if(n)return n;const[i]=_(this,lt,Ny).call(this,[e]),o=`alpha_${i}`;if(n=c(this,lt,kn).get(o),n)return c(this,lt,kn).set(e,n),n;const l=`g_${c(this,$r)}_alpha_map_${qe(this,Hl)._++}`,u=_(this,lt,yu).call(this,l);c(this,lt,kn).set(e,u),c(this,lt,kn).set(o,u);const h=_(this,lt,vu).call(this,l);return _(this,lt,_x).call(this,i,h),u}addLuminosityFilter(e){let n=c(this,lt,kn).get(e||"luminosity");if(n)return n;let i,o;if(e?([i]=_(this,lt,Ny).call(this,[e]),o=`luminosity_${i}`):o="luminosity",n=c(this,lt,kn).get(o),n)return c(this,lt,kn).set(e,n),n;const l=`g_${c(this,$r)}_luminosity_map_${qe(this,Hl)._++}`,u=_(this,lt,yu).call(this,l);c(this,lt,kn).set(e,u),c(this,lt,kn).set(o,u);const h=_(this,lt,vu).call(this,l);return _(this,lt,PM).call(this,h),e&&_(this,lt,_x).call(this,i,h),u}addHighlightHCMFilter(e,n,i,o,l){var M;const u=`${n}-${i}-${o}-${l}`;let h=c(this,lt,Ef).get(e);if((h==null?void 0:h.key)===u||(h?((M=h.filter)==null||M.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},c(this,lt,Ef).set(e,h)),!n||!i))return h.url;const[f,p]=[n,i].map(_(this,lt,_f).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[w,A]=[o,l].map(_(this,lt,_f).bind(this));y<g&&([g,y,w,A]=[y,g,A,w]),c(this,lt,gu).style.color="";const S=(k,D,R)=>{const I=new Array(256),j=(y-g)/R,H=k/255,X=(D-k)/(255*R);let Q=0;for(let Z=0;Z<=R;Z++){const vt=Math.round(g+Z*j),wt=H+Z*X;for(let gt=Q;gt<=vt;gt++)I[gt]=wt;Q=vt+1}for(let Z=Q;Z<256;Z++)I[Z]=I[Q-1];return I.join(",")},C=`g_${c(this,$r)}_hcm_${e}_filter`,T=h.filter=_(this,lt,vu).call(this,C);return _(this,lt,Tx).call(this,T),_(this,lt,Tf).call(this,S(w[0],A[0],5),S(w[1],A[1],5),S(w[2],A[2],5),T),h.url=_(this,lt,yu).call(this,C),h.url}destroy(e=!1){var n,i,o,l;e&&((n=c(this,zl))!=null&&n.size)||((i=c(this,Wr))==null||i.parentNode.parentNode.remove(),b(this,Wr,null),(o=c(this,dh))==null||o.clear(),b(this,dh,null),(l=c(this,zl))==null||l.clear(),b(this,zl,null),b(this,Hl,0))}}Ul=new WeakMap,dh=new WeakMap,Wr=new WeakMap,$r=new WeakMap,Ln=new WeakMap,zl=new WeakMap,Hl=new WeakMap,lt=new WeakSet,kn=function(){return c(this,dh)||b(this,dh,new Map)},Ef=function(){return c(this,zl)||b(this,zl,new Map)},gu=function(){if(!c(this,Wr)){const e=c(this,Ln).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=c(this,Ln).createElementNS(_r,"svg");i.setAttribute("width",0),i.setAttribute("height",0),b(this,Wr,c(this,Ln).createElementNS(_r,"defs")),e.append(i),i.append(c(this,Wr)),c(this,Ln).body.append(e)}return c(this,Wr)},Ny=function(e){if(e.length===1){const f=e[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=f[y]/255;const g=p.join(",");return[g,g,g]}const[n,i,o]=e,l=new Array(256),u=new Array(256),h=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,u[f]=i[f]/255,h[f]=o[f]/255;return[l.join(","),u.join(","),h.join(",")]},yu=function(e){if(c(this,Ul)===void 0){b(this,Ul,"");const n=c(this,Ln).URL;n!==c(this,Ln).baseURI&&(a0(n)?kt('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Ul,Nk(n,"")))}return`url(${c(this,Ul)}#${e})`},PM=function(e){const n=c(this,Ln).createElementNS(_r,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Tx=function(e){const n=c(this,Ln).createElementNS(_r,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},vu=function(e){const n=c(this,Ln).createElementNS(_r,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),c(this,lt,gu).append(n),n},Cf=function(e,n,i){const o=c(this,Ln).createElementNS(_r,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),e.append(o)},Tf=function(e,n,i,o){const l=c(this,Ln).createElementNS(_r,"feComponentTransfer");o.append(l),_(this,lt,Cf).call(this,l,"feFuncR",e),_(this,lt,Cf).call(this,l,"feFuncG",n),_(this,lt,Cf).call(this,l,"feFuncB",i)},_x=function(e,n){const i=c(this,Ln).createElementNS(_r,"feComponentTransfer");n.append(i),_(this,lt,Cf).call(this,i,"feFuncA",e)},_f=function(e){return c(this,lt,gu).style.color=e,Km(getComputedStyle(c(this,lt,gu)).getPropertyValue("color"))};class kM{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){le("Abstract method `_fetch` called.")}}class x_ extends kM{async _fetch(t){const e=await Ym(t,"arraybuffer");return new Uint8Array(e)}}class MM{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){le("Abstract method `_fetch` called.")}}class S_ extends MM{async _fetch(t){const e=await Ym(t,"arraybuffer");return new Uint8Array(e)}}$n&&kt("Please use the `legacy` build in Node.js environments.");async function yA(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class eV extends _M{}class nV extends CM{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class iV extends TM{async _fetch(t){return yA(t)}}class sV extends kM{async _fetch(t){return yA(t)}}class rV extends MM{async _fetch(t){return yA(t)}}const fu="__forcedDependency",{floor:A_,ceil:E_}=Math;function gy(s,t,e,n,i,o){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],i),s[t*4+3]=Math.max(s[t*4+3],o)}const Px=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var fh,fa;class oV{constructor(t,e){E(this,fh);E(this,fa);b(this,fh,t),b(this,fa,e)}get length(){return c(this,fh).length}isEmpty(t){return c(this,fh)[t]===Px}minX(t){return c(this,fa)[t*4+0]/256}minY(t){return c(this,fa)[t*4+1]/256}maxX(t){return(c(this,fa)[t*4+2]+1)/256}maxY(t){return(c(this,fa)[t*4+3]+1)/256}}fh=new WeakMap,fa=new WeakMap;const yy=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};var si,ri,Wl,Ts,$l,Gr,Kt,ne,Xr,oi,Bp,ph,Gl,Xl,Yr,In,nr,jp,kx;class aV{constructor(t,e,n=!1){E(this,jp);E(this,si,{__proto__:null});E(this,ri,{__proto__:null,transform:[],moveText:[],sameLineText:[],[fu]:[]});E(this,Wl,new Map);E(this,Ts,[]);E(this,$l,[]);E(this,Gr,[[1,0,0,1,0,0]]);E(this,Kt,[-1/0,-1/0,1/0,1/0]);E(this,ne,new Float64Array([1/0,1/0,-1/0,-1/0]));E(this,Xr,-1);E(this,oi,new Set);E(this,Bp,new Map);E(this,ph,new Map);E(this,Gl);E(this,Xl);E(this,Yr);E(this,In);E(this,nr);b(this,Gl,t.width),b(this,Xl,t.height),_(this,jp,kx).call(this,e),n&&b(this,nr,new Map)}growOperationsCount(t){t>=c(this,In).length&&_(this,jp,kx).call(this,t,c(this,In))}save(t){return b(this,si,{__proto__:c(this,si)}),b(this,ri,{__proto__:c(this,ri),transform:{__proto__:c(this,ri).transform},moveText:{__proto__:c(this,ri).moveText},sameLineText:{__proto__:c(this,ri).sameLineText},[fu]:{__proto__:c(this,ri)[fu]}}),b(this,Kt,{__proto__:c(this,Kt)}),c(this,Ts).push(t),this}restore(t){var i;const e=Object.getPrototypeOf(c(this,si));if(e===null)return this;b(this,si,e),b(this,ri,Object.getPrototypeOf(c(this,ri))),b(this,Kt,Object.getPrototypeOf(c(this,Kt)));const n=c(this,Ts).pop();return n!==void 0&&((i=yy(c(this,nr),t))==null||i.dependencies.add(n),c(this,In)[t]=c(this,In)[n]),this}recordOpenMarker(t){return c(this,Ts).push(t),this}getOpenMarker(){return c(this,Ts).length===0?null:c(this,Ts).at(-1)}recordCloseMarker(t){var n;const e=c(this,Ts).pop();return e!==void 0&&((n=yy(c(this,nr),t))==null||n.dependencies.add(e),c(this,In)[t]=c(this,In)[e]),this}beginMarkedContent(t){return c(this,$l).push(t),this}endMarkedContent(t){var n;const e=c(this,$l).pop();return e!==void 0&&((n=yy(c(this,nr),t))==null||n.dependencies.add(e),c(this,In)[t]=c(this,In)[e]),this}pushBaseTransform(t){return c(this,Gr).push(st.multiplyByDOMMatrix(c(this,Gr).at(-1),t.getTransform())),this}popBaseTransform(){return c(this,Gr).length>1&&c(this,Gr).pop(),this}recordSimpleData(t,e){return c(this,si)[t]=e,this}recordIncrementalData(t,e){return c(this,ri)[t].push(e),this}resetIncrementalData(t,e){return c(this,ri)[t].length=0,this}recordNamedData(t,e){return c(this,Wl).set(t,e),this}recordSimpleDataFromNamed(t,e,n){c(this,si)[t]=c(this,Wl).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(fu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in c(this,si)&&this.recordFutureForcedDependency(e,c(this,si)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of c(this,oi))this.recordFutureForcedDependency(fu,t);return this}resetBBox(t){return c(this,Xr)!==t&&(b(this,Xr,t),c(this,ne)[0]=1/0,c(this,ne)[1]=1/0,c(this,ne)[2]=-1/0,c(this,ne)[3]=-1/0),this}recordClipBox(t,e,n,i,o,l){const u=st.multiplyByDOMMatrix(c(this,Gr).at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];st.axialAlignedBoundingBox([n,o,i,l],u,h);const f=st.intersect(c(this,Kt),h);return f?(c(this,Kt)[0]=f[0],c(this,Kt)[1]=f[1],c(this,Kt)[2]=f[2],c(this,Kt)[3]=f[3]):(c(this,Kt)[0]=c(this,Kt)[1]=1/0,c(this,Kt)[2]=c(this,Kt)[3]=-1/0),this}recordBBox(t,e,n,i,o,l){const u=c(this,Kt);if(u[0]===1/0)return this;const h=st.multiplyByDOMMatrix(c(this,Gr).at(-1),e.getTransform());if(u[0]===-1/0)return st.axialAlignedBoundingBox([n,o,i,l],h,c(this,ne)),this;const f=[1/0,1/0,-1/0,-1/0];return st.axialAlignedBoundingBox([n,o,i,l],h,f),c(this,ne)[0]=Math.min(c(this,ne)[0],Math.max(f[0],u[0])),c(this,ne)[1]=Math.min(c(this,ne)[1],Math.max(f[1],u[1])),c(this,ne)[2]=Math.max(c(this,ne)[2],Math.min(f[2],u[2])),c(this,ne)[3]=Math.max(c(this,ne)[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,i=1,o=0,l=0,u){const h=n.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&c(this,ph).get(n),f!==!1&&(p=[0,0,0,0],st.axialAlignedBoundingBox(h,n.fontMatrix,p),(i!==1||o!==0||l!==0)&&st.scaleMinMax([i,0,0,-i,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const g=u();return h&&p&&f===void 0&&(f=p[0]<=o-g.actualBoundingBoxLeft&&p[2]>=o+g.actualBoundingBoxRight&&p[1]<=l-g.actualBoundingBoxAscent&&p[3]>=l+g.actualBoundingBoxDescent,c(this,ph).set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-g.actualBoundingBoxLeft,o+g.actualBoundingBoxRight,l-g.actualBoundingBoxAscent,l+g.actualBoundingBoxDescent)}recordFullPageBBox(t){return c(this,ne)[0]=Math.max(0,c(this,Kt)[0]),c(this,ne)[1]=Math.max(0,c(this,Kt)[1]),c(this,ne)[2]=Math.min(c(this,Gl),c(this,Kt)[2]),c(this,ne)[3]=Math.min(c(this,Xl),c(this,Kt)[3]),this}getSimpleIndex(t){return c(this,si)[t]}recordDependencies(t,e){const n=c(this,oi),i=c(this,si),o=c(this,ri);for(const l of e)l in c(this,si)?n.add(i[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return c(this,Wl).has(e)&&c(this,oi).add(c(this,Wl).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[fu]),c(this,nr)){const n=yy(c(this,nr),t),{dependencies:i}=n;c(this,oi).forEach(i.add,i),c(this,Ts).forEach(i.add,i),c(this,$l).forEach(i.add,i),i.delete(t),n.isRenderingOperation=!0}if(c(this,Xr)===t){const n=A_(c(this,ne)[0]*256/c(this,Gl)),i=A_(c(this,ne)[1]*256/c(this,Xl)),o=E_(c(this,ne)[2]*256/c(this,Gl)),l=E_(c(this,ne)[3]*256/c(this,Xl));gy(c(this,Yr),t,n,i,o,l);for(const u of c(this,oi))u!==t&&gy(c(this,Yr),u,n,i,o,l);for(const u of c(this,Ts))u!==t&&gy(c(this,Yr),u,n,i,o,l);for(const u of c(this,$l))u!==t&&gy(c(this,Yr),u,n,i,o,l);e||(c(this,oi).clear(),b(this,Xr,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(c(this,oi));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return c(this,Xr)===t&&(b(this,Xr,-1),c(this,Kt)[0]=Math.max(c(this,Kt)[0],c(this,ne)[0]),c(this,Kt)[1]=Math.max(c(this,Kt)[1],c(this,ne)[1]),c(this,Kt)[2]=Math.min(c(this,Kt)[2],c(this,ne)[2]),c(this,Kt)[3]=Math.min(c(this,Kt)[3],c(this,ne)[3]),e||c(this,oi).clear()),this}_takePendingDependencies(){const t=c(this,oi);return b(this,oi,new Set),t}_extractOperation(t){const e=c(this,Bp).get(t);return c(this,Bp).delete(t),e}_pushPendingDependencies(t){for(const e of t)c(this,oi).add(e)}take(){return c(this,ph).clear(),new oV(c(this,In),c(this,Yr))}takeDebugMetadata(){return c(this,nr)}}si=new WeakMap,ri=new WeakMap,Wl=new WeakMap,Ts=new WeakMap,$l=new WeakMap,Gr=new WeakMap,Kt=new WeakMap,ne=new WeakMap,Xr=new WeakMap,oi=new WeakMap,Bp=new WeakMap,ph=new WeakMap,Gl=new WeakMap,Xl=new WeakMap,Yr=new WeakMap,In=new WeakMap,nr=new WeakMap,jp=new WeakSet,kx=function(t,e){const n=new ArrayBuffer(t*4);b(this,Yr,new Uint8ClampedArray(n)),b(this,In,new Uint32Array(n)),e&&e.length>0?(c(this,In).set(e),c(this,In).fill(Px,e.length)):c(this,In).fill(Px)};var oe,Me,_s,mh,gh;const CA=class CA{constructor(t,e,n){E(this,oe);E(this,Me);E(this,_s);E(this,mh,0);E(this,gh,0);if(t instanceof CA&&c(t,_s)===!!n)return t;b(this,oe,t),b(this,Me,e),b(this,_s,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return qe(this,gh)._++,c(this,oe).save(c(this,Me)),this}restore(t){return c(this,gh)>0&&(c(this,oe).restore(c(this,Me)),qe(this,gh)._--),this}recordOpenMarker(t){return qe(this,mh)._++,this}getOpenMarker(){return c(this,mh)>0?c(this,Me):c(this,oe).getOpenMarker()}recordCloseMarker(t){return qe(this,mh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return c(this,oe).pushBaseTransform(t),this}popBaseTransform(){return c(this,oe).popBaseTransform(),this}recordSimpleData(t,e){return c(this,oe).recordSimpleData(t,c(this,Me)),this}recordIncrementalData(t,e){return c(this,oe).recordIncrementalData(t,c(this,Me)),this}resetIncrementalData(t,e){return c(this,oe).resetIncrementalData(t,c(this,Me)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return c(this,oe).recordSimpleDataFromNamed(t,e,c(this,Me)),this}recordFutureForcedDependency(t,e){return c(this,oe).recordFutureForcedDependency(t,c(this,Me)),this}inheritSimpleDataAsFutureForcedDependencies(t){return c(this,oe).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,oe).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return c(this,_s)||c(this,oe).resetBBox(c(this,Me)),this}recordClipBox(t,e,n,i,o,l){return c(this,_s)||c(this,oe).recordClipBox(c(this,Me),e,n,i,o,l),this}recordBBox(t,e,n,i,o,l){return c(this,_s)||c(this,oe).recordBBox(c(this,Me),e,n,i,o,l),this}recordCharacterBBox(t,e,n,i,o,l,u){return c(this,_s)||c(this,oe).recordCharacterBBox(c(this,Me),e,n,i,o,l,u),this}recordFullPageBBox(t){return c(this,_s)||c(this,oe).recordFullPageBBox(c(this,Me)),this}getSimpleIndex(t){return c(this,oe).getSimpleIndex(t)}recordDependencies(t,e){return c(this,oe).recordDependencies(c(this,Me),e),this}recordNamedDependency(t,e){return c(this,oe).recordNamedDependency(c(this,Me),e),this}recordOperation(t){return c(this,oe).recordOperation(c(this,Me),!0),this}recordShowTextOperation(t){return c(this,oe).recordShowTextOperation(c(this,Me),!0),this}bboxToClipBoxDropOperation(t){return c(this,_s)||c(this,oe).bboxToClipBoxDropOperation(c(this,Me),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};oe=new WeakMap,Me=new WeakMap,_s=new WeakMap,mh=new WeakMap,gh=new WeakMap;let Sv=CA;const qi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Sn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Mx(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class vA{isModifyingCurrentTransform(){return!1}getPattern(){le("Abstract method `getPattern` called.")}}class lV extends vA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,i=this._p0,o=this._p1;if(e&&(i=i.slice(),o=o.slice(),st.applyTransform(i,e),st.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(i[0],i[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(e){const h=new Float32Array(2);st.singularValueDecompose2dScale(e,h),l*=h[0],u*=h[0]}n=t.createRadialGradient(i[0],i[1],l,o[0],o[1],u)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,i){let o;if(i===Sn.STROKE||i===Sn.FILL){if(this.isOriginBased()){let y=st.transform(n,e.baseTransform);this.matrix&&(y=st.transform(y,this.matrix));const w=.001,A=Math.hypot(y[0],y[1]),S=Math.hypot(y[2],y[3]),C=(y[0]*y[2]+y[1]*y[3])/(A*S);if(Math.abs(C)<w)if(this.isRadial()){if(Math.abs(A-S)<w)return this._createGradient(t,y)}else return this._createGradient(t,y)}const l=e.current.getClippedPathBoundingBox(i,Ee(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=st.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Mx(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);o.setTransform(g)}else Mx(t,this._bbox),o=this._createGradient(t);return o}}function Pb(s,t,e,n,i,o,l,u){const h=t.coords,f=t.colors,p=s.data,g=s.width*4;let y;h[e+1]>h[n+1]&&(y=e,e=n,n=y,y=o,o=l,l=y),h[n+1]>h[i+1]&&(y=n,n=i,i=y,y=l,l=u,u=y),h[e+1]>h[n+1]&&(y=e,e=n,n=y,y=o,o=l,l=y);const w=(h[e]+t.offsetX)*t.scaleX,A=(h[e+1]+t.offsetY)*t.scaleY,S=(h[n]+t.offsetX)*t.scaleX,C=(h[n+1]+t.offsetY)*t.scaleY,T=(h[i]+t.offsetX)*t.scaleX,M=(h[i+1]+t.offsetY)*t.scaleY;if(A>=M)return;const k=f[o],D=f[o+1],R=f[o+2],I=f[l],j=f[l+1],H=f[l+2],X=f[u],Q=f[u+1],Z=f[u+2],vt=Math.round(A),wt=Math.round(M);let gt,St,rt,tt,G,at,nt,B;for(let $=vt;$<=wt;$++){if($<C){const _t=$<A?0:(A-$)/(A-C);gt=w-(w-S)*_t,St=k-(k-I)*_t,rt=D-(D-j)*_t,tt=R-(R-H)*_t}else{let _t;$>M?_t=1:C===M?_t=0:_t=(C-$)/(C-M),gt=S-(S-T)*_t,St=I-(I-X)*_t,rt=j-(j-Q)*_t,tt=H-(H-Z)*_t}let ut;$<A?ut=0:$>M?ut=1:ut=(A-$)/(A-M),G=w-(w-T)*ut,at=k-(k-X)*ut,nt=D-(D-Q)*ut,B=R-(R-Z)*ut;const Ct=Math.round(Math.min(gt,G)),yt=Math.round(Math.max(gt,G));let Tt=g*$+Ct*4;for(let _t=Ct;_t<=yt;_t++)ut=(gt-_t)/(gt-G),ut<0?ut=0:ut>1&&(ut=1),p[Tt++]=St-(St-at)*ut|0,p[Tt++]=rt-(rt-nt)*ut|0,p[Tt++]=tt-(tt-B)*ut|0,p[Tt++]=255}}function cV(s,t,e){const n=t.coords,i=t.colors;let o,l;switch(t.type){case ex.LATTICE:const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let g=0;g<f;g++,p++)Pb(s,e,n[p],n[p+1],n[p+u],i[p],i[p+1],i[p+u]),Pb(s,e,n[p+u+1],n[p+1],n[p+u],i[p+u+1],i[p+1],i[p+u])}break;case ex.TRIANGLES:for(o=0,l=n.length;o<l;o+=3)Pb(s,e,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class uV extends vA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),w=f/g,A=p/y,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/w,scaleY:1/A},C=g+4,T=y+4,M=n.getCanvas("mesh",C,T),k=M.context,D=k.createImageData(g,y);if(e){const I=D.data;for(let j=0,H=I.length;j<H;j+=4)I[j]=e[0],I[j+1]=e[1],I[j+2]=e[2],I[j+3]=255}for(const I of this._figures)cV(D,I,S);return k.putImageData(D,2,2),{canvas:M.canvas,offsetX:u-2*w,offsetY:h-2*A,scaleX:w,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){Mx(t,this._bbox);const o=new Float32Array(2);if(i===Sn.SHADING)st.singularValueDecompose2dScale(Ee(t),o);else if(this.matrix){st.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;st.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=h}else st.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,i===Sn.SHADING?null:this._background,e.cachedCanvases);return i!==Sn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class hV extends vA{getPattern(){return"hotpink"}}function dV(s){switch(s[0]){case"RadialAxial":return new lV(s);case"Mesh":return new uV(s);case"Dummy":return new hV}throw new Error(`Unknown IR type: ${s[0]}`)}const C_={COLORED:1,UNCOLORED:2},Ov=class Ov{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){var at,nt;const{bbox:n,operatorList:i,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),o0("TilingType: "+l);const g=n[0],y=n[1],w=n[2],A=n[3],S=w-g,C=A-y,T=new Float32Array(2);st.singularValueDecompose2dScale(this.matrix,T);const[M,k]=T;st.singularValueDecompose2dScale(this.baseTransform,T);const D=M*T[0],R=k*T[1];let I=S,j=C,H=!1,X=!1;const Q=Math.ceil(f*D),Z=Math.ceil(p*R),vt=Math.ceil(S*D),wt=Math.ceil(C*R);Q>=vt?I=f:H=!0,Z>=wt?j=p:X=!0;const gt=this.getSizeAndScale(I,this.ctx.canvas.width,D),St=this.getSizeAndScale(j,this.ctx.canvas.height,R),rt=t.cachedCanvases.getCanvas("pattern",gt.size,St.size),tt=rt.context,G=h.createCanvasGraphics(tt,e);if(G.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(G,o,u),tt.translate(-gt.scale*g,-St.scale*y),G.transform(0,gt.scale,0,0,St.scale,0,0),tt.save(),(at=G.dependencyTracker)==null||at.save(),this.clipBbox(G,g,y,w,A),G.baseTransform=Ee(G.ctx),G.executeOperatorList(i),G.endDrawing(),(nt=G.dependencyTracker)==null||nt.restore(),tt.restore(),H||X){const B=rt.canvas;H&&(I=f),X&&(j=p);const $=this.getSizeAndScale(I,this.ctx.canvas.width,D),ut=this.getSizeAndScale(j,this.ctx.canvas.height,R),Ct=$.size,yt=ut.size,Tt=t.cachedCanvases.getCanvas("pattern-workaround",Ct,yt),_t=Tt.context,Ut=H?Math.floor(S/f):0,Jt=X?Math.floor(C/p):0;for(let Ge=0;Ge<=Ut;Ge++)for(let Vi=0;Vi<=Jt;Vi++)_t.drawImage(B,Ct*Ge,yt*Vi,Ct,yt,0,0,Ct,yt);return{canvas:Tt.canvas,scaleX:$.scale,scaleY:ut.scale,offsetX:g,offsetY:y}}return{canvas:rt.canvas,scaleX:gt.scale,scaleY:St.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,n){const i=Math.max(Ov.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=i?o=i:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,i,o){const l=i-e,u=o-n;t.ctx.rect(e,n,l,u),st.axialAlignedBoundingBox([e,n,i,o],Ee(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,o=t.current;switch(e){case C_.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;i.fillStyle=o.fillColor=l,i.strokeStyle=o.strokeColor=u;break;case C_.UNCOLORED:i.fillStyle=i.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new E3(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,o){let l=n;i!==Sn.SHADING&&(l=st.transform(l,e.baseTransform),this.matrix&&(l=st.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}};K(Ov,"MAX_PATTERN_SIZE",3e3);let Dx=Ov;function fV({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=en.isLittleEndian?4278190080:255,[h,f]=l?[o,u]:[u,o],p=n>>3,g=n&7,y=s.length;e=new Uint32Array(e.buffer);let w=0;for(let A=0;A<i;A++){for(const C=t+p;t<C;t++){const T=t<y?s[t]:255;e[w++]=T&128?f:h,e[w++]=T&64?f:h,e[w++]=T&32?f:h,e[w++]=T&16?f:h,e[w++]=T&8?f:h,e[w++]=T&4?f:h,e[w++]=T&2?f:h,e[w++]=T&1?f:h}if(g===0)continue;const S=t<y?s[t++]:255;for(let C=0;C<g;C++)e[w++]=S&1<<7-C?f:h}return{srcPos:t,destPos:w}}const T_=16,__=100,pV=15,P_=10,ci=16,kb=new DOMMatrix,Ni=new Float32Array(2),ku=new Float32Array([1/0,1/0,-1/0,-1/0]);function mV(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,i,o,l,u){t.transform(e,n,i,o,l,u),this.__originalTransform(e,n,i,o,l,u)},s.setTransform=function(e,n,i,o,l,u){t.setTransform(e,n,i,o,l,u),this.__originalSetTransform(e,n,i,o,l,u)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,o,l,u){t.bezierCurveTo(e,n,i,o,l,u),this.__originalBezierCurveTo(e,n,i,o,l,u)},s.rect=function(e,n,i,o){t.rect(e,n,i,o),this.__originalRect(e,n,i,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class gV{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function vy(s,t,e,n,i,o,l,u,h,f){const[p,g,y,w,A,S]=Ee(s);if(g===0&&y===0){const M=l*p+A,k=Math.round(M),D=u*w+S,R=Math.round(D),I=(l+h)*p+A,j=Math.abs(Math.round(I)-k)||1,H=(u+f)*w+S,X=Math.abs(Math.round(H)-R)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(w),k,R),s.drawImage(t,e,n,i,o,0,0,j,X),s.setTransform(p,g,y,w,A,S),[j,X]}if(p===0&&w===0){const M=u*y+A,k=Math.round(M),D=l*g+S,R=Math.round(D),I=(u+f)*y+A,j=Math.abs(Math.round(I)-k)||1,H=(l+h)*g+S,X=Math.abs(Math.round(H)-R)||1;return s.setTransform(0,Math.sign(g),Math.sign(y),0,k,R),s.drawImage(t,e,n,i,o,0,0,X,j),s.setTransform(p,g,y,w,A,S),[X,j]}s.drawImage(t,e,n,i,o,l,u,h,f);const C=Math.hypot(p,g),T=Math.hypot(y,w);return[C*h,T*f]}class k_{constructor(t,e,n){K(this,"alphaIsShape",!1);K(this,"fontSize",0);K(this,"fontSizeScale",1);K(this,"textMatrix",null);K(this,"textMatrixScale",1);K(this,"fontMatrix",tx);K(this,"leading",0);K(this,"x",0);K(this,"y",0);K(this,"lineX",0);K(this,"lineY",0);K(this,"charSpacing",0);K(this,"wordSpacing",0);K(this,"textHScale",1);K(this,"textRenderingMode",Ke.FILL);K(this,"textRise",0);K(this,"fillColor","#000000");K(this,"strokeColor","#000000");K(this,"patternFill",!1);K(this,"patternStroke",!1);K(this,"fillAlpha",1);K(this,"strokeAlpha",1);K(this,"lineWidth",1);K(this,"activeSMask",null);K(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ku.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Sn.FILL,e=null){const n=this.minMax.slice();if(t===Sn.STROKE){e||le("Stroke bounding box must include transform."),st.singularValueDecompose2dScale(e,Ni);const i=Ni[0]*this.lineWidth/2,o=Ni[1]*this.lineWidth/2;n[0]-=i,n[1]-=o,n[2]+=i,n[3]+=o}return n}updateClipFromPath(){const t=st.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ku,0)}getClippedPathBoundingBox(t=Sn.FILL,e=null){return st.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function M_(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%ci,o=(e-i)/ci,l=i===0?o:o+1,u=s.createImageData(n,ci);let h=0,f;const p=t.data,g=u.data;let y,w,A,S;if(t.kind===Cy.GRAYSCALE_1BPP){const C=p.byteLength,T=new Uint32Array(g.buffer,0,g.byteLength>>2),M=T.length,k=n+7>>3,D=4294967295,R=en.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<o?ci:i,f=0,w=0;w<A;w++){const I=C-h;let j=0;const H=I>k?n:I*8-7,X=H&-8;let Q=0,Z=0;for(;j<X;j+=8)Z=p[h++],T[f++]=Z&128?D:R,T[f++]=Z&64?D:R,T[f++]=Z&32?D:R,T[f++]=Z&16?D:R,T[f++]=Z&8?D:R,T[f++]=Z&4?D:R,T[f++]=Z&2?D:R,T[f++]=Z&1?D:R;for(;j<H;j++)Q===0&&(Z=p[h++],Q=128),T[f++]=Z&Q?D:R,Q>>=1}for(;f<M;)T[f++]=0;s.putImageData(u,0,y*ci)}}else if(t.kind===Cy.RGBA_32BPP){for(w=0,S=n*ci*4,y=0;y<o;y++)g.set(p.subarray(h,h+S)),h+=S,s.putImageData(u,0,w),w+=ci;y<l&&(S=n*i*4,g.set(p.subarray(h,h+S)),s.putImageData(u,0,w))}else if(t.kind===Cy.RGB_24BPP)for(A=ci,S=n*A,y=0;y<l;y++){for(y>=o&&(A=i,S=n*A),f=0,w=S;w--;)g[f++]=p[h++],g[f++]=p[h++],g[f++]=p[h++],g[f++]=255;s.putImageData(u,0,y*ci)}else throw new Error(`bad image kind: ${t.kind}`)}function D_(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%ci,o=(e-i)/ci,l=i===0?o:o+1,u=s.createImageData(n,ci);let h=0;const f=t.data,p=u.data;for(let g=0;g<l;g++){const y=g<o?ci:i;({srcPos:h}=fV({src:f,srcPos:h,dest:p,width:n,height:y,nonBlackColor:0})),s.putImageData(u,0,g*ci)}}function lf(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function wy(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function R_(s,t){if(t)return!0;st.singularValueDecompose2dScale(s,Ni);const e=Math.fround(yr.pixelRatio*Ha.PDF_TO_CSS_UNITS);return Ni[0]<=e&&Ni[1]<=e}const yV=["butt","round","square"],vV=["miter","round","bevel"],wV={},L_={};var Fs,Rx,Lx,Ix;const TA=class TA{constructor(t,e,n,i,o,{optionalContentConfig:l,markedContentStack:u=null},h,f,p){E(this,Fs);this.ctx=t,this.current=new k_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new gV(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){var i;return typeof e=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ee(this.compositeCtx))}this.ctx.save(),wy(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ee(this.ctx)}executeOperatorList(t,e,n,i,o){var T;const l=t.argsArray,u=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const p=f-h>P_&&typeof n=="function",g=p?Date.now()+pV:0;let y=0;const w=this.commonObjs,A=this.objs;let S,C;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,n),h;if(!o||o(h))if(S=u[h],C=l[h]??null,S!==qf.dependency)C===null?this[S](h):this[S](h,...C);else for(const M of C){(T=this.dependencyTracker)==null||T.recordNamedData(M,h);const k=M.startsWith("g_")?w:A;if(!k.has(M))return k.get(M,n),h}if(h++,h===f)return h;if(p&&++y>P_){if(Date.now()>g)return n(),h;y=0}}}endDrawing(){_(this,Fs,Rx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),_(this,Fs,Lx).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=i,f="prescale1",p,g;for(;o>2&&u>1||l>2&&h>1;){let y=u,w=h;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),l>2&&h>1&&(w=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/w),p=this.cachedCanvases.getCanvas(f,y,w),g=p.context,g.clearRect(0,0,y,w),g.drawImage(t,0,0,u,h,0,0,y,w),t=p.canvas,u=y,h=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){var Q,Z;const n=this.ctx,{width:i,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,h=Ee(n);let f,p,g,y;if((e.bitmap||e.data)&&e.count>1){const vt=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(vt),f||(f=new Map,this._cachedBitmapsMap.set(vt,f));const wt=f.get(p);if(wt&&!u){const gt=Math.round(Math.min(h[0],h[2])+h[4]),St=Math.round(Math.min(h[1],h[3])+h[5]);return(Q=this.dependencyTracker)==null||Q.recordDependencies(t,qi.transformAndFill),{canvas:wt,offsetX:gt,offsetY:St}}g=wt}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,o),D_(y.context,e));let w=st.transform(h,[1/i,0,0,-1/o,0,0]);w=st.transform(w,[1,0,0,1,0,-o]);const A=ku.slice();st.axialAlignedBoundingBox([0,0,i,o],w,A);const[S,C,T,M]=A,k=Math.round(T-S)||1,D=Math.round(M-C)||1,R=this.cachedCanvases.getCanvas("fillCanvas",k,D),I=R.context,j=S,H=C;I.translate(-j,-H),I.transform(...w),g||(g=this._scaleImage(y.canvas,zs(I)),g=g.img,f&&u&&f.set(p,g)),I.imageSmoothingEnabled=R_(Ee(I),e.interpolate),vy(I,g,0,0,g.width,g.height,0,0,i,o),I.globalCompositeOperation="source-in";const X=st.transform(zs(I),[1,0,0,1,-j,-H]);return I.fillStyle=u?l.getPattern(n,this,X,Sn.FILL,t):l,I.fillRect(0,0,i,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,R.canvas)),(Z=this.dependencyTracker)==null||Z.recordDependencies(t,qi.transformAndFill),{canvas:R.canvas,offsetX:Math.round(j),offsetY:Math.round(H)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=yV[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=vV[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var o;(o=this.dependencyTracker)==null||o.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,i,o,l,u;for(const[h,f]of e)switch(h){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(o=this.dependencyTracker)==null||o.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(l=this.dependencyTracker)==null||l.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),lf(this.suspendedCtx,l),mV(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const o=i[0],l=i[1],u=i[2]-o,h=i[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,o,l,u,h,f,p,g){let y=t.canvas,w=h-p,A=f-g;if(l)if(w<0||A<0||w+n>y.width||A+i>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,i),T=C.context;T.drawImage(y,-w,-A),T.globalCompositeOperation="destination-atop",T.fillStyle=l,T.fillRect(0,0,n,i),T.globalCompositeOperation="source-over",y=C.canvas,w=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(w,A,n,i),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(w,A,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,f,n,i),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(y,w,A,n,i,h,f,n,i),e.restore()}save(t){var n;this.inSMaskMode&&lf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,o,l,u){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[o]=n;if(!i){o||(o=n[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===qf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-l,i[2]+l,i[1]-l,i[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=Uk(o)),st.axialAlignedBoundingBox(i,Ee(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var l;const i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&(o!=null&&o.getPattern)){const u=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,zs(i),Sn.STROKE,t),u){const h=new Path2D;h.addPath(e,i.getTransform().invertSelf().multiplySelf(u)),e=h}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);(l=this.dependencyTracker)==null||l.recordDependencies(t,qi.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Sn.STROKE,Ee(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,p,g;const i=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const y=o.isModifyingCurrentTransform()?i.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),i.save(),i.fillStyle=o.getPattern(i,this,zs(i),Sn.FILL,t),y){const w=new Path2D;w.addPath(e,i.getTransform().invertSelf().multiplySelf(y)),e=w}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),(p=this.dependencyTracker)==null||p.recordDependencies(t,qi.fill),u&&(i.restore(),(g=this.dependencyTracker)==null||g.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,qi.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=wV}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=L_}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:f,path:p}of e)p&&i.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(f,-f));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var g,y;(g=this.dependencyTracker)==null||g.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),o=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=i.fontMatrix||tx,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&kt("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const l=i.loadedName||"sans-serif",u=((y=i.systemFontInfo)==null?void 0:y.css)||`"${l}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const f=i.italic?"italic":"normal";let p=n;n<T_?p=T_:n>__&&(p=__),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,i,o,l){var T,M,k,D;const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,y=p&Ke.FILL_STROKE_MASK,w=!!(p&Ke.ADD_TO_PATH_FLAG),A=h.patternFill&&!f.missingFile,S=h.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||w||A||S)&&!f.missingFile&&(C=f.getPathGenerator(this.commonObjs,e)),C&&(f.disableFontFace||A||S)){u.save(),u.translate(n,i),u.scale(g,-g),(T=this.dependencyTracker)==null||T.recordCharacterBBox(t,u,f);let R;if(y===Ke.FILL||y===Ke.FILL_STROKE)if(o){R=u.getTransform(),u.setTransform(...o);const I=_(this,Fs,Ix).call(this,C,R,o);u.fill(I)}else u.fill(C);if(y===Ke.STROKE||y===Ke.FILL_STROKE)if(l){R||(R=u.getTransform()),u.setTransform(...l);const{a:I,b:j,c:H,d:X}=R,Q=st.inverseTransform(l),Z=st.transform([I,j,H,X,0,0],Q);st.singularValueDecompose2dScale(Z,Ni),u.lineWidth*=Math.max(Ni[0],Ni[1])/g,u.stroke(_(this,Fs,Ix).call(this,C,R,l))}else u.lineWidth/=g,u.stroke(C);u.restore()}else(y===Ke.FILL||y===Ke.FILL_STROKE)&&(u.fillText(e,n,i),(M=this.dependencyTracker)==null||M.recordCharacterBBox(t,u,f,g,n,i,()=>u.measureText(e))),(y===Ke.STROKE||y===Ke.FILL_STROKE)&&(this.dependencyTracker&&((k=this.dependencyTracker)==null||k.recordCharacterBBox(t,u,f,g,n,i,()=>u.measureText(e)).recordDependencies(t,qi.stroke)),u.strokeText(e,n,i));w&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ee(u),x:n,y:i,fontSize:g,path:C}),(D=this.dependencyTracker)==null||D.recordCharacterBBox(t,u,f,g,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Mt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var Z,vt,wt,gt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,qi.showText).resetBBox(t),this.current.textRenderingMode&Ke.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(t,e),(Z=this.dependencyTracker)==null||Z.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){(vt=this.dependencyTracker)==null||vt.recordOperation(t);return}const l=this.ctx,u=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,g=n.textHScale*p,y=e.length,w=i.vertical,A=w?1:-1,S=i.defaultVMetrics,C=o*n.fontMatrix[0],T=n.textRenderingMode===Ke.FILL&&!i.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(g,-1):l.scale(g,1);let M,k;const D=n.textRenderingMode&Ke.FILL_STROKE_MASK,R=D===Ke.FILL||D===Ke.FILL_STROKE,I=D===Ke.STROKE||D===Ke.FILL_STROKE;if(R&&n.patternFill){l.save();const St=n.fillColor.getPattern(l,this,zs(l),Sn.FILL,t);M=Ee(l),l.restore(),l.fillStyle=St}if(I&&n.patternStroke){l.save();const St=n.strokeColor.getPattern(l,this,zs(l),Sn.STROKE,t);k=Ee(l),l.restore(),l.strokeStyle=St}let j=n.lineWidth;const H=n.textMatrixScale;if(H===0||j===0?I&&(j=this.getSinglePixelWidth()):j/=H,u!==1&&(l.scale(u,u),j/=u),l.lineWidth=j,i.isInvalidPDFjsFont){const St=[];let rt=0;for(const G of e)St.push(G.unicode),rt+=G.width;const tt=St.join("");if(l.fillText(tt,0,0),this.dependencyTracker!==null){const G=l.measureText(tt);this.dependencyTracker.recordBBox(t,this.ctx,-G.actualBoundingBoxLeft,G.actualBoundingBoxRight,-G.actualBoundingBoxAscent,G.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=rt*C*g,l.restore(),this.compose();return}let X=0,Q;for(Q=0;Q<y;++Q){const St=e[Q];if(typeof St=="number"){X+=A*St*o/1e3;continue}let rt=!1;const tt=(St.isSpace?f:0)+h,G=St.fontChar,at=St.accent;let nt,B,$=St.width;if(w){const yt=St.vmetric||S,Tt=-(St.vmetric?yt[1]:$*.5)*C,_t=yt[2]*C;$=yt?-yt[0]:$,nt=Tt/u,B=(X+_t)/u}else nt=X/u,B=0;let ut;if(i.remeasure&&$>0){ut=l.measureText(G);const yt=ut.width*1e3/o*u;if($<yt&&this.isFontSubpixelAAEnabled){const Tt=$/yt;rt=!0,l.save(),l.scale(Tt,1),nt/=Tt}else $!==yt&&(nt+=($-yt)/2e3*o/u)}if(this.contentVisible&&(St.isInFont||i.missingFile)){if(T&&!at)l.fillText(G,nt,B),(wt=this.dependencyTracker)==null||wt.recordCharacterBBox(t,l,ut?{bbox:null}:i,o/u,nt,B,()=>ut??l.measureText(G));else if(this.paintChar(t,G,nt,B,M,k),at){const yt=nt+o*at.offset.x/u,Tt=B-o*at.offset.y/u;this.paintChar(t,at.fontChar,yt,Tt,M,k)}}const Ct=w?$*C-tt*p:$*C+tt*p;X+=Ct,rt&&l.restore()}w?n.y-=X:n.x+=X*g,l.restore(),this.compose(),(gt=this.dependencyTracker)==null||gt.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,o=i.font,l=i.fontSize,u=i.fontDirection,h=o.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,g=i.textHScale*u,y=i.fontMatrix||tx,w=e.length,A=i.textRenderingMode===Ke.INVISIBLE;let S,C,T,M;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(g,u);const k=this.dependencyTracker;for(this.dependencyTracker=k?new Sv(k,t):null,S=0;S<w;++S){if(C=e[S],typeof C=="number"){M=h*C*l/1e3,this.ctx.translate(M,0),i.x+=M*g;continue}const D=(C.isSpace?p:0)+f,R=o.charProcOperatorList[C.operatorListId];R?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(R),this.restore()):kt(`Type3 character "${C.operatorListId}" is not available.`);const I=[C.width,0];st.applyTransform(I,y),T=I[0]*l+D,n.translate(T,0),i.x+=T*g}n.restore(),k&&(this.dependencyTracker=k)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,o,l,u){var f;const h=new Path2D;h.rect(i,o,l-i,u-o),this.ctx.clip(h),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,i,l,o,u).recordClipBox(t,this.ctx,i,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const i=this.baseTransform||Ee(this.ctx),o={createCanvasGraphics:(l,u)=>new TA(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Sv(this.dependencyTracker,u,!0):null)};n=new Dx(e,this.ctx,o,i)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=dV(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){var l;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,zs(n),Sn.SHADING,t);const o=zs(n);if(o){const{width:u,height:h}=n.canvas,f=ku.slice();st.axialAlignedBoundingBox([0,0,u,h],o,f);const[p,g,y,w]=f;this.ctx.fillRect(p,g,y-p,w-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(l=this.dependencyTracker)==null||l.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,qi.transform).recordDependencies(t,qi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){le("Should not call beginInlineImage")}beginImageData(){le("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var i;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ee(this.ctx),n)){st.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[o,l,u,h]=n,f=new Path2D;f.rect(o,l,u-o,h-l),this.ctx.clip(f),(i=this.dependencyTracker)==null||i.recordClipBox(t,this.ctx,o,u,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var k;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||o0("TODO: Support non-isolated groups."),e.knockout&&kt("Knockout groups not supported.");const i=Ee(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=ku.slice();st.axialAlignedBoundingBox(e.bbox,Ee(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=st.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,f,p),w=y.context;w.translate(-u,-h),w.transform(...i);let A=new Path2D;const[S,C,T,M]=e.bbox;if(A.rect(S,C,T-S,M-C),e.matrix){const D=new Path2D;D.addPath(A,new DOMMatrix(e.matrix)),A=D}w.clip(A),e.smask&&this.smaskStack.push({canvas:y.canvas,context:w,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),lf(n,w),this.ctx=w,(k=this.dependencyTracker)==null||k.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var o;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(o=this.dependencyTracker)==null||o.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Ee(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const u=ku.slice();st.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],l,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(t,e,n,i,o,l){if(_(this,Fs,Rx).call(this),wy(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,st.singularValueDecompose2dScale(Ee(this.ctx),Ni);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),g=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(Ni[0],0,0,-Ni[1],0,h*Ni[1]),wy(this.ctx)}else{wy(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,h),this.ctx.clip(f)}}this.current=new k_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),_(this,Fs,Lx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var u;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const i=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,o.offsetX,o.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,o=0,l,u){var g,y,w;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=Ee(h);h.transform(n,i,o,l,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),(g=this.dependencyTracker)==null||g.resetBBox(t);for(let A=0,S=u.length;A<S;A+=2){const C=st.transform(f,[n,i,o,l,u[A],u[A+1]]);h.drawImage(p.canvas,C[4],C[5]),(y=this.dependencyTracker)==null||y.recordBBox(t,this.ctx,C[4],C[4]+p.canvas.width,C[5],C[5]+p.canvas.height)}h.restore(),this.compose(),(w=this.dependencyTracker)==null||w.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var l,u,h;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,o=this.current.patternFill;(l=this.dependencyTracker)==null||l.resetBBox(t).recordDependencies(t,qi.transformAndFill);for(const f of e){const{data:p,width:g,height:y,transform:w}=f,A=this.cachedCanvases.getCanvas("maskCanvas",g,y),S=A.context;S.save();const C=this.getObject(t,p,f);D_(S,C),S.globalCompositeOperation="source-in",S.fillStyle=o?i.getPattern(S,this,zs(n),Sn.FILL,t):i,S.fillRect(0,0,g,y),S.restore(),n.save(),n.transform(...w),n.scale(1,-1),vy(n,A.canvas,0,0,g,y,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,n,0,g,0,y),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){kt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){kt("Dependent image isn't ready yet");return}const u=l.width,h=l.height,f=[];for(let p=0,g=o.length;p<g;p+=2)f.push({transform:[n,0,0,i,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,i),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,i=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/i);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,i).context;M_(g,e),u=this.applyTransferMapsToCanvas(g)}const h=this._scaleImage(u,zs(o));o.imageSmoothingEnabled=R_(Ee(o),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,o,0,n,-i,0).recordDependencies(t,qi.imageXObject).recordOperation(t),vy(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var l,u,h;if(!this.contentVisible)return;const i=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const f=e.width,p=e.height,y=this.cachedCanvases.getCanvas("inlineImage",f,p).context;M_(y,e),o=this.applyTransferMapsToCanvas(y)}(l=this.dependencyTracker)==null||l.resetBBox(t);for(const f of n)i.save(),i.transform(...f.transform),i.scale(1,-1),vy(i,o,f.x,f.y,f.w,f.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,i,0,1,-1,0),i.restore();(h=this.dependencyTracker)==null||h.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,qi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var l,u;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(i||(this.pendingClip===L_?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,(l=this.dependencyTracker)==null||l.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(u=this.dependencyTracker)==null||u.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ee(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:o}=this.ctx.getTransform();let l,u;if(n===0&&i===0){const h=Math.abs(e),f=Math.abs(o);if(h===f)if(t===0)l=u=1/h;else{const p=h*t;l=u=p<1?1/p:1}else if(t===0)l=1/h,u=1/f;else{const p=h*t,g=f*t;l=p<1?1/p:1,u=g<1?1/g:1}}else{const h=Math.abs(e*o-n*i),f=Math.hypot(e,n),p=Math.hypot(i,o);if(t===0)l=p/h,u=f/h;else{const g=t*h;l=p>g?p/g:1,u=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(i||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,l),kb.a=1/o,kb.d=1/l;const h=new Path2D;if(h.addPath(t,kb),u.length>0){const f=Math.max(o,l);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=i||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Fs=new WeakSet,Rx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Lx=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Ix=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let Iu=TA;for(const s in qf)Iu.prototype[s]!==void 0&&(Iu.prototype[qf[s]]=Iu.prototype[s]);var Vp,Up;class fr{static get workerPort(){return c(this,Vp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,Vp,t)}static get workerSrc(){return c(this,Up)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,Up,t)}}Vp=new WeakMap,Up=new WeakMap,E(fr,Vp,null),E(fr,Up,"");var yh,zp;class bV{constructor({parsedData:t,rawData:e}){E(this,yh);E(this,zp);b(this,yh,t),b(this,zp,e)}getRaw(){return c(this,zp)}get(t){return c(this,yh).get(t)??null}[Symbol.iterator](){return c(this,yh).entries()}}yh=new WeakMap,zp=new WeakMap;const wu=Symbol("INTERNAL");var Hp,Wp,$p,vh;class xV{constructor(t,{name:e,intent:n,usage:i,rbGroups:o}){E(this,Hp,!1);E(this,Wp,!1);E(this,$p,!1);E(this,vh,!0);b(this,Hp,!!(t&Ii.DISPLAY)),b(this,Wp,!!(t&Ii.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(c(this,$p))return c(this,vh);if(!c(this,vh))return!1;const{print:t,view:e}=this.usage;return c(this,Hp)?(e==null?void 0:e.viewState)!=="OFF":c(this,Wp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==wu&&le("Internal method `_setVisible` called."),b(this,$p,n),b(this,vh,e)}}Hp=new WeakMap,Wp=new WeakMap,$p=new WeakMap,vh=new WeakMap;var pa,ie,wh,bh,Gp,Nx;class SV{constructor(t,e=Ii.DISPLAY){E(this,Gp);E(this,pa,null);E(this,ie,new Map);E(this,wh,null);E(this,bh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,bh,t.order);for(const n of t.groups)c(this,ie).set(n.id,new xV(e,n));if(t.baseState==="OFF")for(const n of c(this,ie).values())n._setVisible(wu,!1);for(const n of t.on)c(this,ie).get(n)._setVisible(wu,!0);for(const n of t.off)c(this,ie).get(n)._setVisible(wu,!1);b(this,wh,this.getHash())}}isVisible(t){if(c(this,ie).size===0)return!0;if(!t)return o0("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,ie).has(t.id)?c(this,ie).get(t.id).visible:(kt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return _(this,Gp,Nx).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(c(this,ie).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!c(this,ie).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!c(this,ie).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(c(this,ie).get(e).visible)return!1}return!0}return kt(`Unknown optional content policy ${t.policy}.`),!0}return kt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const i=c(this,ie).get(t);if(!i){kt(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const l of i.rbGroups)for(const u of l)u!==t&&((o=c(this,ie).get(u))==null||o._setVisible(wu,!1,!0));i._setVisible(wu,!!e,!0),b(this,pa,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const o=c(this,ie).get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!o.visible,e);break}}b(this,pa,null)}get hasInitialVisibility(){return c(this,wh)===null||this.getHash()===c(this,wh)}getOrder(){return c(this,ie).size?c(this,bh)?c(this,bh).slice():[...c(this,ie).keys()]:null}getGroup(t){return c(this,ie).get(t)||null}getHash(){if(c(this,pa)!==null)return c(this,pa);const t=new wM;for(const[e,n]of c(this,ie))t.update(`${e}:${n.visible}`);return b(this,pa,t.hexdigest())}[Symbol.iterator](){return c(this,ie).entries()}}pa=new WeakMap,ie=new WeakMap,wh=new WeakMap,bh=new WeakMap,Gp=new WeakSet,Nx=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const o=t[i];let l;if(Array.isArray(o))l=_(this,Gp,Nx).call(this,o);else if(c(this,ie).has(o))l=c(this,ie).get(o).visible;else return kt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class AV{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Vt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});Vt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||o.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Vt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new EV(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new CV(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class EV{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=mA(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class CV{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function TV(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),o(p)}if(e=l(s),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(s),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const y=new TextDecoder(p,{fatal:!0}),w=Xm(g);g=y.decode(w),t=!1}catch{}}return g}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=i("utf-8",p),t&&(p=i("iso-8859-1",p))),p}function l(p){const g=[];let y;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=w.exec(p))!==null;){let[,S,C,T]=y;if(S=parseInt(S,10),S in g){if(S===0)break;continue}g[S]=[C,T]}const A=[];for(let S=0;S<g.length&&S in g;++S){let[C,T]=g[S];T=u(T),C&&(T=unescape(T),S===0&&(T=h(T))),A.push(T)}return A.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let y=0;y<g.length;++y){const w=g[y].indexOf('"');w!==-1&&(g[y]=g[y].slice(0,w),g.length=y+1),g[y]=g[y].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function h(p){const g=p.indexOf("'");if(g===-1)return p;const y=p.slice(0,g),A=p.slice(g+1).replace(/^[^']*'/,"");return i(y,A)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,y,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),i(y,A);try{A=atob(A)}catch{}return i(y,A)})}return""}function DM(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function l0(s){var t;return((t=URL.parse(s))==null?void 0:t.origin)??null}function RM({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function LM(s){const t=s.get("Content-Disposition");if(t){let e=TV(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(mA(e))return e}return null}function Jm(s,t){return new gv(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function IM(s){return s===200||s===206}function NM(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function FM(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(kt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class _V{constructor(t){K(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=DM(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PV(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new kV(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class PV{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,NM(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=l0(o.url),!IM(o.status))throw Jm(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:h}=RM({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=LM(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new za("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:FM(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class kV{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const l=i.url;fetch(l,NM(o,this._withCredentials,this._abortController)).then(u=>{const h=l0(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!IM(u.status))throw Jm(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:FM(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Mb=200,Db=206;function MV(s){const t=s.response;return typeof t!="string"?t:Xm(t).buffer}class DV{constructor({url:t,httpHeaders:e,withCredentials:n}){K(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=DM(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Db):i.expectedStatus=Mb,e.responseType="arraybuffer",Vt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const o=i.status||Mb;if(!(o===Mb&&n.expectedStatus===Db)&&o!==n.expectedStatus){n.onError(i.status);return}const u=MV(i);if(o===Db){const h=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(kt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class RV{constructor(t){this._source=t,this._manager=new DV(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Vt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new LV(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new IV(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class LV{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=l0(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=RM({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=LM(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Jm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class IV{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=l0((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Jm(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const NV=/^[a-z][a-z0-9\-+.]+:/i;function FV(s){if(NV.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class OV{constructor(t){this.source=t,this.url=FV(t.url),Vt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new BV(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new jV(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class BV{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Jm(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new za("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class jV{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const cf=Symbol("INITIAL_DATA");var wi,Xp,Fx;class OM{constructor(){E(this,Xp);E(this,wi,Object.create(null))}get(t,e=null){if(e){const i=_(this,Xp,Fx).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=c(this,wi)[t];if(!n||n.data===cf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=c(this,wi)[t];return!!e&&e.data!==cf}delete(t){const e=c(this,wi)[t];return!e||e.data===cf?!1:(delete c(this,wi)[t],!0)}resolve(t,e=null){const n=_(this,Xp,Fx).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in c(this,wi)){const{data:n}=c(this,wi)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}b(this,wi,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,wi)){const{data:e}=c(this,wi)[t];e!==cf&&(yield[t,e])}}}wi=new WeakMap,Xp=new WeakSet,Fx=function(t){var e;return(e=c(this,wi))[t]||(e[t]={...Promise.withResolvers(),data:cf})};const VV=1e5,I_=30;var B_,ma,bi,Yp,qp,Yl,qr,Kp,Qp,ql,Jp,xh,ga,Sh,Zp,Ah,Kl,tm,em,Eh,Ql,nm,Ch,Th,xo,BM,jM,Ox,Bi,Fy,Bx,VM,UM;const mn=class mn{constructor({textContentSource:t,container:e,viewport:n}){E(this,xo);E(this,ma,Promise.withResolvers());E(this,bi,null);E(this,Yp,!1);E(this,qp,!!((B_=globalThis.FontInspector)!=null&&B_.enabled));E(this,Yl,null);E(this,qr,null);E(this,Kp,0);E(this,Qp,0);E(this,ql,null);E(this,Jp,null);E(this,xh,0);E(this,ga,0);E(this,Sh,Object.create(null));E(this,Zp,[]);E(this,Ah,null);E(this,Kl,[]);E(this,tm,new WeakMap);E(this,em,null);var h;if(t instanceof ReadableStream)b(this,Ah,t);else if(typeof t=="object")b(this,Ah,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,bi,b(this,Jp,e)),b(this,ga,n.scale*yr.pixelRatio),b(this,xh,n.rotation),b(this,qr,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:o,pageX:l,pageY:u}=n.rawDims;b(this,em,[1,0,0,-1,-l,u+o]),b(this,Qp,i),b(this,Kp,o),_(h=mn,Bi,VM).call(h),e.style.setProperty("--min-font-size",c(mn,Ch)),Lc(e,n),c(this,ma).promise.finally(()=>{c(mn,Th).delete(this),b(this,qr,null),b(this,Sh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=en.platform;return Mt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,ql).read().then(({value:e,done:n})=>{if(n){c(this,ma).resolve();return}c(this,Yl)??b(this,Yl,e.lang),Object.assign(c(this,Sh),e.styles),_(this,xo,BM).call(this,e.items),t()},c(this,ma).reject)};return b(this,ql,c(this,Ah).getReader()),c(mn,Th).add(this),t(),c(this,ma).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*yr.pixelRatio,i=t.rotation;if(i!==c(this,xh)&&(e==null||e(),b(this,xh,i),Lc(c(this,Jp),{rotation:i})),n!==c(this,ga)){e==null||e(),b(this,ga,n);const l={div:null,properties:null,ctx:_(o=mn,Bi,Fy).call(o,c(this,Yl))};for(const u of c(this,Kl))l.properties=c(this,tm).get(u),l.div=u,_(this,xo,Ox).call(this,l)}}cancel(){var e;const t=new za("TextLayer task cancelled.");(e=c(this,ql))==null||e.cancel(t).catch(()=>{}),b(this,ql,null),c(this,ma).reject(t)}get textDivs(){return c(this,Kl)}get textContentItemsStr(){return c(this,Zp)}static cleanup(){if(!(c(this,Th).size>0)){c(this,Eh).clear();for(const{canvas:t}of c(this,Ql).values())t.remove();c(this,Ql).clear()}}};ma=new WeakMap,bi=new WeakMap,Yp=new WeakMap,qp=new WeakMap,Yl=new WeakMap,qr=new WeakMap,Kp=new WeakMap,Qp=new WeakMap,ql=new WeakMap,Jp=new WeakMap,xh=new WeakMap,ga=new WeakMap,Sh=new WeakMap,Zp=new WeakMap,Ah=new WeakMap,Kl=new WeakMap,tm=new WeakMap,em=new WeakMap,Eh=new WeakMap,Ql=new WeakMap,nm=new WeakMap,Ch=new WeakMap,Th=new WeakMap,xo=new WeakSet,BM=function(t){var i,o;if(c(this,Yp))return;(o=c(this,qr)).ctx??(o.ctx=_(i=mn,Bi,Fy).call(i,c(this,Yl)));const e=c(this,Kl),n=c(this,Zp);for(const l of t){if(e.length>VV){kt("Ignoring additional textDivs for performance reasons."),b(this,Yp,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const u=c(this,bi);b(this,bi,document.createElement("span")),c(this,bi).classList.add("markedContent"),l.id&&c(this,bi).setAttribute("id",`${l.id}`),u.append(c(this,bi))}else l.type==="endMarkedContent"&&b(this,bi,c(this,bi).parentNode);continue}n.push(l.str),_(this,xo,jM).call(this,l)}},jM=function(t){var A;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,Kl).push(e);const i=st.transform(c(this,em),t.transform);let o=Math.atan2(i[1],i[0]);const l=c(this,Sh)[t.fontName];l.vertical&&(o+=Math.PI/2);let u=c(this,qp)&&l.fontSubstitution||l.fontFamily;u=mn.fontFamilyMap.get(u)||u;const h=Math.hypot(i[2],i[3]),f=h*_(A=mn,Bi,UM).call(A,u,l,c(this,Yl));let p,g;o===0?(p=i[4],g=i[5]-f):(p=i[4]+f*Math.sin(o),g=i[5]-f*Math.cos(o));const y=e.style;y.left=`${(100*p/c(this,Qp)).toFixed(2)}%`,y.top=`${(100*g/c(this,Kp)).toFixed(2)}%`,y.setProperty("--font-height",`${h.toFixed(2)}px`),y.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,qp)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);S!==C&&Math.max(S,C)/Math.min(S,C)>1.5&&(w=!0)}if(w&&(n.canvasWidth=l.vertical?t.height:t.width),c(this,tm).set(e,n),c(this,qr).div=e,c(this,qr).properties=n,_(this,xo,Ox).call(this,c(this,qr)),n.hasText&&c(this,bi).append(e),n.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),c(this,bi).append(S)}},Ox=function(t){var l;const{div:e,properties:n,ctx:i}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:f}=n;_(l=mn,Bi,Bx).call(l,i,f*c(this,ga),u);const{width:p}=i.measureText(e.textContent);p>0&&o.setProperty("--scale-x",h*c(this,ga)/p)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},Bi=new WeakSet,Fy=function(t=null){let e=c(this,Ql).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Ql).set(t,e),c(this,nm).set(e,{size:0,family:""})}return e},Bx=function(t,e,n){const i=c(this,nm).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},VM=function(){if(c(this,Ch)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,Ch,t.getBoundingClientRect().height),t.remove()},UM=function(t,e,n){const i=c(this,Eh).get(t);if(i)return i;const o=_(this,Bi,Fy).call(this,n);o.canvas.width=o.canvas.height=I_,_(this,Bi,Bx).call(this,o,I_,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(en.platform.isFirefox&&kt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),c(this,Eh).set(t,f),f},E(mn,Bi),E(mn,Eh,new Map),E(mn,Ql,new Map),E(mn,nm,new WeakMap),E(mn,Ch,null),E(mn,Th,new Set);let Qf=mn;const UV=100;function zM(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new jx,{docId:e}=t,n=s.url?Y3(s.url):null,i=s.data?q3(s.data):null,o=s.httpHeaders||null,l=s.withCredentials===!0,u=s.password??null,h=s.range instanceof HM?s.range:null,f=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof Jf?s.worker:null;const g=s.verbosity,y=typeof s.docBaseUrl=="string"&&!a0(s.docBaseUrl)?s.docBaseUrl:null,w=py(s.cMapUrl),A=s.cMapPacked!==!1,S=s.CMapReaderFactory||($n?iV:b_),C=py(s.iccUrl),T=py(s.standardFontDataUrl),M=s.StandardFontDataFactory||($n?sV:x_),k=py(s.wasmUrl),D=s.WasmFactory||($n?rV:S_),R=s.stopAtErrors!==!0,I=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,j=s.isEvalSupported!==!1,H=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!$n,X=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!$n&&(en.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,Z=typeof s.disableFontFace=="boolean"?s.disableFontFace:$n,vt=s.fontExtraProperties===!0,wt=s.enableXfa===!0,gt=s.ownerDocument||globalThis.document,St=s.disableRange===!0,rt=s.disableStream===!0,tt=s.disableAutoFetch===!0,G=s.pdfBug===!0,at=s.CanvasFactory||($n?nV:Z3),nt=s.FilterFactory||($n?eV:tV),B=s.enableHWA===!0,$=s.useWasm!==!1,ut=h?h.length:s.length??NaN,Ct=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!$n&&!Z,yt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(S===b_&&M===x_&&D===S_&&w&&T&&k&&mf(w,document.baseURI)&&mf(T,document.baseURI)&&mf(k,document.baseURI)),Tt=null;x3(g);const _t={canvasFactory:new at({ownerDocument:gt,enableHWA:B}),filterFactory:new nt({docId:e,ownerDocument:gt}),cMapReaderFactory:yt?null:new S({baseUrl:w,isCompressed:A}),standardFontDataFactory:yt?null:new M({baseUrl:T}),wasmFactory:yt?null:new D({baseUrl:k})};p||(p=Jf.create({verbosity:g,port:fr.workerPort}),t._worker=p);const Ut={docId:e,apiVersion:"5.4.530",data:i,password:u,disableAutoFetch:tt,rangeChunkSize:f,length:ut,docBaseUrl:y,enableXfa:wt,evaluatorOptions:{maxImageSize:I,disableFontFace:Z,ignoreErrors:R,isEvalSupported:j,isOffscreenCanvasSupported:H,isImageDecoderSupported:X,canvasMaxAreaInBytes:Q,fontExtraProperties:vt,useSystemFonts:Ct,useWasm:$,useWorkerFetch:yt,cMapUrl:w,iccUrl:C,standardFontDataUrl:T,wasmUrl:k}},Jt={ownerDocument:gt,pdfBug:G,styleElement:Tt,loadingParams:{disableAutoFetch:tt,enableXfa:wt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ge=p.messageHandler.sendWithPromise("GetDocRequest",Ut,i?[i.buffer]:null);let Vi;if(h)Vi=new AV(h,{disableRange:St,disableStream:rt});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Vc=mf(n)?_V:$n?OV:RV;Vi=new Vc({url:n,length:ut,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:St,disableStream:rt})}return Ge.then(Vc=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ga=new Af(e,Vc,p.port),gd=new WV(Ga,t,Vi,Jt,_t,B);t._transport=gd,Ga.send("Ready",null)})}).catch(t._capability.reject),t}var Bv;const jv=class jv{constructor(){K(this,"_capability",Promise.withResolvers());K(this,"_transport",null);K(this,"_worker",null);K(this,"docId",`d${qe(jv,Bv)._++}`);K(this,"destroyed",!1);K(this,"onPassword",null);K(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Bv=new WeakMap,E(jv,Bv,0);let jx=jv;var Jl,im,sm,rm,om;class HM{constructor(t,e,n=!1,i=null){E(this,Jl,Promise.withResolvers());E(this,im,[]);E(this,sm,[]);E(this,rm,[]);E(this,om,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){c(this,om).push(t)}addProgressListener(t){c(this,rm).push(t)}addProgressiveReadListener(t){c(this,sm).push(t)}addProgressiveDoneListener(t){c(this,im).push(t)}onDataRange(t,e){for(const n of c(this,om))n(t,e)}onDataProgress(t,e){c(this,Jl).promise.then(()=>{for(const n of c(this,rm))n(t,e)})}onDataProgressiveRead(t){c(this,Jl).promise.then(()=>{for(const e of c(this,sm))e(t)})}onDataProgressiveDone(){c(this,Jl).promise.then(()=>{for(const t of c(this,im))t()})}transportReady(){c(this,Jl).resolve()}requestDataRange(t,e){le("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Jl=new WeakMap,im=new WeakMap,sm=new WeakMap,rm=new WeakMap,om=new WeakMap;class zV{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Kr,Zl,Pf;class HV{constructor(t,e,n,i=!1){E(this,Zl);E(this,Kr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new f_:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new OM,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new qm({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:o=Xo.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1,recordOperations:w=!1,operationsFilter:A=null}){var X,Q,Z;(X=this._stats)==null||X.time("Overall");const S=this._transport.getRenderingIntent(i,o,g,y),{renderingIntent:C,cacheKey:T}=S;b(this,Kr,!1),h||(h=this._transport.getOptionalContentConfig(C));let M=this._intentStates.get(T);M||(M=Object.create(null),this._intentStates.set(T,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const k=!!(C&Ii.PRINT);M.displayReadyCapability||(M.displayReadyCapability=Promise.withResolvers(),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Q=this._stats)==null||Q.time("Page Request"),this._pumpOperatorList(S));const D=!!(this._pdfBug&&((Z=globalThis.StepperManager)!=null&&Z.enabled)),R=!this.recordedBBoxes&&(w||D),I=vt=>{var wt,gt;if(M.renderTasks.delete(j),R){const St=(wt=j.gfx)==null?void 0:wt.dependencyTracker.take();St&&(j.stepper&&j.stepper.setOperatorBBoxes(St,j.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=St))}k&&b(this,Kr,!0),_(this,Zl,Pf).call(this),vt?(j.capability.reject(vt),this._abortOperatorList({intentState:M,reason:vt instanceof Error?vt:new Error(vt)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(gt=globalThis.Stats)!=null&&gt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new Vx({callback:I,params:{canvas:e,canvasContext:t,dependencyTracker:R?new aV(e,M.operatorList.length,D):null,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(M.renderTasks||(M.renderTasks=new Set)).add(j);const H=j.task;return Promise.all([M.displayReadyCapability.promise,h]).then(([vt,wt])=>{var gt;if(this.destroyed){I();return}if((gt=this._stats)==null||gt.time("Rendering"),!(wt.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:vt,optionalContentConfig:wt}),j.operatorListChanged()}).catch(I),H}getOperatorList({intent:t="display",annotationMode:e=Xo.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var f;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,i,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Kf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function o(){l.read().then(function({value:h,done:f}){if(f){n(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},i)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),b(this,Kr,!1),Promise.all(t)}cleanup(t=!1){b(this,Kr,!0);const e=_(this,Zl,Pf).call(this);return t&&e&&this._stats&&(this._stats=new f_),e}_startRenderPage(t,e){var i,o;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&_(this,Zl,Pf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:o,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:i},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:g,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();_(this,Zl,Pf).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof pA){let i=UV;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new za(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,o]of this._intentStates)if(o===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Kr=new WeakMap,Zl=new WeakSet,Pf=function(){if(!c(this,Kr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Kr,!1),!0};var ya,Ps,Qr,tc,Vv,ec,nc,Xn,Oy,WM,$M,kf,_h,By;const ve=class ve{constructor({name:t=null,port:e=null,verbosity:n=S3()}={}){E(this,Xn);E(this,ya,Promise.withResolvers());E(this,Ps,null);E(this,Qr,null);E(this,tc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(c(ve,nc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");c(ve,nc).set(e,this),_(this,Xn,WM).call(this,e)}else _(this,Xn,$M).call(this)}get promise(){return c(this,ya).promise}get port(){return c(this,Qr)}get messageHandler(){return c(this,Ps)}destroy(){var t,e;this.destroyed=!0,(t=c(this,tc))==null||t.terminate(),b(this,tc,null),c(ve,nc).delete(c(this,Qr)),b(this,Qr,null),(e=c(this,Ps))==null||e.destroy(),b(this,Ps,null)}static create(t){const e=c(this,nc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ve(t)}static get workerSrc(){if(fr.workerSrc)return fr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Mt(this,"_setupFakeWorkerGlobal",(async()=>c(this,_h,By)?c(this,_h,By):(await import(this.workerSrc)).WorkerMessageHandler)())}};ya=new WeakMap,Ps=new WeakMap,Qr=new WeakMap,tc=new WeakMap,Vv=new WeakMap,ec=new WeakMap,nc=new WeakMap,Xn=new WeakSet,Oy=function(){c(this,ya).resolve(),c(this,Ps).send("configure",{verbosity:this.verbosity})},WM=function(t){b(this,Qr,t),b(this,Ps,new Af("main","worker",t)),c(this,Ps).on("ready",()=>{}),_(this,Xn,Oy).call(this)},$M=function(){if(c(ve,ec)||c(ve,_h,By)){_(this,Xn,kf).call(this);return}let{workerSrc:t}=ve;try{ve._isSameOrigin(window.location,t)||(t=ve._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Af("main","worker",e),i=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?c(this,ya).reject(new Error("Worker was destroyed")):_(this,Xn,kf).call(this)},o=new AbortController;e.addEventListener("error",()=>{c(this,tc)||i()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){i();return}b(this,Ps,n),b(this,Qr,e),b(this,tc,e),_(this,Xn,Oy).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){i();return}try{l()}catch{_(this,Xn,kf).call(this)}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{o0("The worker has been disabled.")}_(this,Xn,kf).call(this)},kf=function(){c(ve,ec)||(kt("Setting up fake worker."),b(ve,ec,!0)),ve._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){c(this,ya).reject(new Error("Worker was destroyed"));return}const e=new J3;b(this,Qr,e);const n=`fake${qe(ve,Vv)._++}`,i=new Af(n+"_worker",n,e);t.setup(i,e),b(this,Ps,new Af(n,n+"_worker",e)),_(this,Xn,Oy).call(this)}).catch(t=>{c(this,ya).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},_h=new WeakSet,By=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},E(ve,_h),E(ve,Vv,0),E(ve,ec,!1),E(ve,nc,new WeakMap),$n&&(b(ve,ec,!0),fr.workerSrc||(fr.workerSrc="./pdf.worker.mjs")),ve._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},ve._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ve.fromPort=t=>{if(I3("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ve.create(t)};let Jf=ve;var Jr,ir,Ph,kh,Zr,ic,Mf;class WV{constructor(t,e,n,i,o,l){E(this,ic);E(this,Jr,new Map);E(this,ir,new Map);E(this,Ph,new Map);E(this,kh,new Map);E(this,Zr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new OM,this.fontLoader=new $3({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}get annotationStorage(){return Mt(this,"annotationStorage",new gA)}getRenderingIntent(t,e=Xo.ENABLE,n=null,i=!1,o=!1){let l=Ii.DISPLAY,u=Sx;switch(t){case"any":l=Ii.ANY;break;case"display":break;case"print":l=Ii.PRINT;break;default:kt(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Ii.PRINT&&n instanceof xM?n:this.annotationStorage;switch(e){case Xo.DISABLE:l+=Ii.ANNOTATIONS_DISABLE;break;case Xo.ENABLE:break;case Xo.ENABLE_FORMS:l+=Ii.ANNOTATIONS_FORMS;break;case Xo.ENABLE_STORAGE:l+=Ii.ANNOTATIONS_STORAGE,u=h.serializable;break;default:kt(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(l+=Ii.IS_EDITING),o&&(l+=Ii.OPLIST);const{ids:f,hash:p}=h.modifiedIds,g=[l,u.hash,p];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,Zr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of c(this,ir).values())t.push(i._destroy());c(this,ir).clear(),c(this,Ph).clear(),c(this,kh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,o;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Jr).clear(),this.filterFactory.destroy(),Qf.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new za("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Vt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){i.close();return}Vt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:o,contentLength:l}=this._fullReader;return(!i||!o)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=h=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,i)=>{Vt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){i.close();return}Vt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{o.cancel(l),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new zV(n,this))}),t.on("DocException",n=>{e._capability.reject(ei(n))}),t.on("PasswordRequest",n=>{b(this,Zr,Promise.withResolvers());try{if(!e.onPassword)throw ei(n);const i=o=>{o instanceof Error?c(this,Zr).reject(o):c(this,Zr).resolve({password:o})};e.onPassword(i,n.code)}catch(i){c(this,Zr).reject(i)}return c(this,Zr).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,ir).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in o){const y=o.error;kt(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const u=new Ax(o),h=this._params.pdfBug&&((l=globalThis.FontInspector)!=null&&l.enabled)?(y,w)=>globalThis.FontInspector.fontAdded(y,w):null,f=new G3(u,h,o.extra,o.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=o;Vt(p,"The imageRef must be defined.");for(const y of c(this,ir).values())for(const[,w]of y.objs)if((w==null?void 0:w.ref)===p)return w.dataLen?(this.commonObjs.resolve(n,structuredClone(w)),w.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new X3(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const g=new Ex(o);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,o,l])=>{var h;if(this.destroyed)return;const u=c(this,ir).get(i);if(!u.objs.has(n)){if(u._intentStates.size===0){(h=l==null?void 0:l.bitmap)==null||h.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&kt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=c(this,Ph).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&c(this,kh).set(o.refStr,t);const l=new HV(e,o,this,this._params.pdfBug);return c(this,ir).set(e,l),l});return c(this,Ph).set(e,i),i}getPageIndex(t){return Cx(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return _(this,ic,Mf).call(this,"GetFieldObjects")}hasJSActions(){return _(this,ic,Mf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return _(this,ic,Mf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return _(this,ic,Mf).call(this,"GetOptionalContentConfig").then(e=>new SV(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,Jr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var o,l;return{info:i[0],metadata:i[1]?new bV(i[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null,hasStructTree:i[2]}});return c(this,Jr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,ir).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,Jr).clear(),this.filterFactory.destroy(!0),Qf.cleanup()}}cachedPageNumber(t){if(!Cx(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,kh).get(e)??null}}Jr=new WeakMap,ir=new WeakMap,Ph=new WeakMap,kh=new WeakMap,Zr=new WeakMap,ic=new WeakSet,Mf=function(t,e=null){const n=c(this,Jr).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return c(this,Jr).set(t,i),i};var va;class $V{constructor(t){E(this,va,null);K(this,"onContinue",null);K(this,"onError",null);b(this,va,t)}get promise(){return c(this,va).capability.promise}cancel(t=0){c(this,va).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,va).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,va);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}va=new WeakMap;var wa,sc;const pl=class pl{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:y=null,enableHWA:w=!1,operationsFilter:A=null}){E(this,wa,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=g,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new $V(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var h,f;if(this.cancelled)return;if(this._canvas){if(c(pl,sc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(pl,sc).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Iu(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,i,o;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,wa)&&(window.cancelAnimationFrame(c(this,wa)),b(this,wa,null)),c(pl,sc).delete(this._canvas),t||(t=new pA(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(i=this.task).onError)==null||o.call(i,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,wa,window.requestAnimationFrame(()=>{b(this,wa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(pl,sc).delete(this._canvas),this.callback())))}};wa=new WeakMap,sc=new WeakMap,E(pl,sc,new WeakSet);let Vx=pl;const GV="5.4.530",XV="50cc4adac";var xi,rc,Mh,Ze,am,Dh,to,lm,ba,ks,cm,se,Ux,zx,Hx,ul,GM,Go;const ni=class ni{constructor({editor:t=null,uiManager:e=null}){E(this,se);E(this,xi,null);E(this,rc,null);E(this,Mh);E(this,Ze,null);E(this,am,!1);E(this,Dh,!1);E(this,to,null);E(this,lm);E(this,ba,null);E(this,ks,null);var n,i;t?(b(this,Dh,!1),b(this,to,t)):b(this,Dh,!0),b(this,ks,(t==null?void 0:t._uiManager)||e),b(this,lm,c(this,ks)._eventBus),b(this,Mh,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((i=c(this,ks))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),c(ni,cm)||b(ni,cm,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Mt(this,"_keyboardManager",new Qm([[["Escape","mac+Escape"],ni.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ni.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ni.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ni.prototype._moveToPrevious],[["Home","mac+Home"],ni.prototype._moveToBeginning],[["End","mac+End"],ni.prototype._moveToEnd]]))}renderButton(){const t=b(this,xi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",c(this,to)&&(t.ariaControls=`${c(this,to).id}_colorpicker_dropdown`);const e=c(this,ks)._signal;t.addEventListener("click",_(this,se,ul).bind(this),{signal:e}),t.addEventListener("keydown",_(this,se,Hx).bind(this),{signal:e});const n=b(this,rc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,Mh),t.append(n),t}renderMainDropdown(){const t=b(this,Ze,_(this,se,Ux).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===c(this,xi)){_(this,se,ul).call(this,t);return}const e=t.target.getAttribute("data-color");e&&_(this,se,zx).call(this,e,t)}_moveToNext(t){var e,n;if(!c(this,se,Go)){_(this,se,ul).call(this,t);return}if(t.target===c(this,xi)){(e=c(this,Ze).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=c(this,Ze))==null?void 0:e.firstElementChild)||t.target===c(this,xi)){c(this,se,Go)&&this._hideDropdownFromKeyboard();return}c(this,se,Go)||_(this,se,ul).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!c(this,se,Go)){_(this,se,ul).call(this,t);return}(e=c(this,Ze).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,se,Go)){_(this,se,ul).call(this,t);return}(e=c(this,Ze).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,Ze))==null||t.classList.add("hidden"),c(this,xi).ariaExpanded="false",(e=c(this,ba))==null||e.abort(),b(this,ba,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,Dh)){if(!c(this,se,Go)){(t=c(this,to))==null||t.unselect();return}this.hideDropdown(),c(this,xi).focus({preventScroll:!0,focusVisible:c(this,am)})}}updateColor(t){if(c(this,rc)&&(c(this,rc).style.backgroundColor=t),!c(this,Ze))return;const e=c(this,ks).highlightColors.values();for(const n of c(this,Ze).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=c(this,xi))==null||t.remove(),b(this,xi,null),b(this,rc,null),(e=c(this,Ze))==null||e.remove(),b(this,Ze,null)}};xi=new WeakMap,rc=new WeakMap,Mh=new WeakMap,Ze=new WeakMap,am=new WeakMap,Dh=new WeakMap,to=new WeakMap,lm=new WeakMap,ba=new WeakMap,ks=new WeakMap,cm=new WeakMap,se=new WeakSet,Ux=function(){const t=document.createElement("div"),e=c(this,ks)._signal;t.addEventListener("contextmenu",hs,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,to)&&(t.id=`${c(this,to).id}_colorpicker_dropdown`);for(const[n,i]of c(this,ks).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",c(ni,cm)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=i,o.ariaSelected=i===c(this,Mh),o.addEventListener("click",_(this,se,zx).bind(this,i),{signal:e}),t.append(o)}return t.addEventListener("keydown",_(this,se,Hx).bind(this),{signal:e}),t},zx=function(t,e){e.stopPropagation(),c(this,lm).dispatch("switchannotationeditorparams",{source:this,type:jt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},Hx=function(t){ni._keyboardManager.exec(this,t)},ul=function(t){if(c(this,se,Go)){this.hideDropdown();return}if(b(this,am,t.detail===0),c(this,ba)||(b(this,ba,new AbortController),window.addEventListener("pointerdown",_(this,se,GM).bind(this),{signal:c(this,ks).combinedSignal(c(this,ba))})),c(this,xi).ariaExpanded="true",c(this,Ze)){c(this,Ze).classList.remove("hidden");return}const e=b(this,Ze,_(this,se,Ux).call(this));c(this,xi).append(e)},GM=function(t){var e;(e=c(this,Ze))!=null&&e.contains(t.target)||this.hideDropdown()},Go=function(){return c(this,Ze)&&!c(this,Ze).classList.contains("hidden")},E(ni,cm,null);let Av=ni;var sr,um,Rh,hm;const ml=class ml{constructor(t){E(this,sr,null);E(this,um,null);E(this,Rh,null);b(this,um,t),b(this,Rh,t._uiManager),c(ml,hm)||b(ml,hm,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,sr))return c(this,sr);const{editorType:t,colorType:e,color:n}=c(this,um),i=b(this,sr,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",c(ml,hm)[t]),i.addEventListener("input",()=>{c(this,Rh).updateParams(e,i.value)},{signal:c(this,Rh)._signal}),i}update(t){c(this,sr)&&(c(this,sr).value=t)}destroy(){var t;(t=c(this,sr))==null||t.remove(),b(this,sr,null)}hideDropdown(){}};sr=new WeakMap,um=new WeakMap,Rh=new WeakMap,hm=new WeakMap,E(ml,hm,null);let Ev=ml;function N_(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function uf(s){return Math.max(0,Math.min(255,255*s))}class F_{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=uf(t),[t,t,t]}static G_HTML([t]){const e=N_(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(uf)}static RGB_HTML(t){return`#${t.map(N_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[uf(1-Math.min(1,t+i)),uf(1-Math.min(1,n+i)),uf(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,o=1-e,l=1-n,u=Math.min(i,o,l);return["CMYK",i,o,l,u]}}class YV{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){le("Abstract method `_createSVG` called.")}}class Cv extends YV{_createSVG(t){return document.createElementNS(_r,t)}}const qV=9,Nc=new WeakSet,KV=new Date().getTimezoneOffset()*60*1e3;class Rb{static create(t){switch(t.data.annotationType){case He.LINK:return new wA(t);case He.TEXT:return new JV(t);case He.WIDGET:switch(t.data.fieldType){case"Tx":return new ZV(t);case"Btn":return t.data.radioButton?new qM(t):t.data.checkBox?new eU(t):new nU(t);case"Ch":return new iU(t);case"Sig":return new tU(t)}return new jc(t);case He.POPUP:return new $x(t);case He.FREETEXT:return new tD(t);case He.LINE:return new rU(t);case He.SQUARE:return new oU(t);case He.CIRCLE:return new aU(t);case He.POLYLINE:return new eD(t);case He.CARET:return new cU(t);case He.INK:return new bA(t);case He.POLYGON:return new lU(t);case He.HIGHLIGHT:return new nD(t);case He.UNDERLINE:return new uU(t);case He.SQUIGGLY:return new hU(t);case He.STRIKEOUT:return new dU(t);case He.STAMP:return new iD(t);case He.FILEATTACHMENT:return new fU(t);default:return new _e(t)}}}var oc,Lh,os,dm,Wx;const _A=class _A{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){E(this,dm);E(this,oc,null);E(this,Lh,!1);E(this,os,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return _A._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const t=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let o=-1/0,l=-1/0;if((e==null?void 0:e.length)>=8){for(let h=0;h<e.length;h+=8)e[h+1]>l?(l=e[h+1],o=e[h+2]):e[h+1]===l&&(o=Math.max(o,e[h+2]));return[o,l]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let f=0,p=h.length;f<p;f+=2)h[f+1]>l?(l=h[f+1],o=h[f]):h[f+1]===l&&(o=Math.max(o,h[f]));if(o!==1/0)return[o,l]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/i,t}get commentText(){var e,n,i;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${Yf}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((i=t.contentsObj)==null?void 0:i.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Yf}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=c(this,os))==null?void 0:t.popup)||this.popup)==null||e.remove(),b(this,os,this.popup=null)}updateEdited(t){var o;if(!this.container)return;t.rect&&(c(this,oc)||b(this,oc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&_(this,dm,Wx).call(this,e);let i=((o=c(this,os))==null?void 0:o.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=c(this,os).popup),i&&(i.updateEdited(t),n!=null&&n.deleted&&(i.remove(),b(this,os,null),this.popup=null))}resetEdited(){var t;c(this,oc)&&(_(this,dm,Wx).call(this,c(this,oc).rect),(t=c(this,os))==null||t.popup.resetEdited(),b(this,oc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof jc)&&!(this instanceof wA)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof $x){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(S>0||C>0){const M=`calc(${S}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;l.borderRadius=M}else if(this instanceof qM){const M=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=M}switch(e.borderStyle.style){case pu.SOLID:l.borderStyle="solid";break;case pu.DASHED:l.borderStyle="dashed";break;case pu.BEVELED:kt("Unimplemented border style: beveled");break;case pu.INSET:kt("Unimplemented border style: inset");break;case pu.UNDERLINE:l.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(b(this,Lh,!0),l.borderColor=st.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):l.borderWidth=0}const f=st.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:g,pageX:y,pageY:w}=i.rawDims;l.left=`${100*(f[0]-y)/p}%`,l.top=`${100*(f[1]-w)/g}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(l.width=`${100*u/p}%`,l.height=`${100*h/g}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const o=i.detail[e],l=o[0],u=o.slice(1);i.target.style[n]=F_[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:F_[`${l}_rgb`](u)})};return Mt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const o=t[i]||n[i];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,o]of Object.entries(e)){const l=n[i];if(l){const u={detail:{[i]:o},target:t};l(u),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,T,M]=t.subarray(2,6);if(i===S&&o===C&&e===T&&n===M)return}const{style:l}=this.container;let u;if(c(this,Lh)){const{borderColor:S,borderWidth:C}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const h=i-e,f=o-n,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const y=p.createElement("defs");g.append(y);const w=p.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),y.append(w);for(let S=2,C=t.length;S<C;S+=8){const T=t[S],M=t[S+1],k=t[S+2],D=t[S+3],R=p.createElement("rect"),I=(k-e)/h,j=(o-M)/f,H=(T-k)/h,X=(M-D)/f;R.setAttribute("x",I),R.setAttribute("y",j),R.setAttribute("width",H),R.setAttribute("height",X),w.append(R),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${j}" width="${H}" height="${X}"/>`)}c(this,Lh)&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate),b(this,os,new $x({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,os)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,os)}render(){le("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:o,id:l,exportValues:u}of i){if(o===-1||l===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Nc.has(f)){kt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const i of document.getElementsByName(t)){const{exportValue:o}=i,l=i.getAttribute("data-element-id");l!==e&&Nc.has(i)&&n.push({id:l,exportValue:o,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};oc=new WeakMap,Lh=new WeakMap,os=new WeakMap,dm=new WeakSet,Wx=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+h)/l}%`,i===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(i)};let _e=_A;class QV extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Fi,hl,XM,YM;class wA extends _e{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});E(this,Fi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),o=!0):e.attachment?(_(this,Fi,XM).call(this,i,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(_(this,Fi,YM).call(this,i,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),o=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&_(this,Fi,hl).call(this),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),_(this,Fi,hl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=i.get(o);l&&(e[l]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),_(this,Fi,hl).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),_(this,Fi,hl).call(this),!this._fieldObjects){kt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var g;i==null||i();const{fields:o,refs:l,include:u}=n,h=[];if(o.length!==0||l.length!==0){const y=new Set(l);for(const w of o){const A=this._fieldObjects[w]||[];for(const{id:S}of A)y.add(S)}for(const w of Object.values(this._fieldObjects))for(const A of w)y.has(A.id)===u&&h.push(A)}else for(const y of Object.values(this._fieldObjects))h.push(...y);const f=this.annotationStorage,p=[];for(const y of h){const{id:w}=y;switch(p.push(w),y.type){case"text":{const S=y.defaultValue||"";f.setValue(w,{value:S});break}case"checkbox":case"radiobutton":{const S=y.defaultValue===y.exportValues;f.setValue(w,{value:S});break}case"combobox":case"listbox":{const S=y.defaultValue||"";f.setValue(w,{value:S});break}default:continue}const A=document.querySelector(`[data-element-id="${w}"]`);if(A){if(!Nc.has(A)){kt(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}Fi=new WeakSet,hl=function(){this.container.setAttribute("data-internal-link","")},XM=function(e,n,i="",o=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,o),!1},_(this,Fi,hl).call(this)},YM=function(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),_(this,Fi,hl).call(this)};class JV extends _e{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class jc extends _e{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return en.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,o){n.includes("mouse")?t.addEventListener(n,l=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var u;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(l)}}))})}_setEventListeners(t,e,n,i){var o,l,u;for(const[h,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,f,i),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":st.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||qV,o=t.style;let l;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(Eb*i))||1,g=f/p;l=Math.min(i,h(g/Eb))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(i,h(f/Eb))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=st.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class ZV extends jc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[i]:n})}render(){var i,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let u=l.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&u.length>h&&(u=u.slice(0,h));let f=l.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const p={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Nc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:y,timeStep:w}=this.data,A=!!y&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",C=>{t.setValue(e,{value:C.target.value}),this.setPropertyOnSiblings(n,"value",C.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",C=>{const T=this.data.defaultFieldValue??"";n.value=p.userValue=T,p.formattedValue=null});let S=C=>{const{formattedValue:T}=p;T!=null&&(C.target.value=T),C.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",T=>{var k;if(p.focused)return;const{target:M}=T;if(A&&(M.type=y,w&&(M.step=w)),p.userValue){const D=p.userValue;if(A)if(y==="time"){const R=new Date(D),I=[R.getHours(),R.getMinutes(),R.getSeconds()];M.value=I.map(j=>j.toString().padStart(2,"0")).join(":")}else M.value=new Date(D-KV).toISOString().split(y==="date"?"T":".",1)[0];else M.value=D}p.lastCommittedValue=M.value,p.commitKey=1,(k=this.data.actions)!=null&&k.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",T=>{this.showElementAndHideCanvas(T.target);const M={value(k){p.userValue=k.detail.value??"",A||t.setValue(e,{value:p.userValue.toString()}),k.target.value=p.userValue},formattedValue(k){const{formattedValue:D}=k.detail;p.formattedValue=D,D!=null&&k.target!==document.activeElement&&(k.target.value=D);const R={formattedValue:D};A&&(R.value=D),t.setValue(e,R)},selRange(k){k.target.setSelectionRange(...k.detail.selRange)},charLimit:k=>{var j;const{charLimit:D}=k.detail,{target:R}=k;if(D===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",D);let I=p.userValue;!I||I.length<=D||(I=I.slice(0,D),R.value=p.userValue=I,t.setValue(e,{value:I}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(M,T)}),n.addEventListener("keydown",T=>{var D;p.commitKey=1;let M=-1;if(T.key==="Escape"?M=0:T.key==="Enter"&&!this.data.multiLine?M=2:T.key==="Tab"&&(p.commitKey=3),M===-1)return;const{value:k}=T.target;p.lastCommittedValue!==k&&(p.lastCommittedValue=k,p.userValue=k,(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,willCommit:!0,commitKey:M,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}}))});const C=S;S=null,n.addEventListener("blur",T=>{var D,R;if(!p.focused||!T.relatedTarget)return;(D=this.data.actions)!=null&&D.Blur||(p.focused=!1);const{target:M}=T;let{value:k}=M;if(A){if(k&&y==="time"){const I=k.split(":").map(j=>parseInt(j,10));k=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),M.step=""}else k.includes("T")||(k=`${k}T00:00`),k=new Date(k).valueOf();M.type="text"}p.userValue=k,p.lastCommittedValue!==k&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,willCommit:!0,commitKey:p.commitKey,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}})),C(T)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",T=>{var X;p.lastCommittedValue=null;const{data:M,target:k}=T,{value:D,selectionStart:R,selectionEnd:I}=k;let j=R,H=I;switch(T.inputType){case"deleteWordBackward":{const Q=D.substring(0,R).match(/\w*[^\w]*$/);Q&&(j-=Q[0].length);break}case"deleteWordForward":{const Q=D.substring(R).match(/^[^\w]*\w*/);Q&&(H+=Q[0].length);break}case"deleteContentBackward":R===I&&(j-=1);break;case"deleteContentForward":R===I&&(H+=1);break}T.preventDefault(),(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,change:M||"",willCommit:!1,selStart:j,selEnd:H}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],T=>T.target.value)}if(S&&n.addEventListener("blur",S),this.data.comb){const T=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${T}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class tU extends jc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class eU extends jc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Nc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class qM extends jc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Nc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const y=p&&g.id===n;g.domElement&&(g.domElement.checked=y),t.setValue(g.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class nU extends wA{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class iU extends jc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Nc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const y of i.options)y.selected=y.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,n.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),o=!1),i.append(g)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),i.prepend(p),l=()=>{p.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const u=p=>{const g=p?"value":"textContent",{options:y,multiple:w}=i;return w?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[g]):y.selectedIndex===-1?null:y[y.selectedIndex][g]};let h=u(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",p=>{const g={value(y){l==null||l();const w=y.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const S of i.options)S.selected=A.has(S.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(y){i.multiple=!0},remove(y){const w=i.options,A=y.detail.remove;w[A].selected=!1,i.remove(A),w.length>0&&Array.prototype.findIndex.call(w,C=>C.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:u(!0),items:f(y)}),h=u(!1)},clear(y){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(y){const{index:w,displayValue:A,exportValue:S}=y.detail.insert,C=i.children[w],T=document.createElement("option");T.textContent=A,T.value=S,C?C.before(T):i.append(T),t.setValue(e,{value:u(!0),items:f(y)}),h=u(!1)},items(y){const{items:w}=y.detail;for(;i.length!==0;)i.remove(0);for(const A of w){const{displayValue:S,exportValue:C}=A,T=document.createElement("option");T.textContent=S,T.value=C,i.append(T)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(y)}),h=u(!1)},indices(y){const w=new Set(y.detail.indices);for(const A of y.target.options)A.selected=w.has(A.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(g,p)}),i.addEventListener("input",p=>{var w;const g=u(!0),y=u(!1);t.setValue(e,{value:g}),p.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):i.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var fm,Gx;class $x extends _e{constructor(e){const{data:n,elements:i,parent:o}=e,l=!!o._commentManager;super(e,{isRenderable:!l&&_e._hasPopupData(n)});E(this,fm);if(this.elements=i,l&&_e._hasPopupData(n)){const u=this.popup=_(this,fm,Gx).call(this);for(const h of i)h.popup=u}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=_(this,fm,Gx).call(this),i=[];for(const o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",i.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(o=>`${Pu}${o}`).join(",")),this.container}}fm=new WeakSet,Gx=function(){return new sU({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Si,xa,Uv,zv,Ih,Nh,De,rr,Sa,ac,Fh,Oh,or,Ai,eo,no,Re,io,Aa,pm,so,Bh,lc,Ea,an,Ca,Nt,jy,Xx,Yx,qx,Vy,Kx,KM,QM,JM,ZM,Uy,zy,Qx;class sU{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:f,parentRect:p,open:g,commentManager:y=null}){E(this,Nt);E(this,Si,null);E(this,xa,_(this,Nt,JM).bind(this));E(this,Uv,_(this,Nt,Qx).bind(this));E(this,zv,_(this,Nt,zy).bind(this));E(this,Ih,_(this,Nt,Uy).bind(this));E(this,Nh,null);E(this,De,null);E(this,rr,null);E(this,Sa,null);E(this,ac,null);E(this,Fh,null);E(this,Oh,null);E(this,or,!1);E(this,Ai,null);E(this,eo,null);E(this,no,null);E(this,Re,null);E(this,io,null);E(this,Aa,null);E(this,pm,null);E(this,so,null);E(this,Bh,null);E(this,lc,null);E(this,Ea,!1);E(this,an,null);E(this,Ca,null);b(this,De,t),b(this,Bh,i),b(this,rr,l),b(this,so,u),b(this,Fh,h),b(this,Nh,e),b(this,pm,f),b(this,Oh,p),b(this,ac,n),b(this,Si,y),b(this,an,n[0]),b(this,Sa,yv.toDateObject(o)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup()),y||(_(this,Nt,jy).call(this),c(this,De).hidden=!0,g&&_(this,Nt,Uy).call(this))}renderCommentButton(){if(c(this,Re)){c(this,Re).parentNode||c(this,an).container.after(c(this,Re));return}if(c(this,io)||_(this,Nt,Xx).call(this),!c(this,io))return;const{signal:t}=b(this,eo,new AbortController),e=c(this,an).hasOwnCommentButton,n=()=>{c(this,Si).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{c(this,Si).toggleCommentPopup(this,!1,!0,!e)},o=()=>{c(this,Si).toggleCommentPopup(this,!1,!1)};if(e){b(this,Re,c(this,an).container);for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",c(this,xa),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",i,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=b(this,Re,document.createElement("button"));l.className="annotationCommentButton";const u=c(this,an).container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),_(this,Nt,qx).call(this),_(this,Nt,Yx).call(this),l.addEventListener("keydown",c(this,xa),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",i,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}get commentButtonColor(){const{color:t,opacity:e}=c(this,an).commentData;return t?c(this,Fh)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=c(this,Re))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:o}=c(this,an).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:o}}get elementBeforePopup(){return c(this,Re)}get comment(){return c(this,Ca)||b(this,Ca,c(this,an).commentText),c(this,Ca)}set comment(t){t!==this.comment&&(c(this,an).commentText=b(this,Ca,t))}focus(){var t;(t=c(this,an).container)==null||t.focus()}get parentBoundingClientRect(){return c(this,an).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){c(this,Re)&&(c(this,Re).classList.toggle("selected",t),c(this,Re).ariaExpanded=e)}setSelectedCommentButton(t){c(this,Re).classList.toggle("selected",t)}get commentPopupPosition(){if(c(this,Aa))return c(this,Aa);const{x:t,y:e,height:n}=c(this,Re).getBoundingClientRect(),{x:i,y:o,width:l,height:u}=c(this,an).layer.getBoundingClientRect();return[(t-i)/l,(e+n-o)/u]}set commentPopupPosition(t){b(this,Aa,t)}hasDefaultPopupPosition(){return c(this,Aa)===null}get commentButtonPosition(){return c(this,io)}get commentButtonWidth(){return c(this,Re).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=c(this,Aa)||this.commentButtonPosition.map(f=>f/100),i=this.parentBoundingClientRect,{x:o,y:l,width:u,height:h}=i;c(this,Si).showDialog(null,this,o+e*u,l+n*h,{...t,parentDimensions:i})}render(){var n,i;if(c(this,Ai))return;const t=b(this,Ai,document.createElement("div"));if(t.className="popup",c(this,Nh)){const o=t.style.outlineColor=st.makeHexColor(...c(this,Nh));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=c(this,Bh))!=null&&n.str){const o=document.createElement("span");o.className="title",e.append(o),{dir:o.dir,str:o.textContent}=c(this,Bh)}if(t.append(e),c(this,Sa)){const o=document.createElement("time");o.className="popupDate",o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Sa).valueOf()})),o.dateTime=c(this,Sa).toISOString(),e.append(o)}Vk({html:c(this,Nt,Vy)||c(this,rr).str,dir:(i=c(this,rr))==null?void 0:i.dir,className:"popupContent"},t),c(this,De).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var i;if(c(this,Si)){n?(this.remove(),b(this,Ca,null)):e&&(e.deleted?this.remove():(_(this,Nt,qx).call(this),b(this,Ca,e.text))),t&&(b(this,io,null),_(this,Nt,Xx).call(this),_(this,Nt,Yx).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}_(this,Nt,jy).call(this),c(this,lc)||b(this,lc,{contentsObj:c(this,rr),richText:c(this,so)}),t&&b(this,no,null),e&&e.text&&(b(this,so,_(this,Nt,QM).call(this,e.text)),b(this,Sa,yv.toDateObject(e.date)),b(this,rr,null)),(i=c(this,Ai))==null||i.remove(),b(this,Ai,null)}resetEdited(){var t;c(this,lc)&&({contentsObj:qe(this,rr)._,richText:qe(this,so)._}=c(this,lc),b(this,lc,null),(t=c(this,Ai))==null||t.remove(),b(this,Ai,null),b(this,no,null))}remove(){var t,e,n;if((t=c(this,eo))==null||t.abort(),b(this,eo,null),(e=c(this,Ai))==null||e.remove(),b(this,Ai,null),b(this,Ea,!1),b(this,or,!1),(n=c(this,Re))==null||n.remove(),b(this,Re,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){b(this,Ea,this.isVisible),c(this,Ea)&&(c(this,De).hidden=!0)}maybeShow(){c(this,Si)||(_(this,Nt,jy).call(this),c(this,Ea)&&(c(this,Ai)||_(this,Nt,zy).call(this),b(this,Ea,!1),c(this,De).hidden=!1))}get isVisible(){return c(this,Si)?!1:c(this,De).hidden===!1}}Si=new WeakMap,xa=new WeakMap,Uv=new WeakMap,zv=new WeakMap,Ih=new WeakMap,Nh=new WeakMap,De=new WeakMap,rr=new WeakMap,Sa=new WeakMap,ac=new WeakMap,Fh=new WeakMap,Oh=new WeakMap,or=new WeakMap,Ai=new WeakMap,eo=new WeakMap,no=new WeakMap,Re=new WeakMap,io=new WeakMap,Aa=new WeakMap,pm=new WeakMap,so=new WeakMap,Bh=new WeakMap,lc=new WeakMap,Ea=new WeakMap,an=new WeakMap,Ca=new WeakMap,Nt=new WeakSet,jy=function(){var e;if(c(this,eo))return;b(this,eo,new AbortController);const{signal:t}=c(this,eo);for(const n of this.trigger)n.addEventListener("click",c(this,Ih),{signal:t}),n.addEventListener("pointerenter",c(this,zv),{signal:t}),n.addEventListener("pointerleave",c(this,Uv),{signal:t}),n.classList.add("popupTriggerArea");for(const n of c(this,ac))(e=n.container)==null||e.addEventListener("keydown",c(this,xa),{signal:t})},Xx=function(){const t=c(this,ac).find(e=>e.hasCommentButton);t&&b(this,io,t._normalizePoint(t.commentButtonPosition))},Yx=function(){if(c(this,an).extraPopupElement&&!c(this,an).editor)return;c(this,Re)||this.renderCommentButton();const[t,e]=c(this,io),{style:n}=c(this,Re);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},qx=function(){c(this,an).extraPopupElement||(c(this,Re)||this.renderCommentButton(),c(this,Re).style.backgroundColor=this.commentButtonColor||"")},Vy=function(){const t=c(this,so),e=c(this,rr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,so).html||null},Kx=function(){var t,e,n;return((n=(e=(t=c(this,Nt,Vy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},KM=function(){var t,e,n;return((n=(e=(t=c(this,Nt,Vy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},QM=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:c(this,Nt,KM),fontSize:c(this,Nt,Kx)?`calc(${c(this,Nt,Kx)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:i});return n},JM=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,or))&&_(this,Nt,Uy).call(this)},ZM=function(){if(c(this,no)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:o}}}=c(this,Fh);let l=!!c(this,Oh),u=l?c(this,Oh):c(this,pm);for(const A of c(this,ac))if(!u||st.intersect(A.data.rect,u)!==null){u=A.data.rect,l=!0;break}const h=st.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,g=h[0]+p,y=h[1];b(this,no,[100*(g-i)/e,100*(y-o)/n]);const{style:w}=c(this,De);w.left=`${c(this,no)[0]}%`,w.top=`${c(this,no)[1]}%`},Uy=function(){if(c(this,Si)){c(this,Si).toggleCommentPopup(this,!1);return}b(this,or,!c(this,or)),c(this,or)?(_(this,Nt,zy).call(this),c(this,De).addEventListener("click",c(this,Ih)),c(this,De).addEventListener("keydown",c(this,xa))):(_(this,Nt,Qx).call(this),c(this,De).removeEventListener("click",c(this,Ih)),c(this,De).removeEventListener("keydown",c(this,xa)))},zy=function(){c(this,Ai)||this.render(),this.isVisible?c(this,or)&&c(this,De).classList.add("focused"):(_(this,Nt,ZM).call(this),c(this,De).hidden=!1,c(this,De).style.zIndex=parseInt(c(this,De).style.zIndex)+1e3)},Qx=function(){c(this,De).classList.remove("focused"),!(c(this,or)||!this.isVisible)&&(c(this,De).hidden=!0,c(this,De).style.zIndex=parseInt(c(this,De).style.zIndex)-1e3)};class tD extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Rt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var mm;class rU extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,mm,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),l=b(this,mm,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,mm)}addHighlightArea(){this.container.classList.add("highlightArea")}}mm=new WeakMap;var gm;class oU extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,gm,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),l=e.borderStyle.width,u=b(this,gm,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",i-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,gm)}addHighlightArea(){this.container.classList.add("highlightArea")}}gm=new WeakMap;var ym;class aU extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,ym,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),l=e.borderStyle.width,u=b(this,ym,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",i/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",i/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,ym)}addHighlightArea(){this.container.classList.add("highlightArea")}}ym=new WeakMap;var vm;class eD extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,vm,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:o},width:l,height:u}=this;if(!n)return this.container;const h=this.svgFactory.create(l,u,!0);let f=[];for(let g=0,y=n.length;g<y;g+=2){const w=n[g]-e[0],A=e[3]-n[g+1];f.push(`${w},${A}`)}f=f.join(" ");const p=b(this,vm,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",f),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,vm)}addHighlightArea(){this.container.classList.add("highlightArea")}}vm=new WeakMap;class lU extends eD{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class cU extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var wm,cc,bm,Jx;class bA extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,bm);E(this,wm,null);E(this,cc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Rt.HIGHLIGHT:Rt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:o,popupRef:l}}=this,{transform:u,width:h,height:f}=_(this,bm,Jx).call(this,n,e),p=this.svgFactory.create(h,f,!0),g=b(this,wm,this.svgFactory.createElement("svg:g"));p.append(g),g.setAttribute("stroke-width",o.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let y=0,w=i.length;y<w;y++){const A=this.svgFactory.createElement(this.svgElementName);c(this,cc).push(A),A.setAttribute("points",i[y].join(",")),g.append(A)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:o}=e,l=c(this,wm);if(n>=0&&l.setAttribute("stroke-width",n||1),i)for(let u=0,h=c(this,cc).length;u<h;u++)c(this,cc)[u].setAttribute("points",i[u].join(","));if(o){const{transform:u,width:h,height:f}=_(this,bm,Jx).call(this,this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,cc)}addHighlightArea(){this.container.classList.add("highlightArea")}}wm=new WeakMap,cc=new WeakMap,bm=new WeakSet,Jx=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class nD extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Rt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class uU extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class hU extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class dU extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class iD extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Rt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var xm,Sm,Zx;class fU extends _e{constructor(e){var i;super(e,{isRenderable:!0});E(this,Sm);E(this,xm,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",_(this,Sm,Zx).bind(this)),b(this,xm,i);const{isMac:o}=en.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&_(this,Sm,Zx).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return c(this,xm)}addHighlightArea(){this.container.classList.add("highlightArea")}}xm=new WeakMap,Sm=new WeakSet,Zx=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var uc,hc,jh,Ta,Am,dc,Ei,Em,yo,Hy,eS;const PA=class PA{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:l,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){E(this,yo);E(this,uc,null);E(this,hc,null);E(this,jh,null);E(this,Ta,new Map);E(this,Am,null);E(this,dc,null);E(this,Ei,[]);E(this,Em,!1);this.div=t,b(this,uc,e),b(this,hc,n),b(this,Am,u||null),b(this,dc,f||null),b(this,jh,p||new gA),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=h||null}hasEditableAnnotations(){return c(this,Ta).size>0}async render(t){var u;const{annotations:e}=t,n=this.div;Lc(n,this.viewport);const i=new Map,o=[],l={data:null,layer:n,linkService:c(this,dc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Cv,annotationStorage:c(this,jh),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const f=h.annotationType===He.POPUP;if(f){const y=i.get(h.id);if(!y)continue;if(!this._commentManager){o.push(h);continue}l.elements=y}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const p=Rb.create(l);if(!p.isRenderable)continue;if(!f&&(c(this,Ei).push(p),h.popupRef)){const y=i.get(h.popupRef);y?y.push(p):i.set(h.popupRef,[p])}const g=p.render();h.hidden&&(g.style.visibility="hidden"),p._isEditable&&(c(this,Ta).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}await _(this,yo,Hy).call(this);for(const h of o){const f=l.elements=i.get(h.id);l.data=h;const p=Rb.create(l);if(!p.isRenderable)continue;const g=p.render();p.contentElement.id=`${Pu}${h.id}`,h.hidden&&(g.style.visibility="hidden"),f.at(-1).container.after(g)}_(this,yo,eS).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:c(this,dc),svgFactory:new Cv,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=PA._defaultBorderStyle),e.data=n;const i=Rb.create(e);i.isRenderable&&(i.render(),i.contentElement.id=`${Pu}${n.id}`,c(this,Ei).push(i))}await _(this,yo,Hy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Lc(e,{rotation:t.rotation}),_(this,yo,eS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Ta).values())}getEditableAnnotation(t){return c(this,Ta).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:i}=t,o=new QV({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:c(this,dc),annotationStorage:c(this,jh)});return o.render(),o.contentElement.id=`${Pu}${n}`,o.createOrUpdatePopup(),c(this,Ei).push(o),o}removeAnnotation(t){var i;const e=c(this,Ei).findIndex(o=>o.data.id===t);if(e<0)return;const[n]=c(this,Ei).splice(e,1);(i=c(this,uc))==null||i.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);_(this,yo,Hy).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Mt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:pu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};uc=new WeakMap,hc=new WeakMap,jh=new WeakMap,Ta=new WeakMap,Am=new WeakMap,dc=new WeakMap,Ei=new WeakMap,Em=new WeakMap,yo=new WeakSet,Hy=async function(){var n,i,o;if(c(this,Ei).length===0)return;this.div.replaceChildren();const t=[];if(!c(this,Em)){b(this,Em,!0);for(const{contentElement:l,data:{id:u}}of c(this,Ei)){const h=l.id=`${Pu}${u}`;t.push((n=c(this,Am))==null?void 0:n.getAriaAttributes(h).then(f=>{if(f)for(const[p,g]of f)l.setAttribute(p,g)}))}}c(this,Ei).sort(({data:{rect:[l,u,h,f]}},{data:{rect:[p,g,y,w]}})=>{if(l===h&&u===f)return 1;if(p===y&&g===w)return-1;const A=f,S=u,C=(u+f)/2,T=w,M=g,k=(g+w)/2;if(C>=T&&k<=S)return-1;if(k>=A&&C<=M)return 1;const D=(l+h)/2,R=(p+y)/2;return D-R});const e=document.createDocumentFragment();for(const l of c(this,Ei))e.append(l.container),this._commentManager?(o=((i=l.extraPopupElement)==null?void 0:i.popup)||l.popup)==null||o.renderCommentButton():l.extraPopupElement&&e.append(l.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),c(this,uc))for(const l of c(this,Ei))c(this,uc).addPointerInTextLayer(l.contentElement,!1)},eS=function(){var e;if(!c(this,hc))return;const t=this.div;for(const[n,i]of c(this,hc)){const o=t.querySelector(`[data-annotation-id="${n}"]`);if(!o)continue;i.className="annotationContent";const{firstChild:l}=o;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):o.append(i);const u=c(this,Ta).get(n);u&&(u._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,o.id,i),u._hasNoCanvas=!1):u.canvas=i)}c(this,hc).clear()};let tS=PA;const by=/\r\n?|\n/g;var Ci,Cm,fc,Ti,$e,sD,rD,oD,Wy,vo,$y,Gy,aD,iS,lD;const me=class me extends de{constructor(e){super({...e,name:"freeTextEditor"});E(this,$e);E(this,Ci,"");E(this,Cm,`${this.id}-editor`);E(this,fc,null);E(this,Ti);K(this,"_colorPicker",null);this.color=e.color||me._defaultColor||de._defaultLineColor,b(this,Ti,e.fontSize||me._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=me.prototype,n=l=>l.isEmpty(),i=Ic.TRANSLATE_SMALL,o=Ic.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new Qm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){de.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case jt.FREETEXT_SIZE:me._defaultFontSize=n;break;case jt.FREETEXT_COLOR:me._defaultColor=n;break}}updateParams(e,n){switch(e){case jt.FREETEXT_SIZE:_(this,$e,sD).call(this,n);break;case jt.FREETEXT_COLOR:_(this,$e,rD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.FREETEXT_SIZE,me._defaultFontSize],[jt.FREETEXT_COLOR,me._defaultColor||de._defaultLineColor]]}get propertiesToUpdate(){return[[jt.FREETEXT_SIZE,c(this,Ti)],[jt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Ev(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-me._internalPadding*e,-(me._internalPadding+c(this,Ti))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,fc,new AbortController);const e=this._uiManager.combinedSignal(c(this,fc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Cm)),this._isDraggable=!0,(e=c(this,fc))==null||e.abort(),b(this,fc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,Ci),n=b(this,Ci,_(this,$e,oD).call(this).trimEnd());if(e===n)return;const i=o=>{if(b(this,Ci,o),!o){this.remove();return}_(this,$e,Gy).call(this),this._uiManager.rebuild(this),_(this,$e,Wy).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),_(this,$e,Wy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){me._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Cm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${c(this,Ti)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[p,g]=this.pageDimensions,[y,w]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=e+(u[0]-y)/p,S=n+this.height-(u[1]-w)/g;break;case 90:A=e+(u[0]-y)/p,S=n-(u[1]-w)/g,[h,f]=[f,-h];break;case 180:A=e-this.width+(u[0]-y)/p,S=n-(u[1]-w)/g,[h,f]=[-h,-f];break;case 270:A=e+(u[0]-y-this.height*g)/p,S=n+(u[1]-w-this.width*p)/g,[h,f]=[-f,h];break}this.setAt(A*o,S*l,h,f)}else this._moveAfterPaste(e,n);_(this,$e,Gy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var A,S,C;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const o=_(A=me,vo,iS).call(A,n.getData("text")||"").replaceAll(by,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:f}=u,p=[],g=[];if(h.nodeType===Node.TEXT_NODE){const T=h.parentElement;if(g.push(h.nodeValue.slice(f).replaceAll(by,"")),T!==this.editorDiv){let M=p;for(const k of this.editorDiv.childNodes){if(k===T){M=g;continue}M.push(_(S=me,vo,$y).call(S,k))}}p.push(h.nodeValue.slice(0,f).replaceAll(by,""))}else if(h===this.editorDiv){let T=p,M=0;for(const k of this.editorDiv.childNodes)M++===f&&(T=g),T.push(_(C=me,vo,$y).call(C,k))}b(this,Ci,`${p.join(`
`)}${o}${g.join(`
`)}`),_(this,$e,Gy).call(this);const y=new Range;let w=Math.sumPrecise(p.map(T=>T.length));for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const M=T.nodeValue.length;if(w<=M){y.setStart(T,w),y.setEnd(T,w);break}w-=M}l.removeAllRanges(),l.addRange(y)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=me._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){var u;let o=null;if(e instanceof tD){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:p,rotation:g,id:y,popupRef:w,richText:A,contentsObj:S,creationDate:C,modificationDate:T},textContent:M,textPosition:k,parent:{page:{pageNumber:D}}}=e;if(!M||M.length===0)return null;o=e={annotationType:Rt.FREETEXT,color:Array.from(f),fontSize:h,value:M.join(`
`),position:k,pageIndex:D-1,rect:p.slice(0),rotation:g,annotationElementId:y,id:y,deleted:!1,popupRef:w,comment:(S==null?void 0:S.str)||null,richText:A,creationDate:C,modificationDate:T}}const l=await super.deserialize(e,n,i);return b(l,Ti,e.fontSize),l.color=st.makeHexColor(...e.color),b(l,Ci,_(u=me,vo,iS).call(u,e.value)),l._initialData=o,e.comment&&l.setCommentData(e),l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=de._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:n,fontSize:c(this,Ti),value:_(this,$e,aD).call(this)});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!_(this,$e,lD).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${c(this,Ti)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const o of c(this,Ci).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),n.append(l)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,Ci)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Ci=new WeakMap,Cm=new WeakMap,fc=new WeakMap,Ti=new WeakMap,$e=new WeakSet,sD=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-c(this,Ti))*this.parentScale),b(this,Ti,o),_(this,$e,Wy).call(this)},i=c(this,Ti);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},rD=function(e){const n=o=>{this.color=o,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},oD=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(_(i=me,vo,$y).call(i,o)),n=o);return e.join(`
`)},Wy=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,u=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},vo=new WeakSet,$y=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(by,"")},Gy=function(){if(this.editorDiv.replaceChildren(),!!c(this,Ci))for(const e of c(this,Ci).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},aD=function(){return c(this,Ci).replaceAll(""," ")},iS=function(e){return e.replaceAll(" ","")},lD=function(e){const{value:n,fontSize:i,color:o,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((u,h)=>u!==o[h])||e.pageIndex!==l},E(me,vo),K(me,"_freeTextDefaultContent",""),K(me,"_internalPadding",0),K(me,"_defaultColor",null),K(me,"_defaultFontSize",10),K(me,"_type","freetext"),K(me,"_editorType",Rt.FREETEXT);let nS=me;class ct{toSVGPath(){le("Abstract method `toSVGPath` must be implemented.")}get box(){le("Abstract getter `box` must be implemented.")}serialize(t,e){le("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,o,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*i,l[u+1]=n+t[u+1]*o;return l}static _rescaleAndSwap(t,e,n,i,o,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*i,l[u+1]=n+t[u]*o;return l}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)i[o]=e+t[o],i[o+1]=n+t[o+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,o){switch(o){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,o,l){return[(t+5*n)/6,(e+5*i)/6,(5*n+o)/6,(5*i+l)/6,(n+o)/2,(i+l)/2]}}K(ct,"PRECISION",1e-4);var _i,Ms,Vh,Uh,ar,Ot,pc,mc,Tm,_m,zh,Hh,_a,Pm,Hv,Wv,tn,Df,cD,uD,hD,dD,fD,pD;const Dr=class Dr{constructor({x:t,y:e},n,i,o,l,u=0){E(this,tn);E(this,_i);E(this,Ms,[]);E(this,Vh);E(this,Uh);E(this,ar,[]);E(this,Ot,new Float32Array(18));E(this,pc);E(this,mc);E(this,Tm);E(this,_m);E(this,zh);E(this,Hh);E(this,_a,[]);b(this,_i,n),b(this,Hh,o*i),b(this,Uh,l),c(this,Ot).set([NaN,NaN,NaN,NaN,t,e],6),b(this,Vh,u),b(this,_m,c(Dr,Pm)*i),b(this,Tm,c(Dr,Wv)*i),b(this,zh,i),c(this,_a).push(t,e)}isEmpty(){return isNaN(c(this,Ot)[8])}add({x:t,y:e}){var X;b(this,pc,t),b(this,mc,e);const[n,i,o,l]=c(this,_i);let[u,h,f,p]=c(this,Ot).subarray(8,12);const g=t-f,y=e-p,w=Math.hypot(g,y);if(w<c(this,Tm))return!1;const A=w-c(this,_m),S=A/w,C=S*g,T=S*y;let M=u,k=h;u=f,h=p,f+=C,p+=T,(X=c(this,_a))==null||X.push(t,e);const D=-T/A,R=C/A,I=D*c(this,Hh),j=R*c(this,Hh);return c(this,Ot).set(c(this,Ot).subarray(2,8),0),c(this,Ot).set([f+I,p+j],4),c(this,Ot).set(c(this,Ot).subarray(14,18),12),c(this,Ot).set([f-I,p-j],16),isNaN(c(this,Ot)[6])?(c(this,ar).length===0&&(c(this,Ot).set([u+I,h+j],2),c(this,ar).push(NaN,NaN,NaN,NaN,(u+I-n)/o,(h+j-i)/l),c(this,Ot).set([u-I,h-j],14),c(this,Ms).push(NaN,NaN,NaN,NaN,(u-I-n)/o,(h-j-i)/l)),c(this,Ot).set([M,k,u,h,f,p],6),!this.isEmpty()):(c(this,Ot).set([M,k,u,h,f,p],6),Math.abs(Math.atan2(k-h,M-u)-Math.atan2(T,C))<Math.PI/2?([u,h,f,p]=c(this,Ot).subarray(2,6),c(this,ar).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((h+p)/2-i)/l),[u,h,M,k]=c(this,Ot).subarray(14,18),c(this,Ms).push(NaN,NaN,NaN,NaN,((M+u)/2-n)/o,((k+h)/2-i)/l),!0):([M,k,u,h,f,p]=c(this,Ot).subarray(0,6),c(this,ar).push(((M+5*u)/6-n)/o,((k+5*h)/6-i)/l,((5*u+f)/6-n)/o,((5*h+p)/6-i)/l,((u+f)/2-n)/o,((h+p)/2-i)/l),[f,p,u,h,M,k]=c(this,Ot).subarray(12,18),c(this,Ms).push(((M+5*u)/6-n)/o,((k+5*h)/6-i)/l,((5*u+f)/6-n)/o,((5*h+p)/6-i)/l,((u+f)/2-n)/o,((h+p)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,ar),e=c(this,Ms);if(isNaN(c(this,Ot)[6])&&!this.isEmpty())return _(this,tn,cD).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);_(this,tn,hD).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return _(this,tn,uD).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,o,l){return new mD(t,e,n,i,o,l)}getOutlines(){var g;const t=c(this,ar),e=c(this,Ms),n=c(this,Ot),[i,o,l,u]=c(this,_i),h=new Float32Array((((g=c(this,_a))==null?void 0:g.length)??0)+2);for(let y=0,w=h.length-2;y<w;y+=2)h[y]=(c(this,_a)[y]-i)/l,h[y+1]=(c(this,_a)[y+1]-o)/u;if(h[h.length-2]=(c(this,pc)-i)/l,h[h.length-1]=(c(this,mc)-o)/u,isNaN(n[6])&&!this.isEmpty())return _(this,tn,dD).call(this,h);const f=new Float32Array(c(this,ar).length+24+c(this,Ms).length);let p=t.length;for(let y=0;y<p;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}p=_(this,tn,pD).call(this,f,p);for(let y=e.length-6;y>=6;y-=6)for(let w=0;w<6;w+=2){if(isNaN(e[y+w])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[y+w],f[p+1]=e[y+w+1],p+=2}return _(this,tn,fD).call(this,f,p),this.newFreeDrawOutline(f,h,c(this,_i),c(this,zh),c(this,Vh),c(this,Uh))}};_i=new WeakMap,Ms=new WeakMap,Vh=new WeakMap,Uh=new WeakMap,ar=new WeakMap,Ot=new WeakMap,pc=new WeakMap,mc=new WeakMap,Tm=new WeakMap,_m=new WeakMap,zh=new WeakMap,Hh=new WeakMap,_a=new WeakMap,Pm=new WeakMap,Hv=new WeakMap,Wv=new WeakMap,tn=new WeakSet,Df=function(){const t=c(this,Ot).subarray(4,6),e=c(this,Ot).subarray(16,18),[n,i,o,l]=c(this,_i);return[(c(this,pc)+(t[0]-e[0])/2-n)/o,(c(this,mc)+(t[1]-e[1])/2-i)/l,(c(this,pc)+(e[0]-t[0])/2-n)/o,(c(this,mc)+(e[1]-t[1])/2-i)/l]},cD=function(){const[t,e,n,i]=c(this,_i),[o,l,u,h]=_(this,tn,Df).call(this);return`M${(c(this,Ot)[2]-t)/n} ${(c(this,Ot)[3]-e)/i} L${(c(this,Ot)[4]-t)/n} ${(c(this,Ot)[5]-e)/i} L${o} ${l} L${u} ${h} L${(c(this,Ot)[16]-t)/n} ${(c(this,Ot)[17]-e)/i} L${(c(this,Ot)[14]-t)/n} ${(c(this,Ot)[15]-e)/i} Z`},uD=function(t){const e=c(this,Ms);t.push(`L${e[4]} ${e[5]} Z`)},hD=function(t){const[e,n,i,o]=c(this,_i),l=c(this,Ot).subarray(4,6),u=c(this,Ot).subarray(16,18),[h,f,p,g]=_(this,tn,Df).call(this);t.push(`L${(l[0]-e)/i} ${(l[1]-n)/o} L${h} ${f} L${p} ${g} L${(u[0]-e)/i} ${(u[1]-n)/o}`)},dD=function(t){const e=c(this,Ot),[n,i,o,l]=c(this,_i),[u,h,f,p]=_(this,tn,Df).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-i)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-i)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-i)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-i)/l],0),this.newFreeDrawOutline(g,t,c(this,_i),c(this,zh),c(this,Vh),c(this,Uh))},fD=function(t,e){const n=c(this,Ms);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},pD=function(t,e){const n=c(this,Ot).subarray(4,6),i=c(this,Ot).subarray(16,18),[o,l,u,h]=c(this,_i),[f,p,g,y]=_(this,tn,Df).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-l)/h],e),e+=24},E(Dr,Pm,8),E(Dr,Hv,2),E(Dr,Wv,c(Dr,Pm)+c(Dr,Hv));let Tv=Dr;var Wh,gc,ro,km,Pi,Mm,je,$v,gD;class mD extends ct{constructor(e,n,i,o,l,u){super();E(this,$v);E(this,Wh);E(this,gc,new Float32Array(4));E(this,ro);E(this,km);E(this,Pi);E(this,Mm);E(this,je);b(this,je,e),b(this,Pi,n),b(this,Wh,i),b(this,Mm,o),b(this,ro,l),b(this,km,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],_(this,$v,gD).call(this,u);const[h,f,p,g]=c(this,gc);for(let y=0,w=e.length;y<w;y+=2)e[y]=(e[y]-h)/p,e[y+1]=(e[y+1]-f)/g;for(let y=0,w=n.length;y<w;y+=2)n[y]=(n[y]-h)/p,n[y+1]=(n[y+1]-f)/g}toSVGPath(){const e=[`M${c(this,je)[4]} ${c(this,je)[5]}`];for(let n=6,i=c(this,je).length;n<i;n+=6){if(isNaN(c(this,je)[n])){e.push(`L${c(this,je)[n+4]} ${c(this,je)[n+5]}`);continue}e.push(`C${c(this,je)[n]} ${c(this,je)[n+1]} ${c(this,je)[n+2]} ${c(this,je)[n+3]} ${c(this,je)[n+4]} ${c(this,je)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,o],l){const u=i-e,h=o-n;let f,p;switch(l){case 0:f=ct._rescale(c(this,je),e,o,u,-h),p=ct._rescale(c(this,Pi),e,o,u,-h);break;case 90:f=ct._rescaleAndSwap(c(this,je),e,n,u,h),p=ct._rescaleAndSwap(c(this,Pi),e,n,u,h);break;case 180:f=ct._rescale(c(this,je),i,n,-u,h),p=ct._rescale(c(this,Pi),i,n,-u,h);break;case 270:f=ct._rescaleAndSwap(c(this,je),i,o,-u,-h),p=ct._rescaleAndSwap(c(this,Pi),i,o,-u,-h);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return c(this,gc)}newOutliner(e,n,i,o,l,u=0){return new Tv(e,n,i,o,l,u)}getNewOutline(e,n){const[i,o,l,u]=c(this,gc),[h,f,p,g]=c(this,Wh),y=l*p,w=u*g,A=i*p+h,S=o*g+f,C=this.newOutliner({x:c(this,Pi)[0]*y+A,y:c(this,Pi)[1]*w+S},c(this,Wh),c(this,Mm),e,c(this,km),n??c(this,ro));for(let T=2;T<c(this,Pi).length;T+=2)C.add({x:c(this,Pi)[T]*y+A,y:c(this,Pi)[T+1]*w+S});return C.getOutlines()}}Wh=new WeakMap,gc=new WeakMap,ro=new WeakMap,km=new WeakMap,Pi=new WeakMap,Mm=new WeakMap,je=new WeakMap,$v=new WeakSet,gD=function(e){const n=c(this,je);let i=n[4],o=n[5];const l=[i,o,i,o];let u=i,h=o,f=i,p=o;const g=e?Math.max:Math.min,y=new Float32Array(4);for(let A=6,S=n.length;A<S;A+=6){const C=n[A+4],T=n[A+5];isNaN(n[A])?(st.pointBoundingBox(C,T,l),h>T?(u=C,h=T):h===T&&(u=g(u,C)),p<T?(f=C,p=T):p===T&&(f=g(f,C))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,st.bezierBoundingBox(i,o,...n.slice(A,A+6),y),st.rectBoundingBox(y[0],y[1],y[2],y[3],l),h>y[1]?(u=y[0],h=y[1]):h===y[1]&&(u=g(u,y[0])),p<y[3]?(f=y[2],p=y[3]):p===y[3]&&(f=g(f,y[2]))),i=C,o=T}const w=c(this,gc);w[0]=l[0]-c(this,ro),w[1]=l[1]-c(this,ro),w[2]=l[2]-l[0]+2*c(this,ro),w[3]=l[3]-l[1]+2*c(this,ro),this.firstPoint=[u,h],this.lastPoint=[f,p]};var Dm,Rm,Lm,Pa,Ds,Yn,yD,Xy,vD,wD,rS;class sS{constructor(t,e=0,n=0,i=!0){E(this,Yn);E(this,Dm);E(this,Rm);E(this,Lm);E(this,Pa,[]);E(this,Ds,[]);const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:C,width:T,height:M}of t){const k=Math.floor((S-e)/l)*l,D=Math.ceil((S+T+e)/l)*l,R=Math.floor((C-e)/l)*l,I=Math.ceil((C+M+e)/l)*l,j=[k,R,I,!0],H=[D,R,I,!1];c(this,Pa).push(j,H),st.rectBoundingBox(k,R,D,I,o)}const u=o[2]-o[0]+2*n,h=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let g=i?-1/0:1/0,y=1/0;const w=c(this,Pa).at(i?-1:-2),A=[w[0],w[2]];for(const S of c(this,Pa)){const[C,T,M,k]=S;!k&&i?T<y?(y=T,g=C):T===y&&(g=Math.max(g,C)):k&&!i&&(T<y?(y=T,g=C):T===y&&(g=Math.min(g,C))),S[0]=(C-f)/u,S[1]=(T-p)/h,S[2]=(M-p)/h}b(this,Dm,new Float32Array([f,p,u,h])),b(this,Rm,[g,y]),b(this,Lm,A)}getOutlines(){c(this,Pa).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of c(this,Pa))e[3]?(t.push(..._(this,Yn,rS).call(this,e)),_(this,Yn,vD).call(this,e)):(_(this,Yn,wD).call(this,e),t.push(..._(this,Yn,rS).call(this,e)));return _(this,Yn,yD).call(this,t)}}Dm=new WeakMap,Rm=new WeakMap,Lm=new WeakMap,Pa=new WeakMap,Ds=new WeakMap,Yn=new WeakSet,yD=function(t){const e=[],n=new Set;for(const l of t){const[u,h,f]=l;e.push([u,h,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const i=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,h,f,p,g]=l;n.delete(l);let y=u,w=h;for(o=[u,f],i.push(o);;){let A;if(n.has(p))A=p;else if(n.has(g))A=g;else break;n.delete(A),[u,h,f,p,g]=A,y!==u&&(o.push(y,w,u,w===h?h:f),y=u),w=w===h?f:h}o.push(y,w)}return new pU(i,c(this,Dm),c(this,Rm),c(this,Lm))},Xy=function(t){const e=c(this,Ds);let n=0,i=e.length-1;for(;n<=i;){const o=n+i>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:i=o-1}return i+1},vD=function([,t,e]){const n=_(this,Yn,Xy).call(this,t);c(this,Ds).splice(n,0,[t,e])},wD=function([,t,e]){const n=_(this,Yn,Xy).call(this,t);for(let i=n;i<c(this,Ds).length;i++){const[o,l]=c(this,Ds)[i];if(o!==t)break;if(o===t&&l===e){c(this,Ds).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[o,l]=c(this,Ds)[i];if(o!==t)break;if(o===t&&l===e){c(this,Ds).splice(i,1);return}}},rS=function(t){const[e,n,i]=t,o=[[e,n,i]],l=_(this,Yn,Xy).call(this,i);for(let u=0;u<l;u++){const[h,f]=c(this,Ds)[u];for(let p=0,g=o.length;p<g;p++){const[,y,w]=o[p];if(!(f<=y||w<=h)){if(y>=h){if(w>f)o[p][1]=f;else{if(g===1)return[];o.splice(p,1),p--,g--}continue}o[p][2]=h,w>f&&o.push([e,f,w])}}}return o};var Im,$h;class pU extends ct{constructor(e,n,i,o){super();E(this,Im);E(this,$h);b(this,$h,e),b(this,Im,n),this.firstPoint=i,this.lastPoint=o}toSVGPath(){const e=[];for(const n of c(this,$h)){let[i,o]=n;e.push(`M${i} ${o}`);for(let l=2;l<n.length;l+=2){const u=n[l],h=n[l+1];u===i?(e.push(`V${h}`),o=h):h===o&&(e.push(`H${u}`),i=u)}e.push("Z")}return e.join(" ")}serialize([e,n,i,o],l){const u=[],h=i-e,f=o-n;for(const p of c(this,$h)){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=e+p[y]*h,g[y+1]=o-p[y+1]*f;u.push(g)}return u}get box(){return c(this,Im)}get classNamesForOutlining(){return["highlightOutline"]}}Im=new WeakMap,$h=new WeakMap;class oS extends Tv{newFreeDrawOutline(t,e,n,i,o,l){return new mU(t,e,n,i,o,l)}}class mU extends mD{newOutliner(t,e,n,i,o,l=0){return new oS(t,e,n,i,o,l)}}var Gh,Nm,oo,yc,Fm,ai,Om,Bm,vc,ki,Mi,wn,Xh,Yh,Nn,qh,as,jm,It,aS,Yy,bD,xD,SD,lS,dl,cs,bu,AD,qy,Ky,ED,CD,TD,_D,PD;const Gt=class Gt extends de{constructor(e){super({...e,name:"highlightEditor"});E(this,It);E(this,Gh,null);E(this,Nm,0);E(this,oo);E(this,yc,null);E(this,Fm,null);E(this,ai,null);E(this,Om,null);E(this,Bm,0);E(this,vc,null);E(this,ki,null);E(this,Mi,null);E(this,wn,!1);E(this,Xh,null);E(this,Yh,null);E(this,Nn,null);E(this,qh,"");E(this,as);E(this,jm,"");this.color=e.color||Gt._defaultColor,b(this,as,e.thickness||Gt._defaultThickness),this.opacity=e.opacity||Gt._defaultOpacity,b(this,oo,e.boxes||null),b(this,jm,e.methodOfCreation||""),b(this,qh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(b(this,wn,!0),_(this,It,Yy).call(this,e),_(this,It,dl).call(this)):c(this,oo)&&(b(this,Gh,e.anchorNode),b(this,Nm,e.anchorOffset),b(this,Om,e.focusNode),b(this,Bm,e.focusOffset),_(this,It,aS).call(this),_(this,It,dl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Gt.prototype;return Mt(this,"_keyboardManager",new Qm([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,wn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,as),methodOfCreation:c(this,jm)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;de.initialize(e,n),Gt._defaultColor||(Gt._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:Gt._defaultColor=n;break;case jt.HIGHLIGHT_THICKNESS:Gt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return c(this,Yh)}get commentButtonPosition(){return c(this,Xh)}updateParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:_(this,It,bD).call(this,n);break;case jt.HIGHLIGHT_THICKNESS:_(this,It,xD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,Gt._defaultColor],[jt.HIGHLIGHT_THICKNESS,Gt._defaultThickness]]}get propertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,this.color||Gt._defaultColor],[jt.HIGHLIGHT_THICKNESS,c(this,as)||Gt._defaultThickness],[jt.HIGHLIGHT_FREE,c(this,wn)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(c(this,Mi),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,Fm))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",b(this,Fm,new Av({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,It,Ky).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,_(this,It,Ky).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){_(this,It,lS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,It,dl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?_(this,It,lS).call(this):e&&(_(this,It,dl).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,l,u;const{drawLayer:n}=this.parent;let i;c(this,wn)?(e=(e-this.rotation+360)%360,i=_(o=Gt,cs,bu).call(o,c(this,ki).box,e)):i=_(l=Gt,cs,bu).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(c(this,Mi),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(c(this,Nn),{bbox:_(u=Gt,cs,bu).call(u,c(this,ai).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,qh)&&(e.setAttribute("aria-label",c(this,qh)),e.setAttribute("role","mark")),c(this,wn)?e.classList.add("free"):this.div.addEventListener("keydown",_(this,It,AD).bind(this),{signal:this._uiManager._signal});const n=b(this,vc,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,yc),this.setDims(),Xk(this,c(this,vc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,Nn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,Nn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:_(this,It,qy).call(this,!0);break;case 1:case 3:_(this,It,qy).call(this,!1);break}}select(){var e;super.select(),c(this,Nn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,Nn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,Nn)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,Nn),{rootClass:{selected:!1}}),c(this,wn)||_(this,It,qy).call(this,!1))}get _mustFixPosition(){return!c(this,wn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Mi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,Nn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:o,y:l}){const{x:u,y:h,width:f,height:p}=i.getBoundingClientRect(),g=new AbortController,y=e.combinedSignal(g),w=A=>{g.abort(),_(this,cs,_D).call(this,e,A)};window.addEventListener("blur",w,{signal:y}),window.addEventListener("pointerup",w,{signal:y}),window.addEventListener("pointerdown",Ne,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",hs,{signal:y}),i.addEventListener("pointermove",_(this,cs,TD).bind(this,e),{signal:y}),this._freeHighlight=new oS({x:o,y:l},[u,h,f,p],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var S,C,T,M;let o=null;if(e instanceof nD){const{data:{quadPoints:k,rect:D,rotation:R,id:I,color:j,opacity:H,popupRef:X,richText:Q,contentsObj:Z,creationDate:vt,modificationDate:wt},parent:{page:{pageNumber:gt}}}=e;o=e={annotationType:Rt.HIGHLIGHT,color:Array.from(j),opacity:H,quadPoints:k,boxes:null,pageIndex:gt-1,rect:D.slice(0),rotation:R,annotationElementId:I,id:I,deleted:!1,popupRef:X,richText:Q,comment:(Z==null?void 0:Z.str)||null,creationDate:vt,modificationDate:wt}}else if(e instanceof bA){const{data:{inkLists:k,rect:D,rotation:R,id:I,color:j,borderStyle:{rawWidth:H},popupRef:X,richText:Q,contentsObj:Z,creationDate:vt,modificationDate:wt},parent:{page:{pageNumber:gt}}}=e;o=e={annotationType:Rt.HIGHLIGHT,color:Array.from(j),thickness:H,inkLists:k,boxes:null,pageIndex:gt-1,rect:D.slice(0),rotation:R,annotationElementId:I,id:I,deleted:!1,popupRef:X,richText:Q,comment:(Z==null?void 0:Z.str)||null,creationDate:vt,modificationDate:wt}}const{color:l,quadPoints:u,inkLists:h,opacity:f}=e,p=await super.deserialize(e,n,i);p.color=st.makeHexColor(...l),p.opacity=f||1,h&&b(p,as,e.thickness),p._initialData=o,e.comment&&p.setCommentData(e);const[g,y]=p.pageDimensions,[w,A]=p.pageTranslation;if(u){const k=b(p,oo,[]);for(let D=0;D<u.length;D+=8)k.push({x:(u[D]-w)/g,y:1-(u[D+1]-A)/y,width:(u[D+2]-u[D])/g,height:(u[D+1]-u[D+5])/y});_(S=p,It,aS).call(S),_(C=p,It,dl).call(C),p.rotate(p.rotation)}else if(h){b(p,wn,!0);const k=h[0],D={x:k[0]-w,y:y-(k[1]-A)},R=new oS(D,[0,0,g,y],1,c(p,as)/2,!0,.001);for(let H=0,X=k.length;H<X;H+=2)D.x=k[H]-w,D.y=y-(k[H+1]-A),R.add(D);const{id:I,clipPathId:j}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:R.toSVGPath()}},!0,!0);_(T=p,It,Yy).call(T,{highlightOutlines:R.getOutlines(),highlightId:I,clipPathId:j}),_(M=p,It,dl).call(M),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=de._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:n,opacity:this.opacity,thickness:c(this,as),quadPoints:_(this,It,ED).call(this),outlines:_(this,It,CD).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!_(this,It,PD).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Gh=new WeakMap,Nm=new WeakMap,oo=new WeakMap,yc=new WeakMap,Fm=new WeakMap,ai=new WeakMap,Om=new WeakMap,Bm=new WeakMap,vc=new WeakMap,ki=new WeakMap,Mi=new WeakMap,wn=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Nn=new WeakMap,qh=new WeakMap,as=new WeakMap,jm=new WeakMap,It=new WeakSet,aS=function(){const e=new sS(c(this,oo),.001);b(this,ki,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ki).box;const n=new sS(c(this,oo),.0025,.001,this._uiManager.direction==="ltr");b(this,ai,n.getOutlines());const{firstPoint:i}=c(this,ki);b(this,Xh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:o}=c(this,ai);b(this,Yh,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Yy=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var y,w;if(b(this,ki,e),b(this,ai,e.getNewOutline(c(this,as)/2+1.5,.0025)),n>=0)b(this,Mi,n),b(this,yc,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),b(this,Nn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,ai).box,path:{d:c(this,ai).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Mi),{bbox:_(y=Gt,cs,bu).call(y,c(this,ki).box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Nn),{bbox:_(w=Gt,cs,bu).call(w,c(this,ai).box,A),path:{d:c(this,ai).toSVGPath()}})}const[l,u,h,f]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=h,this.height=f;break;case 90:{const[A,S]=this.parentDimensions;this.x=u,this.y=1-l,this.width=h*S/A,this.height=f*A/S;break}case 180:this.x=1-l,this.y=1-u,this.width=h,this.height=f;break;case 270:{const[A,S]=this.parentDimensions;this.x=1-u,this.y=l,this.width=h*S/A,this.height=f*A/S;break}}const{firstPoint:p}=e;b(this,Xh,[(p[0]-l)/h,(p[1]-u)/f]);const{lastPoint:g}=c(this,ai);b(this,Yh,[(g[0]-l)/h,(g[1]-u)/f])},bD=function(e){const n=(l,u)=>{this.color=l,this.opacity=u,this.onUpdatedColor()},i=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,e,Gt._defaultOpacity),undo:n.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},xD=function(e){const n=c(this,as),i=o=>{b(this,as,o),_(this,It,SD).call(this,o)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},SD=function(e){c(this,wn)&&(_(this,It,Yy).call(this,{highlightOutlines:c(this,ki).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},lS=function(){c(this,Mi)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Mi)),b(this,Mi,null),this.parent.drawLayer.remove(c(this,Nn)),b(this,Nn,null))},dl=function(e=this.parent){c(this,Mi)===null&&({id:qe(this,Mi)._,clipPathId:qe(this,yc)._}=e.drawLayer.draw({bbox:c(this,ki).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,wn)},path:{d:c(this,ki).toSVGPath()}},!1,!0),b(this,Nn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,wn)},bbox:c(this,ai).box,path:{d:c(this,ai).toSVGPath()}},c(this,wn))),c(this,vc)&&(c(this,vc).style.clipPath=c(this,yc)))},cs=new WeakSet,bu=function([e,n,i,o],l){switch(l){case 90:return[1-n-o,e,o,i];case 180:return[1-e-i,1-n-o,i,o];case 270:return[n,1-e-i,o,i]}return[e,n,i,o]},AD=function(e){Gt._keyboardManager.exec(this,e)},qy=function(e){if(!c(this,Gh))return;const n=window.getSelection();e?n.setPosition(c(this,Gh),c(this,Nm)):n.setPosition(c(this,Om),c(this,Bm))},Ky=function(){return c(this,wn)?this.rotation:0},ED=function(){if(c(this,wn))return null;const[e,n]=this.pageDimensions,[i,o]=this.pageTranslation,l=c(this,oo),u=new Float32Array(l.length*8);let h=0;for(const{x:f,y:p,width:g,height:y}of l){const w=f*e+i,A=(1-p)*n+o;u[h]=u[h+4]=w,u[h+1]=u[h+3]=A,u[h+2]=u[h+6]=w+g*e,u[h+5]=u[h+7]=A-y*n,h+=8}return u},CD=function(e){return c(this,ki).serialize(e,_(this,It,Ky).call(this))},TD=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},_D=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},PD=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,o)=>i!==n[o])},E(Gt,cs),K(Gt,"_defaultColor",null),K(Gt,"_defaultOpacity",1),K(Gt,"_defaultThickness",12),K(Gt,"_type","highlight"),K(Gt,"_editorType",Rt.HIGHLIGHT),K(Gt,"_freeHighlightId",-1),K(Gt,"_freeHighlight",null),K(Gt,"_freeHighlightClipId","");let _v=Gt;var wc;class kD{constructor(){E(this,wc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){c(this,wc)[t]=e}toSVGProperties(){const t=c(this,wc);return b(this,wc,Object.create(null)),{root:t}}reset(){b(this,wc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){le("Not implemented")}}wc=new WeakMap;var Di,Kh,ln,bc,xc,Ht,cS,uS,hS,Rf,MD,Qy,Lf,xu;const Bt=class Bt extends de{constructor(e){super(e);E(this,Ht);E(this,Di,null);E(this,Kh);K(this,"_colorPicker",null);K(this,"_drawId",null);b(this,Kh,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(_(this,Ht,cS).call(this,e),_(this,Ht,Rf).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[o,l]of Object.entries(n))i.has(o)?Object.assign(e[o],l):e[o]=l;return e}static getDefaultDrawingOptions(e){le("Not implemented")}static get typesMap(){le("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(c(Bt,ln).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,o]of this.typesMap)e.push([i,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,o]of this.constructor.typesMap)e.push([i,n[o]]);return e}_updateProperty(e,n,i){const o=this._drawingOptions,l=o[n],u=h=>{var p;o.updateProperty(n,h);const f=c(this,Di).updateProperty(n,h);f&&_(this,Ht,Lf).call(this,f),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,i),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(c(this,Di).getPathResizingSVGProperties(_(this,Ht,Qy).call(this)),{bbox:_(this,Ht,xu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(c(this,Di).getPathResizedSVGProperties(_(this,Ht,Qy).call(this)),{bbox:_(this,Ht,xu).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:_(this,Ht,xu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(c(this,Di).getPathTranslatedSVGProperties(_(this,Ht,Qy).call(this),this.parentDimensions),{bbox:_(this,Ht,xu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Kh)&&(b(this,Kh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){_(this,Ht,hS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,Ht,Rf).call(this),_(this,Ht,Lf).call(this,c(this,Di).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),_(this,Ht,hS).call(this)):e&&(this._uiManager.addShouldRescale(this),_(this,Ht,Rf).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties({bbox:_(this,Ht,xu).call(this)},c(this,Di).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&_(this,Ht,Lf).call(this,c(this,Di).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const o=document.createElement("div");return i.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,o,l){le("Not implemented")}static startDrawing(e,n,i,o){var C;const{target:l,offsetX:u,offsetY:h,pointerId:f,pointerType:p}=o;if(Mn.isInitializedAndDifferentPointerType(p))return;const{viewport:{rotation:g}}=e,{width:y,height:w}=l.getBoundingClientRect(),A=b(Bt,bc,new AbortController),S=e.combinedSignal(A);if(Mn.setPointer(p,f),window.addEventListener("pointerup",T=>{Mn.isSamePointerIdOrRemove(T.pointerId)&&this._endDraw(T)},{signal:S}),window.addEventListener("pointercancel",T=>{Mn.isSamePointerIdOrRemove(T.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",T=>{Mn.isSamePointerType(T.pointerType)&&(Mn.initializeAndAddPointerId(T.pointerId),c(Bt,ln).isCancellable()&&(c(Bt,ln).removeLastElement(),c(Bt,ln).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",hs,{signal:S}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),l.addEventListener("touchmove",T=>{Mn.isSameTimeStamp(T.timeStamp)&&Ne(T)},{signal:S}),e.toggleDrawing(),(C=n._editorUndoBar)==null||C.hide(),c(Bt,ln)){e.drawLayer.updateProperties(this._currentDrawId,c(Bt,ln).startNew(u,h,y,w,g));return}n.updateUIForDefaultProperties(this),b(Bt,ln,this.createDrawerInstance(u,h,y,w,g)),b(Bt,xc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(Bt,xc).toSVGProperties(),c(Bt,ln).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Mn.isSameTimeStamp(e.timeStamp),!c(Bt,ln))return;const{offsetX:n,offsetY:i,pointerId:o}=e;if(Mn.isSamePointerId(o)){if(Mn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(Bt,ln).add(n,i)),Mn.setTimeStamp(e.timeStamp),Ne(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,b(Bt,ln,null),b(Bt,xc,null),Mn.clearTimeStamp()),c(Bt,bc)&&(c(Bt,bc).abort(),b(Bt,bc,null),Mn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(Bt,ln).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=c(Bt,ln),o=this._currentDrawId,l=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,i.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(o,i.removeLastElement())},mustExec:!1,type:jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(jt.DRAW_STEP),!c(Bt,ln).isEmpty()){const{pageDimensions:[i,o],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(Bt,ln).getOutlines(i*l,o*l,l,this._INNER_MARGIN),drawingOptions:c(Bt,xc),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,o,l,u){le("Not implemented")}static async deserialize(e,n,i){var g,y;const{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}=n.viewport,f=this.deserializeDraw(u,h,o,l,this._INNER_MARGIN,e),p=await super.deserialize(e,n,i);return p.createDrawingOptions(e),_(g=p,Ht,cS).call(g,{drawOutlines:f}),_(y=p,Ht,Rf).call(y),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[n,i]=this.pageTranslation,[o,l]=this.pageDimensions;return c(this,Di).serialize([n,i,o,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Di=new WeakMap,Kh=new WeakMap,ln=new WeakMap,bc=new WeakMap,xc=new WeakMap,Ht=new WeakSet,cS=function({drawOutlines:e,drawId:n,drawingOptions:i}){b(this,Di,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=_(this,Ht,uS).call(this,e,this.parent),_(this,Ht,Lf).call(this,e.box)},uS=function(e,n){const{id:i}=n.drawLayer.draw(Bt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},hS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Rf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=_(this,Ht,uS).call(this,c(this,Di),e)}},MD=function([e,n,i,o]){const{parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[n,1-e,i*(u/l),o*(l/u)];case 180:return[1-e,1-n,i,o];case 270:return[1-n,e,i*(u/l),o*(l/u)];default:return[e,n,i,o]}},Qy=function(){const{x:e,y:n,width:i,height:o,parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[1-n,e,i*(l/u),o*(u/l)];case 180:return[1-e,1-n,i,o];case 270:return[n,1-e,i*(l/u),o*(u/l)];default:return[e,n,i,o]}},Lf=function(e){[this.x,this.y,this.width,this.height]=_(this,Ht,MD).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},xu=function(){const{x:e,y:n,width:i,height:o,rotation:l,parentRotation:u,parentDimensions:[h,f]}=this;switch((l*4+u)/90){case 1:return[1-n-o,e,o,i];case 2:return[1-e-i,1-n-o,i,o];case 3:return[n,1-e-i,o,i];case 4:return[e,n-i*(h/f),o*(f/h),i*(h/f)];case 5:return[1-n,e,i*(h/f),o*(f/h)];case 6:return[1-e-o*(f/h),1-n,o*(f/h),i*(h/f)];case 7:return[n-i*(h/f),1-e-o*(f/h),i*(h/f),o*(f/h)];case 8:return[e-i,n-o,i,o];case 9:return[1-n,e-i,o,i];case 10:return[1-e,1-n,i,o];case 11:return[n-o,1-e,o,i];case 12:return[e-o*(f/h),n,o*(f/h),i*(h/f)];case 13:return[1-n-i*(h/f),e-o*(f/h),i*(h/f),o*(f/h)];case 14:return[1-e,1-n-i*(h/f),o*(f/h),i*(h/f)];case 15:return[n,1-e,i*(h/f),o*(f/h)];default:return[e,n,i,o]}},K(Bt,"_currentDrawId",-1),K(Bt,"_currentParent",null),E(Bt,ln,null),E(Bt,bc,null),E(Bt,xc,null),K(Bt,"_INNER_MARGIN",3);let Pv=Bt;var lr,cn,un,Sc,Qh,zn,bn,ls,Ac,Ec,Cc,Jh,Jy;class gU{constructor(t,e,n,i,o,l){E(this,Jh);E(this,lr,new Float64Array(6));E(this,cn);E(this,un);E(this,Sc);E(this,Qh);E(this,zn);E(this,bn,"");E(this,ls,0);E(this,Ac,new Zm);E(this,Ec);E(this,Cc);b(this,Ec,n),b(this,Cc,i),b(this,Sc,o),b(this,Qh,l),[t,e]=_(this,Jh,Jy).call(this,t,e);const u=b(this,cn,[NaN,NaN,NaN,NaN,t,e]);b(this,zn,[t,e]),b(this,un,[{line:u,points:c(this,zn)}]),c(this,lr).set(u,0)}updateProperty(t,e){t==="stroke-width"&&b(this,Qh,e)}isEmpty(){return!c(this,un)||c(this,un).length===0}isCancellable(){return c(this,zn).length<=10}add(t,e){[t,e]=_(this,Jh,Jy).call(this,t,e);const[n,i,o,l]=c(this,lr).subarray(2,6),u=t-o,h=e-l;return Math.hypot(c(this,Ec)*u,c(this,Cc)*h)<=2?null:(c(this,zn).push(t,e),isNaN(n)?(c(this,lr).set([o,l,t,e],2),c(this,cn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,lr)[0])&&c(this,cn).splice(6,6),c(this,lr).set([n,i,o,l,t,e],0),c(this,cn).push(...ct.createBezierPoints(n,i,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(c(this,zn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,o){b(this,Ec,n),b(this,Cc,i),b(this,Sc,o),[t,e]=_(this,Jh,Jy).call(this,t,e);const l=b(this,cn,[NaN,NaN,NaN,NaN,t,e]);b(this,zn,[t,e]);const u=c(this,un).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,un).push({line:l,points:c(this,zn)}),c(this,lr).set(l,0),b(this,ls,0),this.toSVGPath(),null}getLastElement(){return c(this,un).at(-1)}setLastElement(t){return c(this,un)?(c(this,un).push(t),b(this,cn,t.line),b(this,zn,t.points),b(this,ls,0),{path:{d:this.toSVGPath()}}):c(this,Ac).setLastElement(t)}removeLastElement(){if(!c(this,un))return c(this,Ac).removeLastElement();c(this,un).pop(),b(this,bn,"");for(let t=0,e=c(this,un).length;t<e;t++){const{line:n,points:i}=c(this,un)[t];b(this,cn,n),b(this,zn,i),b(this,ls,0),this.toSVGPath()}return{path:{d:c(this,bn)}}}toSVGPath(){const t=ct.svgRound(c(this,cn)[4]),e=ct.svgRound(c(this,cn)[5]);if(c(this,zn).length===2)return b(this,bn,`${c(this,bn)} M ${t} ${e} Z`),c(this,bn);if(c(this,zn).length<=6){const i=c(this,bn).lastIndexOf("M");b(this,bn,`${c(this,bn).slice(0,i)} M ${t} ${e}`),b(this,ls,6)}if(c(this,zn).length===4){const i=ct.svgRound(c(this,cn)[10]),o=ct.svgRound(c(this,cn)[11]);return b(this,bn,`${c(this,bn)} L ${i} ${o}`),b(this,ls,12),c(this,bn)}const n=[];c(this,ls)===0&&(n.push(`M ${t} ${e}`),b(this,ls,6));for(let i=c(this,ls),o=c(this,cn).length;i<o;i+=6){const[l,u,h,f,p,g]=c(this,cn).slice(i,i+6).map(ct.svgRound);n.push(`C${l} ${u} ${h} ${f} ${p} ${g}`)}return b(this,bn,c(this,bn)+n.join(" ")),b(this,ls,c(this,cn).length),c(this,bn)}getOutlines(t,e,n,i){const o=c(this,un).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),c(this,Ac).build(c(this,un),t,e,n,c(this,Sc),c(this,Qh),i),b(this,lr,null),b(this,cn,null),b(this,un,null),b(this,bn,null),c(this,Ac)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}lr=new WeakMap,cn=new WeakMap,un=new WeakMap,Sc=new WeakMap,Qh=new WeakMap,zn=new WeakMap,bn=new WeakMap,ls=new WeakMap,Ac=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Jh=new WeakSet,Jy=function(t,e){return ct._normalizePoint(t,e,c(this,Ec),c(this,Cc),c(this,Sc))};var Hn,Vm,Um,Ri,cr,ur,Zh,td,Tc,An,kr,DD,RD,LD;class Zm extends ct{constructor(){super(...arguments);E(this,An);E(this,Hn);E(this,Vm,0);E(this,Um);E(this,Ri);E(this,cr);E(this,ur);E(this,Zh);E(this,td);E(this,Tc)}build(e,n,i,o,l,u,h){b(this,cr,n),b(this,ur,i),b(this,Zh,o),b(this,td,l),b(this,Tc,u),b(this,Um,h??0),b(this,Ri,e),_(this,An,RD).call(this)}get thickness(){return c(this,Tc)}setLastElement(e){return c(this,Ri).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Ri).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of c(this,Ri)){if(e.push(`M${ct.svgRound(n[4])} ${ct.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ct.svgRound(n[10])} ${ct.svgRound(n[11])}`);continue}for(let i=6,o=n.length;i<o;i+=6){const[l,u,h,f,p,g]=n.subarray(i,i+6).map(ct.svgRound);e.push(`C${l} ${u} ${h} ${f} ${p} ${g}`)}}return e.join("")}serialize([e,n,i,o],l){const u=[],h=[],[f,p,g,y]=_(this,An,DD).call(this);let w,A,S,C,T,M,k,D,R;switch(c(this,td)){case 0:R=ct._rescale,w=e,A=n+o,S=i,C=-o,T=e+f*i,M=n+(1-p-y)*o,k=e+(f+g)*i,D=n+(1-p)*o;break;case 90:R=ct._rescaleAndSwap,w=e,A=n,S=i,C=o,T=e+p*i,M=n+f*o,k=e+(p+y)*i,D=n+(f+g)*o;break;case 180:R=ct._rescale,w=e+i,A=n,S=-i,C=o,T=e+(1-f-g)*i,M=n+p*o,k=e+(1-f)*i,D=n+(p+y)*o;break;case 270:R=ct._rescaleAndSwap,w=e+i,A=n+o,S=-i,C=-o,T=e+(1-p-y)*i,M=n+(1-f-g)*o,k=e+(1-p)*i,D=n+(1-f)*o;break}for(const{line:I,points:j}of c(this,Ri))u.push(R(I,w,A,S,C,l?new Array(I.length):null)),h.push(R(j,w,A,S,C,l?new Array(j.length):null));return{lines:u,points:h,rect:[T,M,k,D]}}static deserialize(e,n,i,o,l,{paths:{lines:u,points:h},rotation:f,thickness:p}){const g=[];let y,w,A,S,C;switch(f){case 0:C=ct._rescale,y=-e/i,w=n/o+1,A=1/i,S=-1/o;break;case 90:C=ct._rescaleAndSwap,y=-n/o,w=-e/i,A=1/o,S=1/i;break;case 180:C=ct._rescale,y=e/i+1,w=-n/o,A=-1/i,S=1/o;break;case 270:C=ct._rescaleAndSwap,y=n/o+1,w=e/i+1,A=-1/o,S=-1/i;break}if(!u){u=[];for(const M of h){const k=M.length;if(k===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(k===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const D=new Float32Array(3*(k-2));u.push(D);let[R,I,j,H]=M.subarray(0,4);D.set([NaN,NaN,NaN,NaN,R,I],0);for(let X=4;X<k;X+=2){const Q=M[X],Z=M[X+1];D.set(ct.createBezierPoints(R,I,j,H,Q,Z),(X-2)*3),[R,I,j,H]=[j,H,Q,Z]}}}for(let M=0,k=u.length;M<k;M++)g.push({line:C(u[M].map(D=>D??NaN),y,w,A,S),points:C(h[M].map(D=>D??NaN),y,w,A,S)});const T=new this.prototype.constructor;return T.build(g,i,o,1,f,p,l),T}get box(){return c(this,Hn)}updateProperty(e,n){return e==="stroke-width"?_(this,An,LD).call(this,n):null}updateParentDimensions([e,n],i){const[o,l]=_(this,An,kr).call(this);b(this,cr,e),b(this,ur,n),b(this,Zh,i);const[u,h]=_(this,An,kr).call(this),f=u-o,p=h-l,g=c(this,Hn);return g[0]-=f,g[1]-=p,g[2]+=2*f,g[3]+=2*p,g}updateRotation(e){return b(this,Vm,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Hn).map(ct.svgRound).join(" ")}get defaultProperties(){const[e,n]=c(this,Hn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=c(this,Hn);let i=0,o=0,l=0,u=0,h=0,f=0;switch(c(this,Vm)){case 90:o=n/e,l=-e/n,h=e;break;case 180:i=-1,u=-1,h=e,f=n;break;case 270:o=-n/e,l=e/n,f=n;break;default:return""}return`matrix(${i} ${o} ${l} ${u} ${ct.svgRound(h)} ${ct.svgRound(f)})`}getPathResizingSVGProperties([e,n,i,o]){const[l,u]=_(this,An,kr).call(this),[h,f,p,g]=c(this,Hn);if(Math.abs(p-l)<=ct.PRECISION||Math.abs(g-u)<=ct.PRECISION){const C=e+i/2-(h+p/2),T=n+o/2-(f+g/2);return{path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:`${this.rotationTransform} translate(${C} ${T})`}}}const y=(i-2*l)/(p-2*l),w=(o-2*u)/(g-2*u),A=p/i,S=g/o;return{path:{"transform-origin":`${ct.svgRound(h)} ${ct.svgRound(f)}`,transform:`${this.rotationTransform} scale(${A} ${S}) translate(${ct.svgRound(l)} ${ct.svgRound(u)}) scale(${y} ${w}) translate(${ct.svgRound(-l)} ${ct.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,i,o]){const[l,u]=_(this,An,kr).call(this),h=c(this,Hn),[f,p,g,y]=h;if(h[0]=e,h[1]=n,h[2]=i,h[3]=o,Math.abs(g-l)<=ct.PRECISION||Math.abs(y-u)<=ct.PRECISION){const T=e+i/2-(f+g/2),M=n+o/2-(p+y/2);for(const{line:k,points:D}of c(this,Ri))ct._translate(k,T,M,k),ct._translate(D,T,M,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const w=(i-2*l)/(g-2*l),A=(o-2*u)/(y-2*u),S=-w*(f+l)+e+l,C=-A*(p+u)+n+u;if(w!==1||A!==1||S!==0||C!==0)for(const{line:T,points:M}of c(this,Ri))ct._rescale(T,S,C,w,A,T),ct._rescale(M,S,C,w,A,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[o,l]=i,u=c(this,Hn),h=e-u[0],f=n-u[1];if(c(this,cr)===o&&c(this,ur)===l)for(const{line:p,points:g}of c(this,Ri))ct._translate(p,h,f,p),ct._translate(g,h,f,g);else{const p=c(this,cr)/o,g=c(this,ur)/l;b(this,cr,o),b(this,ur,l);for(const{line:y,points:w}of c(this,Ri))ct._rescale(y,h,f,p,g,y),ct._rescale(w,h,f,p,g,w);u[2]*=p,u[3]*=g}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get defaultSVGProperties(){const e=c(this,Hn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e[0])} ${ct.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Hn=new WeakMap,Vm=new WeakMap,Um=new WeakMap,Ri=new WeakMap,cr=new WeakMap,ur=new WeakMap,Zh=new WeakMap,td=new WeakMap,Tc=new WeakMap,An=new WeakSet,kr=function(e=c(this,Tc)){const n=c(this,Um)+e/2*c(this,Zh);return c(this,td)%180===0?[n/c(this,cr),n/c(this,ur)]:[n/c(this,ur),n/c(this,cr)]},DD=function(){const[e,n,i,o]=c(this,Hn),[l,u]=_(this,An,kr).call(this,0);return[e+l,n+u,i-2*l,o-2*u]},RD=function(){const e=b(this,Hn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of c(this,Ri)){if(o.length<=12){for(let h=4,f=o.length;h<f;h+=6)st.pointBoundingBox(o[h],o[h+1],e);continue}let l=o[4],u=o[5];for(let h=6,f=o.length;h<f;h+=6){const[p,g,y,w,A,S]=o.subarray(h,h+6);st.bezierBoundingBox(l,u,p,g,y,w,A,S,e),l=A,u=S}}const[n,i]=_(this,An,kr).call(this);e[0]=Gn(e[0]-n,0,1),e[1]=Gn(e[1]-i,0,1),e[2]=Gn(e[2]+n,0,1),e[3]=Gn(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},LD=function(e){const[n,i]=_(this,An,kr).call(this);b(this,Tc,e);const[o,l]=_(this,An,kr).call(this),[u,h]=[o-n,l-i],f=c(this,Hn);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f};class c0 extends kD{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:de._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new c0(this._viewParameters);return t.updateAll(this),t}}var Gv,ID;const Lu=class Lu extends Pv{constructor(e){super({...e,name:"inkEditor"});E(this,Gv);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){de.initialize(e,n),this._defaultDrawingOptions=new c0(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Mt(this,"typesMap",new Map([[jt.INK_THICKNESS,"stroke-width"],[jt.INK_COLOR,"stroke"],[jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,o,l){return new gU(e,n,i,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,o,l,u){return Zm.deserialize(e,n,i,o,l,u)}static async deserialize(e,n,i){let o=null;if(e instanceof bA){const{data:{inkLists:u,rect:h,rotation:f,id:p,color:g,opacity:y,borderStyle:{rawWidth:w},popupRef:A,richText:S,contentsObj:C,creationDate:T,modificationDate:M},parent:{page:{pageNumber:k}}}=e;o=e={annotationType:Rt.INK,color:Array.from(g),thickness:w,opacity:y,paths:{points:u},boxes:null,pageIndex:k-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:A,richText:S,comment:(C==null?void 0:C.str)||null,creationDate:T,modificationDate:M}}const l=await super.deserialize(e,n,i);return l._initialData=o,e.comment&&l.setCommentData(e),l}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Ev(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Lu.getDefaultDrawingOptions({stroke:st.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":u}}=this,h=Object.assign(super.serialize(e),{color:de._colorManager.convert(o),opacity:l,thickness:u,paths:{lines:n,points:i}});return this.addComment(h),e?(h.isCopy=!0,h):this.annotationElementId&&!_(this,Gv,ID).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Gv=new WeakSet,ID=function(e){const{color:n,thickness:i,opacity:o,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,h)=>u!==n[h])||e.thickness!==i||e.opacity!==o||e.pageIndex!==l},K(Lu,"_type","ink"),K(Lu,"_editorType",Rt.INK),K(Lu,"_defaultDrawingOptions",null);let dS=Lu;class fS extends Zm{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const xy=8,hf=3;var _c,Xt,pS,Rs,ND,FD,mS,Zy,OD,BD,jD,gS,yS,VD;class fo{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},o,l,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const g=200,y=p.font=`${n} ${i} ${g}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:A,actualBoundingBoxAscent:S,actualBoundingBoxDescent:C,fontBoundingBoxAscent:T,fontBoundingBoxDescent:M,width:k}=p.measureText(t),D=1.5,R=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||0,k)*D),I=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||g,Math.abs(T)+Math.abs(M)||g)*D);f=new OffscreenCanvas(R,I),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,R,I),p.fillStyle="black",p.fillText(t,R*(D-1)/2,I*(3-D)/2);const j=_(this,Xt,gS).call(this,p.getImageData(0,0,R,I).data),H=_(this,Xt,jD).call(this,j),X=_(this,Xt,yS).call(this,H),Q=_(this,Xt,mS).call(this,j,R,I,X);return this.processDrawnLines({lines:{curves:Q,width:R,height:I},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,o){const[l,u,h]=_(this,Xt,VD).call(this,t),[f,p]=_(this,Xt,BD).call(this,l,u,h,Math.hypot(u,h)*c(this,_c).sigmaSFactor,c(this,_c).sigmaR,c(this,_c).kernelSize),g=_(this,Xt,yS).call(this,p),y=_(this,Xt,mS).call(this,f,u,h,g);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:e,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:l,areContours:u}){i%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:p}=t,g=t.thickness??0,y=[],w=Math.min(e/f,n/p),A=w/e,S=w/n,C=[];for(const{points:M}of h){const k=l?_(this,Xt,OD).call(this,M):M;if(!k)continue;C.push(k);const D=k.length,R=new Float32Array(D),I=new Float32Array(3*(D===2?2:D-2));if(y.push({line:I,points:R}),D===2){R[0]=k[0]*A,R[1]=k[1]*S,I.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[j,H,X,Q]=k;j*=A,H*=S,X*=A,Q*=S,R.set([j,H,X,Q],0),I.set([NaN,NaN,NaN,NaN,j,H],0);for(let Z=4;Z<D;Z+=2){const vt=R[Z]=k[Z]*A,wt=R[Z+1]=k[Z+1]*S;I.set(ct.createBezierPoints(j,H,X,Q,vt,wt),(Z-2)*3),[j,H,X,Q]=[X,Q,vt,wt]}}if(y.length===0)return null;const T=u?new fS:new Zm;return T.build(y,e,n,1,i,u?0:g,o),{outline:T,newCurves:C,areContours:u,thickness:g,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:o}){let l=1/0,u=-1/0,h=0;for(const k of t){h+=k.length;for(let D=2,R=k.length;D<R;D++){const I=k[D]-k[D-2];l=Math.min(l,I),u=Math.max(u,I)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,g=xy+hf*p,y=new Uint32Array(g);let w=0;y[w++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,y[w++]=0,y[w++]=i,y[w++]=o,y[w++]=e?0:1,y[w++]=Math.max(0,Math.floor(n??0)),y[w++]=p,y[w++]=f.BYTES_PER_ELEMENT;for(const k of t)y[w++]=k.length-2,y[w++]=k[0],y[w++]=k[1];const A=new CompressionStream("deflate-raw"),S=A.writable.getWriter();await S.ready,S.write(y);const C=f.prototype.constructor;for(const k of t){const D=new C(k.length-2);for(let R=2,I=k.length;R<I;R++)D[R-2]=k[R]-k[R-2];S.write(D)}S.close();const T=await new Response(A.readable).arrayBuffer(),M=new Uint8Array(T);return Bk(M)}static async decompressSignature(t){try{const e=D3(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const k of n)l||(l=new Uint8Array(new Uint32Array(k.buffer,0,4)[0])),l.set(k,u),u+=k.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],g=h[3],y=h[4]===0,w=h[5],A=h[6],S=h[7],C=[],T=(xy+hf*A)*Uint32Array.BYTES_PER_ELEMENT;let M;switch(S){case Int8Array.BYTES_PER_ELEMENT:M=new Int8Array(l.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:M=new Int16Array(l.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:M=new Int32Array(l.buffer,T);break}u=0;for(let k=0;k<A;k++){const D=h[hf*k+xy],R=new Float32Array(D+2);C.push(R);for(let I=0;I<hf-1;I++)R[I]=h[hf*k+xy+I+1];for(let I=0;I<D;I++)R[I+2]=R[I]+M[u++]}return{areContours:y,thickness:w,outlines:C,width:p,height:g}}catch(e){return kt(`decompressSignature: ${e}`),null}}}_c=new WeakMap,Xt=new WeakSet,pS=function(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i},Rs=new WeakMap,ND=function(t,e,n,i,o,l,u){const h=_(this,Xt,pS).call(this,n,i,o,l);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,g=c(this,Rs)[2*p],y=c(this,Rs)[2*p+1];if(t[(n+g)*e+(i+y)]!==0)return p}return-1},FD=function(t,e,n,i,o,l,u){const h=_(this,Xt,pS).call(this,n,i,o,l);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,g=c(this,Rs)[2*p],y=c(this,Rs)[2*p+1];if(t[(n+g)*e+(i+y)]!==0)return p}return-1},mS=function(t,e,n,i){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=i?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let u=1,h;const f=[];for(let p=1;p<n-1;p++){h=1;for(let g=1;g<e-1;g++){const y=p*e+g,w=l[y];if(w===0)continue;let A=p,S=g;if(w===1&&l[y-1]===0)u+=1,S-=1;else if(w>=1&&l[y+1]===0)u+=1,S+=1,w>1&&(h=w);else{w!==1&&(h=Math.abs(w));continue}const C=[g,p],T=S===g+1,M={isHole:T,points:C,id:u,parent:0};f.push(M);let k;for(const Z of f)if(Z.id===h){k=Z;break}k?k.isHole?M.parent=T?k.parent:h:M.parent=T?h:k.parent:M.parent=T?h:0;const D=_(this,Xt,ND).call(this,l,e,p,g,A,S,0);if(D===-1){l[y]=-u,l[y]!==1&&(h=Math.abs(l[y]));continue}let R=c(this,Rs)[2*D],I=c(this,Rs)[2*D+1];const j=p+R,H=g+I;A=j,S=H;let X=p,Q=g;for(;;){const Z=_(this,Xt,FD).call(this,l,e,X,Q,A,S,1);R=c(this,Rs)[2*Z],I=c(this,Rs)[2*Z+1];const vt=X+R,wt=Q+I;C.push(wt,vt);const gt=X*e+Q;if(l[gt+1]===0?l[gt]=-u:l[gt]===1&&(l[gt]=u),vt===p&&wt===g&&X===j&&Q===H){l[y]!==1&&(h=Math.abs(l[y]));break}else A=X,S=Q,X=vt,Q=wt}}}return f},Zy=function(t,e,n,i){if(n-e<=4){for(let j=e;j<n-2;j+=2)i.push(t[j],t[j+1]);return}const o=t[e],l=t[e+1],u=t[n-4]-o,h=t[n-3]-l,f=Math.hypot(u,h),p=u/f,g=h/f,y=p*l-g*o,w=h/u,A=1/f,S=Math.atan(w),C=Math.cos(S),T=Math.sin(S),M=A*(Math.abs(C)+Math.abs(T)),k=A*(1-M+M**2),D=Math.max(Math.atan(Math.abs(T+C)*k),Math.atan(Math.abs(T-C)*k));let R=0,I=e;for(let j=e+2;j<n-2;j+=2){const H=Math.abs(y-p*t[j+1]+g*t[j]);H>R&&(I=j,R=H)}R>(f*D)**2?(_(this,Xt,Zy).call(this,t,e,I+2,i),_(this,Xt,Zy).call(this,t,I,n,i)):i.push(o,l)},OD=function(t){const e=[],n=t.length;return _(this,Xt,Zy).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},BD=function(t,e,n,i,o,l){const u=new Float32Array(l**2),h=-2*i**2,f=l>>1;for(let S=0;S<l;S++){const C=(S-f)**2;for(let T=0;T<l;T++)u[S*l+T]=Math.exp((C+(T-f)**2)/h)}const p=new Float32Array(256),g=-2*o**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/g);const y=t.length,w=new Uint8Array(y),A=new Uint32Array(256);for(let S=0;S<n;S++)for(let C=0;C<e;C++){const T=S*e+C,M=t[T];let k=0,D=0;for(let I=0;I<l;I++){const j=S+I-f;if(!(j<0||j>=n))for(let H=0;H<l;H++){const X=C+H-f;if(X<0||X>=e)continue;const Q=t[j*e+X],Z=u[I*l+H]*p[Math.abs(Q-M)];k+=Q*Z,D+=Z}}const R=w[T]=Math.round(k/D);A[R]++}return[w,A]},jD=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},gS=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,o=1/0;for(let u=0,h=n.length;u<h;u++){const f=n[u]=t[u<<2];i=Math.max(i,f),o=Math.min(o,f)}const l=255/(i-o);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-o)*l;return n},yS=function(t){let e,n=-1/0,i=-1/0;const o=t.findIndex(h=>h!==0);let l=o,u=o;for(e=o;e<256;e++){const h=t[e];h>n&&(e-l>i&&(i=e-l,u=e-1),n=h,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},VD=function(t){const e=t,{width:n,height:i}=t,{maxDim:o}=c(this,_c);let l=n,u=i;if(n>o||i>o){let y=n,w=i,A=Math.log2(Math.max(n,i)/o);const S=Math.floor(A);A=A===S?S-1:S;for(let T=0;T<A;T++){l=Math.ceil(y/2),u=Math.ceil(w/2);const M=new OffscreenCanvas(l,u);M.getContext("2d").drawImage(t,0,0,y,w,0,0,l,u),y=l,w=u,t!==e&&t.close(),t=M.transferToImageBitmap()}const C=Math.min(o/l,o/u);l=Math.round(l*C),u=Math.round(u*C)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[_(this,Xt,gS).call(this,p),l,u]},E(fo,Xt),E(fo,_c,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),E(fo,Rs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class xA extends kD{constructor(){super(),super.updateProperties({fill:de._defaultLineColor,"stroke-width":0})}clone(){const t=new xA;return t.updateAll(this),t}}class SA extends c0{constructor(t){super(t),super.updateProperties({stroke:de._defaultLineColor,"stroke-width":1})}clone(){const t=new SA(this._viewParameters);return t.updateAll(this),t}}var ka,hr,Ma,Pc;const pi=class pi extends Pv{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});E(this,ka,!1);E(this,hr,null);E(this,Ma,null);E(this,Pc,null);this._willKeepAspectRatio=!0,b(this,Ma,e.signatureData||null),b(this,hr,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){de.initialize(e,n),this._defaultDrawingOptions=new xA,this._defaultDrawnSignatureOptions=new SA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Mt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,hr)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,Ma)){const{lines:o,mustSmooth:l,areContours:u,description:h,uuid:f,heightInPage:p}=c(this,Ma),{rawDims:{pageWidth:g,pageHeight:y},rotation:w}=this.parent.viewport,A=fo.processDrawnLines({lines:o,pageWidth:g,pageHeight:y,rotation:w,innerMargin:pi._INNER_MARGIN,mustSmooth:l,areContours:u});this.addSignature(A,p,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,hr)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){b(this,Pc,e),this.addEditToolbar()}getUuid(){return c(this,Pc)}get description(){return c(this,hr)}set description(e){b(this,hr,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:o,height:l}=c(this,Ma),u=Math.max(o,l),h=fo.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:i,width:o,height:l},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,o){const{x:l,y:u}=this,{outline:h}=b(this,Ma,e);b(this,ka,h instanceof fS),this.description=i;let f;c(this,ka)?f=pi.getDefaultDrawingOptions():(f=pi._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[,p]=this.pageDimensions;let g=n/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=l,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return fo.process(e,n,i,o,pi._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:o},rotation:l}=this.parent.viewport;return fo.extractContoursFromText(e,n,i,o,l,pi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return fo.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:o,innerMargin:pi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=pi.getDefaultDrawingOptions():(this._drawingOptions=pi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l=Object.assign(super.serialize(e),{isSignature:!0,areContours:c(this,ka),color:[0,0,0],thickness:c(this,ka)?0:o});return this.addComment(l),e?(l.paths={lines:n,points:i},l.uuid=c(this,Pc),l.isCopy=!0):l.lines=n,c(this,hr)&&(l.accessibilityData={type:"Figure",alt:c(this,hr)}),l}static deserializeDraw(e,n,i,o,l,u){return u.areContours?fS.deserialize(e,n,i,o,l,u):Zm.deserialize(e,n,i,o,l,u)}static async deserialize(e,n,i){var l;const o=await super.deserialize(e,n,i);return b(o,ka,e.areContours),o.description=((l=e.accessibilityData)==null?void 0:l.alt)||"",b(o,Pc,e.uuid),o}};ka=new WeakMap,hr=new WeakMap,Ma=new WeakMap,Pc=new WeakMap,K(pi,"_type","signature"),K(pi,"_editorType",Rt.SIGNATURE),K(pi,"_defaultDrawingOptions",null);let vS=pi;var be,hn,Da,ao,Ra,ed,lo,kc,dr,Li,nd,Wt,If,Nf,tv,ev,nv,bS,iv,UD;class wS extends de{constructor(e){super({...e,name:"stampEditor"});E(this,Wt);E(this,be,null);E(this,hn,null);E(this,Da,null);E(this,ao,null);E(this,Ra,null);E(this,ed,"");E(this,lo,null);E(this,kc,!1);E(this,dr,null);E(this,Li,!1);E(this,nd,!1);b(this,ao,e.bitmapUrl),b(this,Ra,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){de.initialize(e,n)}static isHandlingMimeForPasting(e){return sx.includes(e)}static paste(e,n){n.pasteEditor({mode:Rt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:o,width:l,height:u,channels:o.length/(l*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;c(this,hn)&&(b(this,be,null),this._uiManager.imageManager.deleteId(c(this,hn)),(e=c(this,lo))==null||e.remove(),b(this,lo,null),c(this,dr)&&(clearTimeout(c(this,dr)),b(this,dr,null))),super.remove()}rebuild(){if(!this.parent){c(this,hn)&&_(this,Wt,tv).call(this);return}super.rebuild(),this.div!==null&&(c(this,hn)&&c(this,lo)===null&&_(this,Wt,tv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,Da)||c(this,be)||c(this,ao)||c(this,Ra)||c(this,hn)||c(this,kc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,kc)||(c(this,be)?_(this,Wt,ev).call(this):_(this,Wt,tv).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(b(this,hn,i),o&&b(this,be,o),b(this,kc,!1),_(this,Wt,ev).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,dr)!==null&&clearTimeout(c(this,dr)),b(this,dr,setTimeout(()=>{b(this,dr,null),_(this,Wt,bS).call(this)},200))}copyCanvas(e,n,i=!1){e||(e=224);const{width:o,height:l}=c(this,be),u=new yr;let h=c(this,be),f=o,p=l,g=null;if(n){if(o>n||l>n){const j=Math.min(n/o,n/l);f=Math.floor(o*j),p=Math.floor(l*j)}g=document.createElement("canvas");const w=g.width=Math.ceil(f*u.sx),A=g.height=Math.ceil(p*u.sy);c(this,Li)||(h=_(this,Wt,nv).call(this,w,A));const S=g.getContext("2d");S.filter=this._uiManager.hcmFilter;let C="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":O3.isDarkMode&&(C="#8f8f9d",T="#42414d");const M=15,k=M*u.sx,D=M*u.sy,R=new OffscreenCanvas(k*2,D*2),I=R.getContext("2d");I.fillStyle=C,I.fillRect(0,0,k*2,D*2),I.fillStyle=T,I.fillRect(0,0,k,D),I.fillRect(k,D,k,D),S.fillStyle=S.createPattern(R,"repeat"),S.fillRect(0,0,w,A),S.drawImage(h,0,0,h.width,h.height,0,0,w,A)}let y=null;if(i){let w,A;if(u.symmetric&&h.width<e&&h.height<e)w=h.width,A=h.height;else if(h=c(this,be),o>e||l>e){const T=Math.min(e/o,e/l);w=Math.floor(o*T),A=Math.floor(l*T),c(this,Li)||(h=_(this,Wt,nv).call(this,w,A))}const C=new OffscreenCanvas(w,A).getContext("2d",{willReadFrequently:!0});C.drawImage(h,0,0,h.width,h.height,0,0,w,A),y={width:w,height:A,data:C.getImageData(0,0,w,A).data}}return{canvas:g,width:f,height:p,imageData:y}}static async deserialize(e,n,i){var C;let o=null,l=!1;if(e instanceof iD){const{data:{rect:T,rotation:M,id:k,structParent:D,popupRef:R,richText:I,contentsObj:j,creationDate:H,modificationDate:X},container:Q,parent:{page:{pageNumber:Z}},canvas:vt}=e;let wt,gt;vt?(delete e.canvas,{id:wt,bitmap:gt}=i.imageManager.getFromCanvas(Q.id,vt),vt.remove()):(l=!0,e._hasNoCanvas=!0);const St=((C=await n._structTree.getAriaAttributes(`${Pu}${k}`))==null?void 0:C.get("aria-label"))||"";o=e={annotationType:Rt.STAMP,bitmapId:wt,bitmap:gt,pageIndex:Z-1,rect:T.slice(0),rotation:M,annotationElementId:k,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:St},isSvg:!1,structParent:D,popupRef:R,richText:I,comment:(j==null?void 0:j.str)||null,creationDate:H,modificationDate:X}}const u=await super.deserialize(e,n,i),{rect:h,bitmap:f,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:w}=e;l?(i.addMissingCanvas(e.id,u),b(u,kc,!0)):g&&i.imageManager.isValidId(g)?(b(u,hn,g),f&&b(u,be,f)):b(u,ao,p),b(u,Li,y);const[A,S]=u.pageDimensions;return u.width=(h[2]-h[0])/A,u.height=(h[3]-h[1])/S,w&&(u.altTextData=w),u._initialData=o,e.comment&&u.setCommentData(e),b(u,nd,!!o),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:c(this,hn),isSvg:c(this,Li)});if(this.addComment(i),e)return i.bitmapUrl=_(this,Wt,iv).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=_(this,Wt,UD).call(this,i);return h.isSame?null:(h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const u=c(this,Li)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(c(this,hn)))n.stamps.set(c(this,hn),{area:u,serialized:i}),i.bitmap=_(this,Wt,iv).call(this,!1);else if(c(this,Li)){const h=n.stamps.get(c(this,hn));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=_(this,Wt,iv).call(this,!1))}return i}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}be=new WeakMap,hn=new WeakMap,Da=new WeakMap,ao=new WeakMap,Ra=new WeakMap,ed=new WeakMap,lo=new WeakMap,kc=new WeakMap,dr=new WeakMap,Li=new WeakMap,nd=new WeakMap,Wt=new WeakSet,If=function(e,n=!1){if(!e){this.remove();return}b(this,be,e.bitmap),n||(b(this,hn,e.id),b(this,Li,e.isSvg)),e.file&&b(this,ed,e.file.name),_(this,Wt,ev).call(this)},Nf=function(){if(b(this,Da,null),this._uiManager.enableWaiting(!1),!!c(this,lo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,be)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,be)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},tv=function(){if(c(this,hn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,hn)).then(i=>_(this,Wt,If).call(this,i,!0)).finally(()=>_(this,Wt,Nf).call(this));return}if(c(this,ao)){const i=c(this,ao);b(this,ao,null),this._uiManager.enableWaiting(!0),b(this,Da,this._uiManager.imageManager.getFromUrl(i).then(o=>_(this,Wt,If).call(this,o)).finally(()=>_(this,Wt,Nf).call(this)));return}if(c(this,Ra)){const i=c(this,Ra);b(this,Ra,null),this._uiManager.enableWaiting(!0),b(this,Da,this._uiManager.imageManager.getFromFile(i).then(o=>_(this,Wt,If).call(this,o)).finally(()=>_(this,Wt,Nf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=sx.join(",");const n=this._uiManager._signal;b(this,Da,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_(this,Wt,If).call(this,o)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>_(this,Wt,Nf).call(this))),e.click()},ev=function(){var f;const{div:e}=this;let{width:n,height:i}=c(this,be);const[o,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,i=this.height*l;else if(n>u*o||i>u*l){const p=Math.min(u*o/n,u*l/i);n*=p,i*=p}this._uiManager.enableWaiting(!1);const h=b(this,lo,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/o,this.height=i/l,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),_(this,Wt,bS).call(this),c(this,nd)||(this.parent.addUndoableEditor(this),b(this,nd,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,ed)&&this.div.setAttribute("aria-description",c(this,ed)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},nv=function(e,n){const{width:i,height:o}=c(this,be);let l=i,u=o,h=c(this,be);for(;l>2*e||u>2*n;){const f=l,p=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(l,u);g.getContext("2d").drawImage(h,0,0,f,p,0,0,l,u),h=g.transferToImageBitmap()}return h},bS=function(){const[e,n]=this.parentDimensions,{width:i,height:o}=this,l=new yr,u=Math.ceil(i*e*l.sx),h=Math.ceil(o*n*l.sy),f=c(this,lo);if(!f||f.width===u&&f.height===h)return;f.width=u,f.height=h;const p=c(this,Li)?c(this,be):_(this,Wt,nv).call(this,u,h),g=f.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,u,h)},iv=function(e){if(e){if(c(this,Li)){const o=this._uiManager.imageManager.getSvgUrl(c(this,hn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,be),n.getContext("2d").drawImage(c(this,be),0,0),n.toDataURL()}if(c(this,Li)){const[n,i]=this.pageDimensions,o=Math.round(this.width*n*Ha.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*Ha.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,l);return u.getContext("2d").drawImage(c(this,be),0,0,c(this,be).width,c(this,be).height,0,0,o,l),u.transferToImageBitmap()}return structuredClone(c(this,be))},UD=function(e){var u;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,o=e.pageIndex===n,l=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}},K(wS,"_type","stamp"),K(wS,"_editorType",Rt.STAMP);var Mc,id,La,Ia,co,li,Na,sd,rd,Ls,uo,dn,ho,Fa,od,pt,Oa,ae,SS,zD,Ws,AS,ES,sv;const Ss=class Ss{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:f,l10n:p}){E(this,ae);E(this,Mc);E(this,id,!1);E(this,La,null);E(this,Ia,null);E(this,co,null);E(this,li,new Map);E(this,Na,!1);E(this,sd,!1);E(this,rd,!1);E(this,Ls,null);E(this,uo,null);E(this,dn,null);E(this,ho,null);E(this,Fa,null);E(this,od,-1);E(this,pt);const g=[...c(Ss,Oa).values()];if(!Ss._initialized){Ss._initialized=!0;for(const y of g)y.initialize(p,t)}t.registerEditorTypes(g),b(this,pt,t),this.pageIndex=e,this.div=n,b(this,Mc,o),b(this,La,l),this.viewport=f,b(this,dn,h),this.drawLayer=u,this._structTree=i,c(this,pt).addLayer(this)}get isEmpty(){return c(this,li).size===0}get isInvisible(){return this.isEmpty&&c(this,pt).getMode()===Rt.NONE}updateToolbar(t){c(this,pt).updateToolbar(t)}updateMode(t=c(this,pt).getMode()){switch(_(this,ae,sv).call(this),t){case Rt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Rt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Rt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Rt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of c(Ss,Oa).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,dn))==null?void 0:e.div)}setEditingState(t){c(this,pt).setEditingState(t)}addCommands(t){c(this,pt).addCommands(t)}cleanUndoStack(t){c(this,pt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,La))==null||e.togglePointerEvents(t)}async enable(){var n;b(this,rd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,Fa))==null||n.abort(),b(this,Fa,null);const t=new Set;for(const i of c(this,ae,SS))i.enableEditing(),i.show(!0),i.annotationElementId&&(c(this,pt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=c(this,La);if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),c(this,pt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const o=await this.deserialize(i);o&&(this.addOrRebuild(o),o.enableEditing())}b(this,rd,!1),c(this,pt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(b(this,sd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,dn)&&!c(this,Fa)){b(this,Fa,new AbortController);const o=c(this,pt).combinedSignal(c(this,Fa));c(this,dn).div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:f,timeStamp:p}=l,g=c(this,od);if(p-g>500){b(this,od,p);return}b(this,od,-1);const{classList:y}=this.div;y.toggle("getElements",!0);const w=document.elementsFromPoint(h,f);if(y.toggle("getElements",!1),!this.div.contains(w[0]))return;let A;const S=new RegExp(`^${Yf}[0-9]+$`);for(const T of w)if(S.test(T.id)){A=T.id;break}if(!A)return;const C=c(this,li).get(A);(C==null?void 0:C.annotationElementId)===null&&(l.stopPropagation(),l.preventDefault(),C.dblclick(l))},{signal:o,capture:!0})}const t=c(this,La),e=[];if(t){const o=new Map,l=new Map;for(const h of c(this,ae,SS)){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){o.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);(i=this.getEditableAnnotation(h.annotationElementId))==null||i.show(),h.remove()}const u=t.getEditableAnnotations();for(const h of u){const{id:f}=h.data;if(c(this,pt).isDeletedAnnotationElement(f)){h.updateEdited({deleted:!0});continue}let p=l.get(f);if(p){p.resetAnnotationElement(h),p.show(!1),h.show();continue}p=o.get(f),p&&(c(this,pt).addChangedExistingAnnotation(p),p.renderAnnotationElement(h)&&p.show(!1)),h.show()}}_(this,ae,sv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of c(Ss,Oa).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),b(this,sd,!1)}getEditableAnnotation(t){var e;return((e=c(this,La))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,pt).getActive()!==t&&c(this,pt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,dn))!=null&&t.div&&!c(this,ho)){b(this,ho,new AbortController);const e=c(this,pt).combinedSignal(c(this,ho));c(this,dn).div.addEventListener("pointerdown",_(this,ae,zD).bind(this),{signal:e}),c(this,dn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,dn))!=null&&t.div&&c(this,ho)&&(c(this,ho).abort(),b(this,ho,null),c(this,dn).div.classList.remove("highlighting"))}enableClick(){if(c(this,Ia))return;b(this,Ia,new AbortController);const t=c(this,pt).combinedSignal(c(this,Ia));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,Ia))==null||t.abort(),b(this,Ia,null)}attach(t){c(this,li).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,pt).isDeletedAnnotationElement(e)&&c(this,pt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,li).delete(t.id),(e=c(this,Mc))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,sd)&&t.annotationElementId&&c(this,pt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,pt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,pt).addDeletedAnnotationElement(t),de.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,pt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,rd)),c(this,pt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,co)&&(t._focusEventsAllowed=!1,b(this,co,setTimeout(()=>{b(this,co,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,pt)._signal}),e.focus())},0))),t._structTreeParentId=(n=c(this,Mc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of c(this,li).values())if(e.uid===t)return e;return null}getNextId(){return c(this,pt).getId()}combinedSignal(t){return c(this,pt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,ae,Ws))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await c(this,pt).updateMode(t.mode);const{offsetX:n,offsetY:i}=_(this,ae,ES).call(this),o=this.getNextId(),l=_(this,ae,AS).call(this,{parent:this,id:o,x:n,y:i,uiManager:c(this,pt),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=c(Ss,Oa).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,pt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),o=_(this,ae,AS).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:c(this,pt),isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(_(this,ae,ES).call(this),!0,t)}setSelected(t){c(this,pt).setSelected(t)}toggleSelected(t){c(this,pt).toggleSelected(t)}unselect(t){c(this,pt).unselect(t)}pointerup(t){var i;const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,Na)||(b(this,Na,!1),(i=c(this,ae,Ws))!=null&&i.isDrawer&&c(this,ae,Ws).supportMultipleDrawings))return;if(!c(this,id)){b(this,id,!0);return}const n=c(this,pt).getMode();if(n===Rt.STAMP||n===Rt.SIGNATURE){c(this,pt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var i;if(c(this,pt).getMode()===Rt.HIGHLIGHT&&this.enableTextSelection(),c(this,Na)){b(this,Na,!1);return}const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(b(this,Na,!0),(i=c(this,ae,Ws))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=c(this,pt).getActive();b(this,id,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,Ls)){c(this,ae,Ws).startDrawing(this,c(this,pt),!1,t);return}c(this,pt).setCurrentDrawingSession(this),b(this,Ls,new AbortController);const e=c(this,pt).combinedSignal(c(this,Ls));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(b(this,uo,null),this.commitOrRemove())},{signal:e}),c(this,ae,Ws).startDrawing(this,c(this,pt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&b(this,uo,e);return}c(this,uo)&&setTimeout(()=>{var e;(e=c(this,uo))==null||e.focus(),b(this,uo,null)},0)}endDrawingSession(t=!1){return c(this,Ls)?(c(this,pt).setCurrentDrawingSession(null),c(this,Ls).abort(),b(this,Ls,null),b(this,uo,null),c(this,ae,Ws).endDrawing(t)):null}findNewParent(t,e,n){const i=c(this,pt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return c(this,Ls)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Ls)&&c(this,ae,Ws).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,pt).getActive())==null?void 0:t.parent)===this&&(c(this,pt).commitOrRemove(),c(this,pt).setActiveEditor(null)),c(this,co)&&(clearTimeout(c(this,co)),b(this,co,null));for(const n of c(this,li).values())(e=c(this,Mc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,li).clear(),c(this,pt).removeLayer(this)}render({viewport:t}){this.viewport=t,Lc(this.div,t);for(const e of c(this,pt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,pt).commitOrRemove(),_(this,ae,sv).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Lc(this.div,{rotation:n}),e!==n)for(const i of c(this,li).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,pt).viewParameters.realScale}};Mc=new WeakMap,id=new WeakMap,La=new WeakMap,Ia=new WeakMap,co=new WeakMap,li=new WeakMap,Na=new WeakMap,sd=new WeakMap,rd=new WeakMap,Ls=new WeakMap,uo=new WeakMap,dn=new WeakMap,ho=new WeakMap,Fa=new WeakMap,od=new WeakMap,pt=new WeakMap,Oa=new WeakMap,ae=new WeakSet,SS=function(){return c(this,li).size!==0?c(this,li).values():c(this,pt).getEditors(this.pageIndex)},zD=function(t){c(this,pt).unselectAll();const{target:e}=t;if(e===c(this,dn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,dn).div.contains(e)){const{isMac:n}=en.platform;if(t.button!==0||t.ctrlKey&&n)return;c(this,pt).showAllEditors("highlight",!0,!0),c(this,dn).div.classList.add("free"),this.toggleDrawing(),_v.startHighlighting(this,c(this,pt).direction==="ltr",{target:c(this,dn).div,x:t.x,y:t.y}),c(this,dn).div.addEventListener("pointerup",()=>{c(this,dn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,pt)._signal}),t.preventDefault()}},Ws=function(){return c(Ss,Oa).get(c(this,pt).getMode())},AS=function(t){const e=c(this,ae,Ws);return e?new e.prototype.constructor(t):null},ES=function(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+i),f=(o+u)/2-t,p=(l+h)/2-e,[g,y]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:y}},sv=function(){for(const t of c(this,li).values())t.isEmpty()&&t.remove()},K(Ss,"_initialized",!1),E(Ss,Oa,new Map([nS,dS,wS,_v,vS].map(t=>[t._editorType,t])));let xS=Ss;var Is,Wn,Dc,zm,Xv,HD,vr,TS,WD,_S;const Qe=class Qe{constructor({pageIndex:t}){E(this,vr);E(this,Is,null);E(this,Wn,new Map);E(this,Dc,new Map);this.pageIndex=t}setParent(t){if(!c(this,Is)){b(this,Is,t);return}if(c(this,Is)!==t){if(c(this,Wn).size>0)for(const e of c(this,Wn).values())e.remove(),t.append(e);b(this,Is,t)}}static get _svgFactory(){return Mt(this,"_svgFactory",new Cv)}draw(t,e=!1,n=!1){const i=qe(Qe,zm)._++,o=_(this,vr,TS).call(this),l=Qe._svgFactory.createElement("defs");o.append(l);const u=Qe._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,Dc).set(i,u);const f=n?_(this,vr,WD).call(this,l,h):null,p=Qe._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,t),c(this,Wn).set(i,o),{id:i,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=qe(Qe,zm)._++,i=_(this,vr,TS).call(this),o=Qe._svgFactory.createElement("defs");i.append(o);const l=Qe._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const g=Qe._svgFactory.createElement("mask");o.append(g),h=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const y=Qe._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=Qe._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${u}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const f=Qe._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return i.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(i,t),c(this,Wn).set(n,i),n}finalizeDraw(t,e){c(this,Dc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:i,rootClass:o,path:l}=e,u=typeof t=="number"?c(this,Wn).get(t):t;if(u){if(n&&_(this,vr,_S).call(this,u,n),i&&_(h=Qe,Xv,HD).call(h,u,i),o){const{classList:f}=u;for(const[p,g]of Object.entries(o))f.toggle(p,g)}if(l){const p=u.firstElementChild.firstElementChild;_(this,vr,_S).call(this,p,l)}}}updateParent(t,e){if(e===this)return;const n=c(this,Wn).get(t);n&&(c(e,Is).append(n),c(this,Wn).delete(t),c(e,Wn).set(t,n))}remove(t){c(this,Dc).delete(t),c(this,Is)!==null&&(c(this,Wn).get(t).remove(),c(this,Wn).delete(t))}destroy(){b(this,Is,null);for(const t of c(this,Wn).values())t.remove();c(this,Wn).clear(),c(this,Dc).clear()}};Is=new WeakMap,Wn=new WeakMap,Dc=new WeakMap,zm=new WeakMap,Xv=new WeakSet,HD=function(t,[e,n,i,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*i}%`,l.height=`${100*o}%`},vr=new WeakSet,TS=function(){const t=Qe._svgFactory.create(1,1,!0);return c(this,Is).append(t),t.setAttribute("aria-hidden",!0),t},WD=function(t,e){const n=Qe._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Qe._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),i},_S=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},E(Qe,Xv),E(Qe,zm,0);let CS=Qe;globalThis._pdfjsTestingUtils={HighlightOutliner:sS};globalThis.pdfjsLib={AbortException:za,AnnotationEditorLayer:xS,AnnotationEditorParamsType:jt,AnnotationEditorType:Rt,AnnotationEditorUIManager:Ic,AnnotationLayer:tS,AnnotationMode:Xo,AnnotationType:He,applyOpacity:j3,build:XV,ColorPicker:Av,createValidAbsoluteUrl:Ik,CSSConstants:B3,DOMSVGFactory:Cv,DrawLayer:CS,FeatureTest:en,fetchData:Ym,findContrastColor:V3,getDocument:zM,getFilenameFromUrl:R3,getPdfFilenameFromUrl:L3,getRGB:Km,getUuid:Ok,getXfaPageViewport:N3,GlobalWorkerOptions:fr,ImageKind:Cy,InvalidPDFException:nx,isDataScheme:a0,isPdfFile:mA,isValidExplicitDest:Q3,MathClamp:Gn,noContextMenu:hs,normalizeUnicode:k3,OPS:qf,OutputScale:yr,PasswordResponses:b3,PDFDataRangeTransport:HM,PDFDateString:yv,PDFWorker:Jf,PermissionFlag:w3,PixelsPerInch:Ha,RenderingCancelledException:pA,renderRichText:Vk,ResponseException:gv,setLayerDimensions:Lc,shadow:Mt,SignatureExtractor:fo,stopEvent:Ne,SupportedImageMimeTypes:sx,TextLayer:Qf,TouchManager:wv,updateUrlHash:Nk,Util:st,VerbosityLevel:s0,version:GV,XfaLayer:jk};const yU="/assets/pdf.worker.min-LyOxJPrg.mjs";fr.workerSrc=yU;async function vU(s){if(s.type==="application/pdf")return SU(s);if(s.type.startsWith("text/")||s.type==="application/json")return xU(s);throw new Error(`Unsupported text file type: ${s.type}`)}function wU(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{const o=n.result.split(",");if(o.length<2){e(new Error("Invalid file content: could not extract base64 data"));return}const l=o[1];t(l)},n.onerror=e,n.readAsDataURL(s)})}function bU(s){return s.type.startsWith("image/")}async function xU(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=e,n.readAsText(s)})}async function SU(s){const t=await s.arrayBuffer(),e=await zM(t).promise;let n="";for(let i=1;i<=e.numPages;i++){const u=(await(await e.getPage(i)).getTextContent()).items.map(h=>h.str).join(" ");n+=u+`

`}return n}function $D({onGenerated:s}){const[t,e]=U.useState("biology"),[n,i]=U.useState(""),[o,l]=U.useState(!1),[u,h]=U.useState(null),[f,p]=U.useState(!1),[g,y]=U.useState(null),w=U.useRef(null),A=async()=>{if(!(!n.trim()&&!g))try{l(!0),h(null);let T=n,M;if(g)try{if(bU(g))M=[{inlineData:{data:await wU(g),mimeType:g.type}}],T||(T="See attached image for study material.");else{const D=await vU(g);T=(T+`

`+D).trim()}}catch(D){console.error("File processing error:",D),h(`Failed to read file: ${D.message||"Unknown error"}. Check console for details.`),l(!1);return}if(!T&&!M){h("No content found in file or text area."),l(!1);return}const k=await v3({subjectId:t,materialText:T,images:M});s(k)}catch(T){console.error(T),h("Failed to generate combat drills. Please try again.")}finally{l(!1)}},S=T=>{T.target.files&&T.target.files[0]&&(y(T.target.files[0]),p(!1))},C=()=>{y(null),w.current&&(w.current.value="")};return F.jsxs("div",{className:"glass-panel rounded-xl p-4 space-y-3",children:[F.jsx("div",{className:"flex items-center justify-between",children:F.jsxs("div",{children:[F.jsx("div",{className:"text-sm font-medium text-white/80",children:"The Strategist"}),F.jsx("div",{className:"text-[11px] text-white/40",children:"Drop material. Receive drills and flashcards."})]})}),F.jsxs("select",{value:t,onChange:T=>e(T.target.value),className:"w-full bg-surface/80 border border-white/10 rounded-lg px-3 py-2 text-xs focus:outline-none focus:border-accent/70",children:[F.jsx("option",{value:"biology",children:"Biology"}),F.jsx("option",{value:"physics",children:"Physics"}),F.jsx("option",{value:"chemistry",children:"Chemistry"}),F.jsx("option",{value:"maths",children:"Maths"}),F.jsx("option",{value:"other",children:"Other"})]}),F.jsxs("div",{className:"relative",children:[F.jsx("textarea",{value:n,onChange:T=>i(T.target.value),placeholder:"Paste notes or summary from your PDF...",className:"w-full h-32 bg-surface/80 border border-white/10 rounded-lg px-3 py-2 text-xs focus:outline-none focus:border-accent/70 resize-none pb-10"}),F.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-2",children:[g&&F.jsxs("div",{className:"flex items-center gap-1 bg-white/10 px-2 py-1 rounded-md text-[10px] text-white/80 animate-in fade-in slide-in-from-bottom-1",children:[F.jsx("span",{className:"max-w-[100px] truncate",children:g.name}),F.jsx("button",{onClick:C,className:"hover:text-urgent",children:F.jsx(f3,{size:12})})]}),F.jsxs("div",{className:"relative",children:[F.jsx("button",{onClick:()=>p(!f),className:"p-1.5 rounded-full bg-white/5 hover:bg-white/10 text-white/60 hover:text-white transition-colors",children:F.jsx(c3,{size:16})}),f&&F.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-gray-900/95 backdrop-blur-md border border-white/10 rounded-lg shadow-xl overflow-hidden min-w-[140px] z-10 animate-in zoom-in-95 duration-100",children:[F.jsxs("button",{onClick:()=>{var T;return(T=w.current)==null?void 0:T.click()},className:"w-full px-3 py-2 text-left text-xs text-white/80 hover:bg-white/5 flex items-center gap-2",children:[F.jsx(h3,{size:14,className:"text-secondary"}),F.jsx("span",{children:"Local File"})]}),F.jsxs("button",{onClick:()=>alert("Google Drive integration coming soon!"),className:"w-full px-3 py-2 text-left text-xs text-white/80 hover:bg-white/5 flex items-center gap-2",children:[F.jsx("span",{className:"font-bold text-blue-400 text-[10px] w-3.5 h-3.5 flex items-center justify-center border border-current rounded-sm",children:"G"}),F.jsx("span",{children:"Google Drive"})]})]})]})]}),F.jsx("input",{type:"file",ref:w,onChange:S,className:"hidden"})]}),u&&F.jsx("div",{className:"text-[11px] text-urgent",children:u}),F.jsx("button",{type:"button",onClick:A,disabled:o||!n.trim()&&!g,className:"neon-button px-3 py-2 rounded-lg bg-accent text-xs font-medium disabled:opacity-30 disabled:cursor-not-allowed w-full",children:o?"Generating...":"Generate Combat Drills + Flashcards"})]})}const O_=[{id:"biology",name:"Biology"},{id:"physics",name:"Physics"},{id:"chemistry",name:"Chemistry"},{id:"maths",name:"Maths"}];function AU(){const{sessions:s,powerLevel:t}=Dk(),[e,n]=U.useState({biology:42,physics:37,chemistry:51,maths:28}),i=U.useMemo(()=>{const o={};for(const l of s){const u=l.startedAt.slice(0,10);o[u]=(o[u]??0)+l.durationMinutes}return o},[s]);return F.jsxs("div",{className:"space-y-6",children:[F.jsx("div",{className:"flex items-center justify-between",children:F.jsxs("div",{children:[F.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Command Center"}),F.jsx("div",{className:"text-lg text-white/90",children:"Calibrate your grind. Track your power level."})]})}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr,1.5fr] gap-4",children:[F.jsx(Kj,{studyMinutesByDay:i}),F.jsx(Jj,{summary:t})]}),F.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[F.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[F.jsx(Qj,{subjects:O_,mastery:e}),F.jsx(Rk,{subjects:O_})]}),F.jsx("div",{className:"space-y-4",children:F.jsx($D,{onGenerated:()=>{n(o=>({...o,biology:Math.min(100,(o.biology??0)+3)}))}})})]})]})}function EU(){const[s,t]=U.useState([]),[e,n]=U.useState([]),[i,o]=U.useState(null),[l,u]=U.useState({}),h=s.find(f=>f.id===i)||(s.length>0?s[0]:null);return F.jsxs("div",{className:"space-y-6",children:[F.jsx("div",{className:"flex items-center justify-between",children:F.jsxs("div",{children:[F.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Combat Drills"}),F.jsx("div",{className:"text-lg text-white/90",children:"High-difficulty MCQs tuned for application and analysis."})]})}),F.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[F.jsx("div",{className:"lg:col-span-2 glass-panel rounded-xl p-4",children:h?F.jsxs("div",{className:"space-y-3",children:[F.jsxs("div",{className:"text-xs text-accent uppercase tracking-[0.25em]",children:["Q",s.indexOf(h)+1," / ",s.length]}),F.jsx("div",{className:"text-sm text-white/90",children:h.question}),F.jsx("div",{className:"space-y-2 mt-2",children:h.options.map(f=>{const p=l[h.id],g=f.id===h.correctOptionId,y=p===f.id;let w="bg-surface/80 border-white/8";return p&&(g?w="bg-accent/30 border-accent/60":y&&(w="bg-urgent/30 border-urgent/60")),F.jsx("button",{type:"button",onClick:()=>u(A=>({...A,[h.id]:f.id})),className:`w-full text-left px-3 py-2 rounded-lg border text-xs ${w}`,children:f.text},f.id)})}),l[h.id]&&F.jsx("div",{className:"mt-3 text-[11px] text-white/70",children:h.explanation})]}):F.jsx("div",{className:"text-xs text-white/50",children:"Generate a combat drill set from your notes to begin."})}),F.jsxs("div",{className:"space-y-4",children:[F.jsx($D,{onGenerated:({questions:f,flashcards:p})=>{var g;t(f),n(p),o(((g=f[0])==null?void 0:g.id)??null)}}),F.jsxs("div",{className:"glass-panel rounded-xl p-3 text-[11px] text-white/60",children:[F.jsx("div",{className:"text-white/70 mb-1",children:"Flashcards queued"}),F.jsxs("div",{children:[e.length," cards added to SRS queue."]})]})]})]})]})}const CU=[{id:"biology",name:"Biology"},{id:"physics",name:"Physics"},{id:"chemistry",name:"Chemistry"},{id:"maths",name:"Maths"}];function TU(){return F.jsxs("div",{className:"space-y-6",children:[F.jsx("div",{className:"flex items-center justify-between",children:F.jsxs("div",{children:[F.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Deep Work Grinder"}),F.jsx("div",{className:"text-lg text-white/90",children:"Track focused blocks. Tag every minute to a subject."})]})}),F.jsx(Rk,{subjects:CU})]})}function _U(){return F.jsxs("div",{className:"space-y-6",children:[F.jsx("div",{className:"flex items-center justify-between",children:F.jsxs("div",{children:[F.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"The Legion"}),F.jsx("div",{className:"text-lg text-white/90",children:"Squads, leaderboards, and real-time grind status."})]})}),F.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[F.jsxs("div",{className:"glass-panel rounded-xl p-4 lg:col-span-2",children:[F.jsx("div",{className:"text-sm font-medium text-white/80 mb-2",children:"Study Squads"}),F.jsx("div",{className:"text-xs text-white/50",children:"Squad creation, membership, and leaderboards can be backed by Supabase Realtime. This panel is reserved for shared stats like hours this week, win streaks, and squad rank."})]}),F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{className:"glass-panel rounded-xl p-4",children:[F.jsx("div",{className:"text-sm font-medium text-white/80 mb-2",children:"Who's Grinding"}),F.jsx("div",{className:"text-xs text-white/50",children:"Realtime presence from Supabase can show who is in study mode now."})]}),F.jsxs("div",{className:"glass-panel rounded-xl p-4",children:[F.jsx("div",{className:"text-sm font-medium text-white/80 mb-2",children:"Voice Channels"}),F.jsx("div",{className:"text-xs text-white/50",children:"WebRTC rooms for Silent Study and Peer Review can be wired here. UI hooks into a signaling backend of your choice."})]})]})]})]})}function PU(){const[s,t]=U.useState(""),[e,n]=U.useState(""),[i,o]=U.useState(!1),[l,u]=U.useState(null),h=RS(),f=async g=>{g.preventDefault(),o(!0),u(null);try{const y=av(),{error:w}=await y.auth.signInWithPassword({email:s,password:e});if(w)throw w;h("/")}catch(y){const w=y instanceof Error?y.message:"Failed to login";u(w)}finally{o(!1)}},p=async()=>{o(!0),u(null);try{const g=av(),{error:y}=await g.auth.signUp({email:s,password:e});if(y)throw y;alert("Check your email for the confirmation link!")}catch(g){const y=g instanceof Error?g.message:"Failed to sign up";u(y)}finally{o(!1)}};return F.jsxs("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center p-4 relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,_#1a1a1a_0%,_#000000_100%)]"}),F.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#2E5BFF] to-transparent opacity-50"}),F.jsxs(hd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-panel p-8 w-full max-w-md relative z-10 border border-white/10",children:[F.jsxs("div",{className:"text-center mb-8",children:[F.jsx("h1",{className:"text-3xl font-bold tracking-tighter text-white mb-2",children:"SARWAK"}),F.jsx("p",{className:"text-gray-400 text-sm uppercase tracking-widest",children:"Academic Command Center"})]}),l&&F.jsx("div",{className:"bg-[#FF3131]/10 border border-[#FF3131]/30 text-[#FF3131] p-3 rounded mb-4 text-sm",children:l}),F.jsxs("form",{onSubmit:f,className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Cadet Email"}),F.jsx("input",{type:"email",value:s,onChange:g=>t(g.target.value),className:"w-full bg-[#111] border border-white/10 rounded p-3 text-white focus:outline-none focus:border-[#2E5BFF] transition-colors",placeholder:"cadet@sarwak.edu",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Passcode"}),F.jsx("input",{type:"password",value:e,onChange:g=>n(g.target.value),className:"w-full bg-[#111] border border-white/10 rounded p-3 text-white focus:outline-none focus:border-[#2E5BFF] transition-colors",placeholder:"",required:!0})]}),F.jsx("button",{type:"submit",disabled:i,className:"w-full neon-button py-3 text-sm font-bold tracking-wider uppercase",children:i?"Authenticating...":"Enter Command Center"}),F.jsx("div",{className:"pt-4 flex justify-center",children:F.jsx("button",{type:"button",onClick:p,className:"text-xs text-[#2E5BFF] hover:text-white transition-colors uppercase tracking-wider",children:"Initialize New Cadet Profile"})})]})]})]})}function kU(){return F.jsxs(X2,{children:[F.jsx(Wo,{path:"/auth",element:F.jsx(PU,{})}),F.jsx(Wo,{element:F.jsx(cI,{}),children:F.jsxs(Wo,{path:"/",element:F.jsx(BB,{}),children:[F.jsx(Wo,{index:!0,element:F.jsx(AU,{})}),F.jsx(Wo,{path:"combat-drills",element:F.jsx(EU,{})}),F.jsx(Wo,{path:"deep-work",element:F.jsx(TU,{})}),F.jsx(Wo,{path:"legion",element:F.jsx(_U,{})})]})})]})}t2.createRoot(document.getElementById("root")).render(F.jsx(Su.StrictMode,{children:F.jsx(eI,{children:F.jsx(kU,{})})}));
